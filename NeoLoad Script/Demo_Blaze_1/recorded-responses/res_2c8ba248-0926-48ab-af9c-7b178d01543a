(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{"0Ki6":function(e,t,n){"use strict";n("i4UL"),n("IAdD");var o=n("1Pcy"),a=n.n(o),r=n("W/Kd"),i=n.n(r),s=n("KEM+"),l=n.n(s),c=n("YRQv"),d=n("ERkP"),u=n("CHgo"),h=n("fs1G"),m=n("7nmT"),p=n.n(m),f=n("rHpw"),_=n("3xO4"),v=n.n(_),w=n("Enqy"),g=c.a(),y={zoom:1,lastX:0,lastY:0,zoomCenter:{x:0,y:0}},C={height:0,width:0,left:0,right:0,top:0,bottom:0},b=function(e,t,n){return Math.min(t,Math.max(e,n))},M=function(e,t){return Math.sqrt(Math.pow(e.clientY-t.clientY,2)+Math.pow(e.clientX-t.clientX,2))},x=function(e){function t(t){var n;return n=e.call(this,t)||this,l()(a()(n),"_itemDimensions",C),l()(a()(n),"_setTouchableNode",(function(e){n._touchableNode=p.a.findDOMNode(e),n._touchableNode&&(n._removeTouchListener=Object(u.a)(n._touchableNode,n._handleTouchMove,!1))})),l()(a()(n),"_handleTouchStart",(function(e){n._zoomable instanceof Element&&(n._zoomedDimensions=n._zoomable.getBoundingClientRect()),n._moved=!1;var t=e.touches.length;2===t?(e.preventDefault(),n._handlePinchStart(e)):1===t&&n._handleTapStart(e)})),l()(a()(n),"_handleTouchMove",(function(e){var t=e.touches.length;2===t?n._handlePinchMove(e):1===t&&(n._moved=!0,n._handlePanMove(e)),e.preventDefault()})),l()(a()(n),"_handleTouchEnd",(function(e){var t=n.props,o=t.maxZoom,a=t.minZoom,r=t.onTap,i=b(a,o,n.state.zoom),s=n.state.zoom;s!==i&&1===i?n.resetZoom():n.setState({lastX:0,lastY:0,zoom:i}),0===e.touches.length?(n._lastTouchTime&&n._lastTouchTime+300>e.timeStamp?(n._clickTimer&&clearTimeout(n._clickTimer),n._handleDoubleTap(e)):s<=1&&!n._moved&&(n._clickTimer=setTimeout(r,300)),n._lastTouchTime=e.timeStamp):e.preventDefault()})),n.state=Object.assign({},y),n._ref=d.createRef(),n}i()(t,e),t.getDerivedStateFromProps=function(e,t){return g&&e.resetZoom?(e.onZoomed(!1),Object.assign({},y)):t};var n=t.prototype;return n.render=function(){var e=this;if(!g)return this.props.children;var t=this.state,n=t.zoom,o=t.zoomCenter,a=this._moved,r={zoom:Object(w.spring)(n),zoomCenterX:Object(w.spring)(o.x),zoomCenterY:Object(w.spring)(o.y)};return d.createElement(v.a,{onTouchEnd:this._handleTouchEnd,onTouchStart:this._handleTouchStart,ref:this._setTouchableNode,style:E.fill},d.createElement(w.Motion,{style:r},(function(t){var n=t.zoom,r=t.zoomCenterX,i=t.zoomCenterY;return d.createElement(v.a,{ref:e._ref,style:[E.fill,{transform:[{scale:n}],transformOrigin:(a?r:o.x)+"px "+(a?i:o.y)+"px"}]},e.props.children)})))},n.componentDidMount=function(){g&&(this._zoomable=p.a.findDOMNode(this._ref.current),this._updateWindowDimensions())},n.componentWillUnmount=function(){this._removeTouchListener&&this._removeTouchListener()},n.resetZoom=function(){this.props.onZoomed(!1),this.setState({zoom:y.zoom})},n._handlePanMove=function(e){if(!(this.state.zoom<=1)&&this._zoomedDimensions&&this._windowDimensions){var t=e.touches[0],n=t.clientX,o=t.clientY;if(this.state.lastX&&this.state.lastY){var a=this.state,r=a.lastX,i=a.lastY,s=a.zoomCenter,l=s.x,c=s.y,d=this._windowDimensions,u=d.height,h=d.width,m=this._zoomedDimensions,p=m.height,f=0,_=0;m.width-h>0&&(f=n-r),p-u>0&&(_=o-i),this.setState({lastX:n,lastY:o,zoomCenter:{x:Math.min(Math.max(l-f,0),h),y:Math.min(Math.max(c-_,0),u)}})}else this.setState({lastX:n,lastY:o})}},n._handlePinchStart=function(e){var t,n,o=e.touches;if(this._updateWindowDimensions(),this._lastDistance=M(o[0],o[1]),1===this.state.zoom){var a=(t=o[0],n=o[1],{x:(t.clientX+n.clientX)/2,y:(t.clientY+n.clientY)/2});this.setState({zoomCenter:this._getZoomCenter(a.x,a.y)}),this.props.onZoomed(!0)}},n._handlePinchMove=function(e){var t=this.state,n=t.zoom,o=t.zoomCenter,a=this.props,r=a.maxZoom,i=a.maxZoomBounce,s=a.minZoom,l=a.minZoomBounce;if(0!==o.x||0!==o.y){var c=M(e.touches[0],e.touches[1]),d=this._lastDistance?c/this._lastDistance:1,u=b(s-l,r+i,n*d);this._lastDistance=c,this.setState({zoom:u})}else 2===e.touches.length&&this._handlePinchStart(e)},n._handleTapStart=function(e){var t=e.touches;this._tapCenter=this._getZoomCenter(t[0].clientX,t[0].clientY)},n._handleDoubleTap=function(e){var t=this.props,n=t.maxZoom,o=t.onZoomed;1!==this.state.zoom?this.resetZoom():(this._updateWindowDimensions(),this.setState({zoom:n,zoomCenter:this._tapCenter||y.zoomCenter}),o(!0))},n._getZoomCenter=function(e,t){this._zoomable instanceof Element&&(this._itemDimensions=this._zoomable.getBoundingClientRect());var n=this._itemDimensions;return{x:e-n.left,y:t-n.top}},n._updateWindowDimensions=function(){this._windowDimensions={height:window.innerHeight,width:window.innerWidth}},t}(d.Component);l()(x,"defaultProps",{maxZoom:2.5,maxZoomBounce:.15,minZoom:1,minZoomBounce:.15,onTap:h.a,onZoomed:h.a,resetZoom:!1});var E=f.a.create((function(e){return{fill:{flex:1}}}));t.a=x},"2doW":function(e,t,n){"use strict";n("jQ3i"),n("z84I"),n("KqXw"),n("Ysgh");var o=n("1Pcy"),a=n.n(o),r=n("W/Kd"),i=n.n(r),s=n("KEM+"),l=n.n(s),c=n("ERkP"),d=(n("2G9S"),n("vrRf"),n("97Jx")),u=n.n(d),h=n("LdEA"),m=n.n(h),p=n("aWzz"),f=(n("IAdD"),n("7x/C"),n("JtPf"),n("FwvS")),_=n("3XMw"),v=n.n(_),w=n("mN6z"),g=n("D4le"),y=n.n(g),C=n("3xO4"),b=n.n(C),M=n("0Ki6"),x=n("r1lV"),E=n("rHpw"),T=n("JYMr"),I=v.a.b327c129,D=v.a.gff1f69e,S=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,l()(a()(t),"state",{loadingVariant:null,imageLoading:!1}),l()(a()(t),"_handleLoadStart",(function(){return t.setState({imageLoading:!0})})),l()(a()(t),"_handleLoadEnd",(function(){return t.setState({imageLoading:!1})})),t}i()(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;this._mountPromiseForTesting=t._selectCachedVariant(this.props.photo).then((function(t){return e.setState({loadingVariant:t})}))},n.componentDidUpdate=function(e,n){var o=this;Object(w.a)(e.photo,this.props.photo)||(this.setState({loadingVariant:null}),t._selectCachedVariant(this.props.photo).then((function(e){return o.setState({loadingVariant:e})})))},n.render=function(){var e=this.props,n=e.dataSaver,o=e.onContextMenu,a=e.onError,r=e.onLoad,i=e.onTap,s=e.onZoomed,l=e.photo,d=e.resetZoom,u=e.zoomable,h=e.style,m=this.state.loadingVariant,p=(n&&m&&Math.max(m.width,m.height)>=680?m.uri:null)||t._selectSource(l);if(!p||null===m)return null;var f=c.createElement(y.a,{accessibilityLabel:l.ext_alt_text?l.ext_alt_text:I,defaultSource:m&&m.uri,draggable:!0,onContextMenu:o,onError:m?void 0:a,onLoad:r,onLoadEnd:this._handleLoadEnd,onLoadStart:this._handleLoadStart,resizeMode:"contain",source:p,style:P.img});return c.createElement(b.a,{style:h},this.state.imageLoading?O:null,u?c.createElement(M.a,{onTap:i,onZoomed:s,resetZoom:d},f):f)},t._selectCachedVariant=function(e){var t=f.c(e);return t?x.a.selectLargestCachedVariant(t):Promise.resolve()},t._selectSource=function(e){var t=f.c(e);return t&&x.a.selectLargestUrl(t)},t}(c.PureComponent);l()(S,"defaultProps",{zoomable:!1});var P=E.a.create((function(e){return{img:Object.assign({},E.a.absoluteFillObject,{height:"auto",margin:"auto",maxHeight:"100%",maxWidth:"100%",width:"auto"}),progressBar:{position:"absolute",top:0,zIndex:1}}})),O=c.createElement(T.a,{ariaValueText:D,indeterminate:!0,style:P.progressBar}),z=S,L=n("RCZO"),k=n("KdqI"),R=n("TrHT"),Z=n("Modb"),j=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,l()(a()(t),"_handlePlaybackStarted",(function(){t._player&&!t.props.isCurrentlyDisplayed&&t._player.pause()})),l()(a()(t),"_setPlayer",(function(e){t._player=e,t._player&&t.props.isCurrentlyDisplayed&&t._player.play()})),t}i()(t,e);var n=t.prototype;return n.render=function(){var e=this.props.style;return c.createElement(b.a,{style:e},c.createElement(b.a,{style:B.root},this._renderVideo()))},n.componentDidUpdate=function(e){var t=this.props.isCurrentlyDisplayed;this._player&&t!==e.isCurrentlyDisplayed&&(t?this._player.play():this._player.pause())},n._renderVideo=function(){var e=this.props,t=e.promotedContent,n=e.video,o=e.videoId;return c.createElement(Z.a,u()({},Object(R.a)(o,n),{onPlaybackStarted:this._handlePlaybackStarted,playbackCoordination:null,promotedContent:t,setPlayer:this._setPlayer,withPostPlayback:!0}))},t}(c.PureComponent),B=E.a.create({root:{flexBasis:0,flexGrow:1,flexShrink:1,justifyContent:"center"}}),W=j,A=n("ziVO"),X=n("q9Zt"),Y=n("mjJ+"),N=n("TGLq"),U=n.n(N),H=v.a.ac85c6b1,V=v.a.f46c1d5e,F=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,l()(a()(t),"state",{error:null,contextMenuPoint:{top:0,left:0},showContextMenu:!1,containerDimensions:{width:0,height:0}}),l()(a()(t),"_handleError",(function(e){t.setState({error:e.nativeEvent.error})})),l()(a()(t),"_handleLoad",(function(){t.setState({error:null})})),l()(a()(t),"_handleMediaPress",(function(e){e.stopPropagation()})),l()(a()(t),"_handleRetry",(function(){t.setState({error:null})})),l()(a()(t),"_handleContextMenu",(function(e){Object(k.e)()&&(e.preventDefault(),e.stopPropagation(),t.setState({contextMenuPoint:{left:e.clientX,top:e.clientY}}),t.setState({showContextMenu:!0}))})),l()(a()(t),"_handleContextCancel",(function(){return t.setState({showContextMenu:!1})})),l()(a()(t),"_handleOpenImageURI",(function(){U.a.openURL(t.props.mediaDetail.media_url_https),t._handleContextCancel()})),l()(a()(t),"_getContextMenuItems",(function(){return[{text:V,onClick:t._handleOpenImageURI}]})),l()(a()(t),"_handleLayout",(function(e){var n=e.nativeEvent.layout,o=n.height,a=n.width;t.setState({containerDimensions:{width:a,height:o}})})),t}i()(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(e,t){return!Object(w.a)(e,this.props)||!Object(w.a)(t,this.state)},n.UNSAFE_componentWillReceiveProps=function(e){this.setState({error:null,showContextMenu:!1})},n.render=function(){var e,t=this.props,n=t.isCurrentlyDisplayed,o=t.mediaDetail,a=t.onDismiss,r=t.onTap,i=t.promotedContent,s=t.videoId,l=m()(t,["isCurrentlyDisplayed","mediaDetail","onDismiss","onTap","promotedContent","videoId"]),d=o.original_info||{},h=d.width,p=d.height,f=this.state,_=f.error,v=f.showContextMenu,w=f.containerDimensions,g=w.width,y=w.height,C=this.context.isModal,M=C?Object(L.e)({mediaWidth:h,mediaHeight:p,containerWidth:g,containerHeight:y}):K.mediaItem;return o&&(e=["animated_gif","video","vine"].indexOf(o.type)>-1),c.createElement(A.a,{onDismiss:a,onLayout:C?this._handleLayout:void 0,style:K.root},_?c.createElement(X.a,{onRetry:this._handleRetry,style:K.errorDetail,title:H,withLightOnDarkColorScheme:!0}):null,v?c.createElement(Y.a,{items:this._getContextMenuItems(),onCloseRequested:this._handleContextCancel,position:this.state.contextMenuPoint}):null,_?null:c.createElement(b.a,{onClick:this._handleMediaPress,style:M},"photo"===o.type?c.createElement(z,u()({},l,{onContextMenu:this._handleContextMenu,onError:this._handleError,onLoad:this._handleLoad,onTap:r,photo:o,style:K.container,zoomable:!0})):null,e&&s?c.createElement(W,{isCurrentlyDisplayed:n,promotedContent:i,style:K.container,video:o,videoId:s}):null))},t}(c.Component);l()(F,"contextTypes",{isModal:p.bool});var K=E.a.create((function(e){return{root:{flexGrow:1,justifyContent:"center",alignItems:"center",flexShrink:1},mediaItem:{flexGrow:1,width:"100%",height:"100%"},container:{height:"100%",position:"absolute",width:"100%"},errorDetail:{alignItems:"center",alignSelf:"center",justifyContent:"center",position:"absolute",height:"100%",maxWidth:400}}})),q=F,G=n("lklz"),J=n("cHvH"),Q=n("uavX"),$=n("fs1G"),ee=function(e){function t(t,n){var o;return o=e.call(this,t,n)||this,l()(a()(o),"_getWithReducedNavButtonClickArea",(function(e,t){return e<E.a.theme.breakpoints.large||o._isItemVideo(t)})),l()(a()(o),"_isItemVideo",(function(e){return["video","animated_gif","vine"].includes(e.type)})),l()(a()(o),"_getItemVideoId",(function(e){return o.props.videoId||function(e){return G.b.forTweet(e.expanded_url.split("/")[3])}(e)})),l()(a()(o),"_handleMediaDetailZoomed",(function(e){var t=o.props.onMediaDetailZoomed;o.state.isZoomed!==e&&o.setState({isZoomed:e}),t&&t(e)})),o.state={isZoomed:!1},o}i()(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(e,t){return!Object(w.a)(e,this.props)||!Object(w.a)(t,this.state)},n.render=function(){var e=this,t=this.props,n=t.dataSaver,o=t.dominantColor,a=t.mediaIndex,r=t.mediaItems,i=t.onDismiss,s=t.onMediaItemChanged,l=t.onTap,d=t.promotedContent,u=this.state.isZoomed,h=r.map((function(t,o){var s=e._isItemVideo(t),h=e._getItemVideoId(t),m=a===o;return s&&h||!s?c.createElement(q,{dataSaver:n,isCurrentlyDisplayed:m,key:o,mediaDetail:r[o],onDismiss:u?void 0:i,onTap:l,onZoomed:m?e._handleMediaDetailZoomed:void 0,promotedContent:d,resetZoom:a!==o,videoId:h}):null}));return c.createElement(J.a,null,(function(t){var n=t.windowWidth;return c.createElement(b.a,{style:te.root},r.length>1?c.createElement(Q.a,{currentSlide:a,dominantColor:o,locked:u||1===r.length,onChange:s,withReducedNavButtonClickArea:e._getWithReducedNavButtonClickArea(n,r[a])},h):h)}))},t}(c.Component);l()(ee,"defaultProps",{mediaIndex:0,onMediaDetailZoomed:$.a,onMediaItemChanged:$.a});var te=E.a.create((function(e){return{root:{flex:1,zIndex:1}}}));t.a=ee},TGLq:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var o,a=n("6/RC"),r=(o=n("tI3i"))&&o.__esModule?o:{default:o};var i=a.canUseDOM?window.location.href:"",s={addEventListener:function(){},removeEventListener:function(){},canOpenURL:function(){return Promise.resolve(!0)},getInitialURL:function(){return Promise.resolve(i)},openURL:function(e){try{return l(e),Promise.resolve()}catch(t){return Promise.reject(t)}},_validateURL:function(e){(0,r.default)("string"==typeof e,"Invalid URL: should be a string. Was: "+e),(0,r.default)(e,"Invalid URL: cannot be empty")}},l=function(e){a.canUseDOM&&(window.location=new URL(e,window.location).toString())},c=s;t.default=c,e.exports=t.default},UPvq:function(e,t,n){"use strict";n.d(t,"a",(function(){return M}));n("2G9S"),n("IAdD");var o=n("1Pcy"),a=n.n(o),r=n("W/Kd"),i=n.n(r),s=n("KEM+"),l=n.n(s),c=n("ERkP"),d=n("RCZO"),u=n("aWzz"),h=n("3XMw"),m=n.n(h),p=n("l2F/"),f=n.n(p),_=n("3xO4"),v=n.n(_),w=n("mw9i"),g=n("cm6r"),y=n("/yvb"),C=n("rHpw"),b=m.a.ia5e7487,M=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,l()(a()(t),"_handleCloseButtonPress",(function(e){e.stopPropagation(),(0,t.props.onCloseButtonPress)()})),l()(a()(t),"_handleBackgroundPress",(function(){var e=t.props.onCloseButtonPress;t.context.isModal&&e()})),t}return i()(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.children,o=t.backgroundColor,a=t.mediaItem,r=t.mediaUrl,i=t.hideButtons,s=t.topRightButton,l=t.footerButtons,u=t.overlayFooter,h=this.context.isModal,m=Object.assign({backgroundColor:o.rgba},d.a),p=Object.assign({backgroundColor:o.rgb},d.a),_=[x.root,h?m:p,{position:h?"relative":"fixed"}];return c.createElement(c.Fragment,null,c.createElement(v.a,{onClick:this._handleBackgroundPress,style:_},n,l?c.createElement(v.a,{pointerEvents:i?"none":void 0,style:[x.footerButtons,u&&m,u&&x.footerButtonsAbsolute,i&&x.fadeOut]},c.createElement(w.a,{withGutter:!0},l)):null),c.createElement(g.a,{accessibilityRole:"none",interactiveStyles:null,onClick:this._handleCloseButtonPress,pointerEvents:i?"none":void 0,style:[x.buttonWrapper,x.buttonWrapperLeft,d.a,i&&x.fadeOut]},(function(t){return c.createElement(y.a,{accessibilityLabel:b,dominantColor:o.rgb,icon:c.createElement(f.a,null),interactivityState:t,onClick:e._handleCloseButtonPress,type:a||r?"onMedia":"invertedPrimary"})})),s?c.createElement(v.a,{pointerEvents:i?"none":void 0,style:[x.buttonWrapper,x.buttonWrapperRight,d.a,i&&x.fadeOut]},s):null)},t}(c.Component);l()(M,"contextTypes",{isModal:u.bool}),l()(M,"defaultProps",{hideButtons:!1});var x=C.a.create((function(e){return{root:{overflowX:"hidden",overflowY:"hidden",height:"100%",width:"100%"},buttonWrapper:{position:"absolute",top:0,padding:e.spaces.xSmall,alignItems:"center",justifyContent:"center",cursor:"pointer"},buttonWrapperLeft:{left:0},buttonWrapperRight:{right:0},fadeOut:{opacity:0},footerButtons:{width:"100%",alignSelf:"center"},footerButtonsAbsolute:{position:"absolute",bottom:0,paddingBottom:C.a.iPhoneOffsetBottom,zIndex:1}}}))},gpRP:function(e,t,n){"use strict";n("IAdD"),t.__esModule=!0,t.default=void 0;var o=s(n("7DT3")),a=s(n("/uF9")),r=s(n("ERkP")),i=s(n("OkZJ"));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){return void 0===e&&(e={}),(0,o.default)("svg",Object.assign({},e,{style:[i.default.root,e.style,a.default.isRTL&&i.default.iconRtl],viewBox:"0 0 24 24"}),r.default.createElement("g",null,r.default.createElement("path",{d:"M21.185 11.47l-9.25-9.25c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06l8.72 8.72-8.72 8.72c-.294.294-.294.77 0 1.062.145.146.337.22.53.22s.383-.073.53-.22l9.25-9.25c.293-.295.293-.77 0-1.062z"}),r.default.createElement("path",{d:"M13.376 11.47l-9.25-9.25c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06l8.72 8.72-8.72 8.72c-.294.294-.294.77 0 1.062.146.145.337.218.53.218s.384-.073.53-.22l9.25-9.25c.293-.293.293-.767 0-1.06z"})))};l.metadata={height:24,width:24};var c=l;t.default=c},rrZY:function(e,t,n){"use strict";var o=n("ERkP"),a=o.createContext(!1);t.a=a},u1Qz:function(e,t,n){"use strict";n.r(t),n.d(t,"TweetMediaDetailScreen",(function(){return ge}));n("IAdD"),n("KqXw"),n("MvUL");var o=n("1Pcy"),a=n.n(o),r=n("W/Kd"),i=n.n(r),s=n("KEM+"),l=n.n(s),c=n("ERkP"),d=n("aWzz"),u=(n("Blm6"),n("WNMA"),n("zh9S")),h=n("rxPX"),m=n("0KEI"),p=n("H9MA"),f=n("XOJV"),_=n("P1r1"),v=function(e,t){return t.match.params.screenName},w=function(e,t){return t.match.params.statusId},g=function(e,t){var n=t.match.params.index;return parseInt(n,10)-1},y=function(e,t){return f.a.selectFetchStatus(e,w(0,t))},C=function(e,t){return e.location&&e.location.state&&e.location.state[t]},b=function(e,t){return C(t,"promotedContent")},M=function(e,t){return C(t,"socialContext")},x=function(e,t){return C(t,"contextTweetId")},E=function(e,t){var n=w(0,t),o=f.a.select(e,n);return o&&o.conversation_id_str||void 0},T=Object(h.a)().propsFromState((function(){return{fetchStatus:y,index:g,screenName:v,tweetId:w,tweet:f.a.createHydratedTweetSelector(w),promotedContent:b,dataSaver:p.c,socialContext:M,contextTweetId:x,rootTweet:f.a.createHydratedTweetSelector(E),conversationTreeEnabled:_.h,showTweetMediaDetailDrawer:_.v}})).propsFromActions((function(){return{createLocalApiErrorHandler:Object(m.d)("TWEET_MEDIA_DETAIL_SCREEN"),fetchTweetIfNeeded:f.a.fetchOneIfNeeded,googleAnalyticsPageView:u.a,updateSettings:_.E}})).withAnalytics({page:"tweet",section:"media"}),I=(n("2G9S"),n("uFXj"),n("ymux")),D=n("rkhm"),S=n("ZUOq"),P=S.a.columnWidths.secondary.normal,O=S.a.columnWidths.primary,z=n("AUxQ"),L=n("rrZY"),k=n("yw4N"),R=n("I7xG"),Z=n("rHpw"),j=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,l()(a()(t),"_getApiErrorHandlerMap",Object(R.a)(a()(t),(function(e){return e.screenName}),(function(e){return Object(D.a)(e)}))),l()(a()(t),"_getModule",Object(R.a)(a()(t),(function(e){return e.tweetId}),(function(e){return e.conversationTreeEnabled}),(function(e,t){return Object(I.a)({focalTweetId:e,conversationTreeEnabled:t})}))),t}return i()(t,e),t.prototype.render=function(){var e=this.props,t=e.contextTweetId,n=e.conversationTreeEnabled,o=e.location,a=e.tweet,r=e.tweetId,i=e.promotedContent,s=e.rootTweet,l=e.socialContext,d={selectedTweetId:r};return c.createElement(k.a,{"aria-expanded":"true",style:B.root},c.createElement(L.a.Provider,{value:!0},c.createElement(z.a,{apiErrorHandlerMap:this._getApiErrorHandlerMap(),contextTweetId:t,conversationTreeEnabled:n,focalTweet:a,focalTweetId:r,location:o,module:this._getModule(),promotedContent:i,rootTweet:s,selectedTweet:d,socialContext:l,withFocalTweetMedia:!1})))},t}(c.Component),B=Z.a.create((function(e){return{root:{backgroundColor:e.colors.cellBackground,overflow:"auto",width:P,borderLeftWidth:e.borderWidths.small,borderColor:e.colors.borderColor,borderStyle:"solid"}}})),W=j,A=n("wrlS"),X=n("v//M"),Y=n("W5XZ"),N=n("RCZO"),U=n("kp0V"),H=n("3XMw"),V=n.n(H),F=n("zcjS"),K=n.n(F),q=n("gpRP"),G=n.n(q),J=n("/aF9"),Q=n.n(J),$=(n("5BYb"),n("6/RC")),ee={};var te=["touchend","touchmove","touchstart"],ne=function(){return $.canUseDOM&&te.some((function(e){return!!function(e,t){if(void 0!==ee[e])return ee[e];var n=document.createElement(t||"div"),o="on"+e,a=o in n;return a||(n.setAttribute(o,"return;"),a="function"==typeof n[o]),ee[e]=a,a}(e)}))},oe=n("2doW"),ae=n("UPvq"),re=n("VTxf"),ie=n("wiP2"),se=n("Rp9C"),le=n("xXop"),ce=n("lklz"),de=n("3xO4"),ue=n.n(de),he=n("cHvH"),me=n("mjJ+"),pe=n("/yvb"),fe=V.a.d132269b,_e=V.a.dd657211,ve=V.a.h63a5c3b,we=V.a.f20b040d,ge=function(e){function t(t,n){var o;return o=e.call(this,t,n)||this,l()(a()(o),"_renderMediaModal",(function(e){var t=o.props.fetchStatus,n=o._shouldHideButtons(),a=o._getCurrentMediaItem(),r=Object(N.b)(a),i=o._touchSupported&&o._isCurrentMediaItemPhoto();return c.createElement(ae.a,{backgroundColor:r,footerButtons:o._renderFooter(),hideButtons:n,mediaItem:a,onCloseButtonPress:o._handleClose,overlayFooter:i,topRightButton:o._renderTopRightButton(e)},c.createElement(X.a,{accessibilityLabel:fe,fetchStatus:t,onRequestRetry:o._handleFetchTweet,render:o._renderContent}))})),l()(a()(o),"_renderMediaModalWithDrawer",(function(){var e=o.props,t=e.contextTweetId,n=e.location,a=e.tweetId,r=e.tweet,i=e.promotedContent,s=e.rootTweet,l=e.socialContext,d=e.conversationTreeEnabled,u=e.screenName;return c.createElement(he.a,null,(function(e){var h=e.windowWidth;return c.createElement(ue.a,{style:ye.container},c.createElement(ue.a,{style:ye.neighbor},o._renderMediaModal(h)),o._shouldShowMediaModalDrawer(h)?c.createElement(W,{contextTweetId:t,conversationTreeEnabled:d,location:n,promotedContent:i,rootTweet:s,screenName:u,socialContext:l,tweet:r,tweetId:a}):null)}))})),l()(a()(o),"_shouldIgnoreShowDrawerSetting",(function(e){return e-P<O})),l()(a()(o),"_shouldShowMediaModalDrawer",(function(e){var t=o.props.showTweetMediaDetailDrawer,n=o.state.showDrawerOnNarrowScreen;return o._shouldIgnoreShowDrawerSetting(e)?n:t})),l()(a()(o),"_handleToggleDrawer",(function(e){return function(){var t=o.props,n=t.showTweetMediaDetailDrawer,a=t.updateSettings,r=t.analytics,i=o.state.showDrawerOnNarrowScreen;e&&o._shouldIgnoreShowDrawerSetting(e)?(r.scribe({component:"conversation_drawer",action:i?"collapse":"expand"}),o.setState({showDrawerOnNarrowScreen:!i})):(r.scribe({component:"conversation_drawer",action:n?"collapse":"expand"}),a({showTweetMediaDetailDrawer:!n}))}})),l()(a()(o),"_getPermalink",(function(){var e=o.props.tweet;return e&&e.user?"/"+e.user.screen_name+"/status/"+e.id_str:"/"})),l()(a()(o),"_renderOverflowMenu",(function(e){return c.createElement(me.a,{isFixed:!0,items:[{link:o._getPermalink(),text:_e}],onCloseRequested:e})})),l()(a()(o),"_getExtendedMedia",(function(){var e=o.props.location.state;if(e){var t=e.mediaItems;return t&&"index"in t&&"items"in t?t:void 0}})),l()(a()(o),"_getIndex",(function(){var e=o._getExtendedMedia();return e?e.index:o.props.index})),l()(a()(o),"_getMediaItems",(function(){var e=o._getExtendedMedia();if(e)return e.items;var t=o.props.tweet;return t?t.extended_entities&&t.extended_entities.media||t.card&&t.card.media:void 0})),l()(a()(o),"_getLocationState",(function(e){var t=o._getExtendedMedia(),n=o.props.location;return t?Object.assign({},n.state,{mediaItems:Object.assign({},t,{index:e})}):n.state})),l()(a()(o),"_isCurrentMediaItemPhoto",(function(){var e=o._getIndex(),t=o._getMediaItems();if(!t)return!1;var n=t[e];return n&&"photo"===n.type})),l()(a()(o),"_handleMediaItemTapped",(function(){o._touchSupported&&o.setState((function(e){return{showControls:!e.showControls}}))})),l()(a()(o),"_renderContent",(function(){var e=o.props,t=e.dataSaver,n=e.promotedContent,a=e.tweet,r=o._getIndex(),i=o._getMediaItems();if(!i)return c.createElement(re.a,null);var s=i[r],l=Object(N.b)(s).rgb;return c.createElement(oe.a,{dataSaver:t,dominantColor:l,mediaIndex:r,mediaItems:i,onDismiss:o._handleClose,onMediaDetailZoomed:o._handleMediaDetailZoomed,onMediaItemChanged:o._handleMediaItemChanged,onTap:o._handleMediaItemTapped,promotedContent:n,videoId:1===i.length&&a?ce.b.forTweet(a.id_str):void 0})})),l()(a()(o),"_handleClose",(function(){var e=o.props,t=e.history,n=e.location,a=o._getPermalink();o._historyTrackerEnabled?t.goBackToNonModalRoute({fallbackPath:a,location:n}):Object(U.a)({backLocation:a,history:t,location:n})})),l()(a()(o),"_getPermalink",(function(){var e=o.props.tweet;return e&&e.user?"/"+e.user.screen_name+"/status/"+e.id_str:"/"})),l()(a()(o),"_possiblyRedirectToCanonical",(function(){var e=o.props,t=e.history,n=e.screenName,a=e.tweet;if(a&&a.user&&n.toLowerCase()!==a.user.screen_name.toLowerCase()){var r=o._getCanonicalPath();r&&t.replace(r)}})),l()(a()(o),"_getCanonicalPath",(function(){var e=o.props,t=e.index,n=e.tweet;return n&&n.user?"/"+n.user.screen_name+"/status/"+n.id_str+"/photo/"+(t+1):null})),l()(a()(o),"_handleFetchTweet",(function(){var e=o.props,t=e.createLocalApiErrorHandler;(0,e.fetchTweetIfNeeded)(e.tweetId).catch(t(Y.a))})),l()(a()(o),"_handleMediaDetailZoomed",(function(e){o.setState({isZoomed:e,showControls:!e})})),l()(a()(o),"_handleMediaItemChanged",(function(e){var t=o.props,n=t.history,a=t.analytics,r=o._getIndex(),i=o._getMediaItems();if(e!==r){a.scribe({component:"gallery",element:r<e?"next":"prev",action:"click",data:{event_value:e+1}});var s=i&&i[e];n.replace({state:o._getLocationState(e),pathname:s&&s.expanded_url})}})),l()(a()(o),"_scribeImpression",(function(){var e=o.props,t=e.analytics,n=e.googleAnalyticsPageView,a=e.tweet;if(a){var r=se.a.getTweetItem(a);n(t.contextualScribeNamespace),t.scribe({action:"show",data:{items:[r]}})}})),o.state={showControls:!0,showDrawerOnNarrowScreen:!1,isZoomed:!1},o._touchSupported=ne(),o._historyTrackerEnabled=A.a.isTrue("responsive_web_history_tracker_enabled"),o}i()(t,e);var n=t.prototype;return n.componentDidMount=function(){this._handleFetchTweet(),this._scribeImpression()},n.componentDidUpdate=function(e){var t,n;this._possiblyRedirectToCanonical(),e.tweetId!==this.props.tweetId&&this._handleFetchTweet(),(null===(t=e.tweet)||void 0===t?void 0:t.id_str)!==(null===(n=this.props.tweet)||void 0===n?void 0:n.id_str)&&this._scribeImpression()},n.render=function(){return c.createElement(ie.a.Configure,{headerless:!0},this.context.isModal?this._renderMediaModalWithDrawer():this._renderMediaModal())},n._getCurrentMediaItem=function(){var e=this._getIndex(),t=this._getMediaItems();return t&&t[e]},n._shouldHideButtons=function(){var e=this.state,t=e.isZoomed,n=e.showControls;return t||!n},n._renderTopRightButton=function(e){var t=this.props.tweet,n=this.context.isModal,o=this._getCurrentMediaItem(),a=Object(N.b)(o),r=e&&this._shouldShowMediaModalDrawer(e);return n?c.createElement(pe.a,{accessibilityLabel:r?we:_e,dominantColor:a.rgb,icon:r?c.createElement(G.a,null):c.createElement(K.a,null),onClick:this._handleToggleDrawer(e),type:"onMedia"}):t&&!n?c.createElement(pe.a,{accessibilityLabel:ve,dominantColor:o?a.rgb:void 0,icon:c.createElement(Q.a,null),renderMenu:this._renderOverflowMenu,type:o?"onMedia":"invertedPrimary"}):void 0},n._renderFooter=function(){var e=this.props.tweet;return e?c.createElement(le.a,{actionSize:"large",activeColor:"white",color:"white",style:ye.actionsBar,tweet:e,withCount:!0}):void 0},t}(c.Component);l()(ge,"contextTypes",{isModal:d.bool});var ye=Z.a.create((function(e){return{actionsBar:{height:e.spaces.xxLarge,marginTop:0,maxWidth:"none",paddingHorizontal:e.spaces.xSmall},container:{flexDirection:"row",overflowX:"hidden",overflowY:"hidden",height:"100%",width:"100%",position:"relative"},neighbor:{flexGrow:1,flexShrink:1}}})),Ce=T(ge);t.default=Ce},zcjS:function(e,t,n){"use strict";n("IAdD"),t.__esModule=!0,t.default=void 0;var o=s(n("7DT3")),a=s(n("/uF9")),r=s(n("ERkP")),i=s(n("OkZJ"));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){return void 0===e&&(e={}),(0,o.default)("svg",Object.assign({},e,{style:[i.default.root,e.style,a.default.isRTL&&i.default.iconRtl],viewBox:"0 0 24 24"}),r.default.createElement("g",null,r.default.createElement("path",{d:"M4.656 12l8.72-8.72c.293-.293.293-.768 0-1.06s-.768-.294-1.06 0l-9.25 9.25c-.294.292-.294.767 0 1.06l9.25 9.25c.145.146.337.22.53.22s.383-.073.53-.22c.292-.293.292-.768 0-1.06L4.655 12z"}),r.default.createElement("path",{d:"M12.465 12l8.72-8.72c.293-.293.293-.768 0-1.06s-.768-.294-1.06 0l-9.25 9.25c-.294.292-.294.767 0 1.06l9.25 9.25c.145.146.337.22.53.22s.383-.073.53-.22c.292-.293.292-.768 0-1.06L12.464 12z"})))};l.metadata={height:24,width:24};var c=l;t.default=c},ziVO:function(e,t,n){"use strict";n("2G9S"),n("IAdD");var o=n("1Pcy"),a=n.n(o),r=n("W/Kd"),i=n.n(r),s=n("KEM+"),l=n.n(s),c=n("ERkP"),d=n("3xO4"),u=n.n(d),h={startX:0,startY:0},m=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,l()(a()(t),"_pullDistanceY",0),l()(a()(t),"_pullInfo",Object.assign({},h)),l()(a()(t),"_handleTouchStart",(function(e){t._pullInfo.startX=e.touches[0].clientX,t._pullInfo.startY=e.touches[0].clientY})),l()(a()(t),"_handleTouchMove",(function(e){if("number"==typeof t._pullInfo.startX&&"number"==typeof t._pullInfo.startY){var n=e.touches[0],o=n.clientX-t._pullInfo.startX,a=n.clientY-t._pullInfo.startY;Math.abs(o)>10||(e.preventDefault(),t._updatePullPosition(a))}})),l()(a()(t),"_handleTouchEnd",(function(e){Math.abs(t._pullDistanceY)>50?t._handleDismiss():t._resetPullInfo()})),l()(a()(t),"_updatePullPosition",(function(e){t._pullDistanceY=e})),l()(a()(t),"_handleDismiss",(function(){var e=t.props.onDismiss;e&&e(),t._resetPullInfo()})),l()(a()(t),"_resetPullInfo",(function(){t._updatePullPosition(0),t._pullInfo=Object.assign({},h)})),t}return i()(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.onDismiss,o=e.onLayout,a=e.style,r=!!n;return c.createElement(u.a,{onLayout:o,onTouchEnd:r?this._handleTouchEnd:void 0,onTouchMove:r?this._handleTouchMove:void 0,onTouchStart:r?this._handleTouchStart:void 0,style:a},t)},t}(c.Component);t.a=m}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/web_legacy/bundle.TweetMediaDetail.4d348cd4.js.map