(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{"3GUV":function(e,t,r){"use strict";r("Blm6");var n=r("W/Kd"),a=r.n(n),i=r("ERkP"),o=r("rHpw"),c=r("3xO4"),u=r.n(c),s=function(e){function t(){return e.apply(this,arguments)||this}a()(t,e);var r=t.prototype;return r.shouldComponentUpdate=function(){return!1},r.render=function(){return i.createElement(u.a,{style:l.root})},t}(i.Component),l=o.a.create((function(e){return{root:{height:5*parseInt(e.lineHeight,10)+"rem"}}}));t.a=s},"5UID":function(e,t,r){"use strict";var n=r("W/Kd"),a=r.n(n),i=r("ERkP"),o=r("3XMw"),c=r.n(o),u=r("rHpw"),s=(r("aWzz"),r("PARX")),l=r.n(s),h=r("3xO4"),d=r.n(h),f=c.a.e5b0063d,g=0,p=function(e){function t(){var t;return(t=e.call(this)||this)._listDomId="accessible-list-"+g,g+=1,t}return a()(t,e),t.prototype.render=function(){var e=this.props,t=e.children,r=e.title,n=f({title:r});return i.createElement(d.a,{accessibilityRole:"region","aria-labelledby":this._listDomId},i.createElement(l.a,{accessibilityRole:"heading","aria-level":1,nativeID:this._listDomId,style:u.a.visuallyHidden},r),i.createElement(d.a,{accessibilityLabel:n},t))},t}(i.Component);t.a=p},EP6G:function(e,t,r){"use strict";r("7xRU"),r("z84I"),r("7x/C"),r("DZ+c");var n=r("1Pcy"),a=r.n(n),i=r("W/Kd"),o=r.n(i),c=r("KEM+"),u=r.n(c),s=r("ERkP"),l=(r("tQbP"),r("IAdD"),r("RhWx")),h=r.n(l),d=r("zh9S"),f=r("ge3j"),g=r("AspN"),p=r("VnFT"),m=r("oEGd"),y=r("hqKg"),v=Object(y.createSelector)((function(e,t){var r=t.module,n=t.query;return r.selectInitialFetchStatus(e,n)}),(function(e,t){var r=t.module,n=t.query;return r.selectItems(e,n)}),(function(e,t){var r=t.module,n=t.query;return r.selectNextFetchStatus(e,n)}),(function(e,t,r){return{initialFetchStatus:e,items:Array.isArray(t)?t.map((function(e){return Object.assign({},e,{thumbnail_images:h()(e.thumbnail_images).sort((function(e,t){return t.height*t.width-e.height*e.width}))})})):void 0,nextFetchStatus:r}})),S=Object(m.d)(v,(function(e){var t,r=e.module,n=e.history;return{addExternalMediaUpload:g.a,addMediaToDM:(t=n.location.state,function(e,r,n){var a=t&&t.dmConversationId;return Object(p.a)(a,e,r,n)}),fetchInitialIfNeeded:r.fetchInitialIfNeeded,fetchNextIfNeeded:r.fetchNextIfNeeded,scribeAction:d.c,updateSingleComposerV2:f.w}})),b=r("v//M"),_=r("x5W0"),E=r("D4le"),w=r.n(E),x=r("cm6r"),C=r("rHpw"),I=function(e){function t(){return e.apply(this,arguments)||this}o()(t,e);var r=t.prototype;return r.render=function(){var e=this.props,t=e.backgroundColor,r=e.height,n=e.onClick,a=e.width;return s.createElement(x.a,{onPress:n,style:[P.imageContainer,O(t,r,a).background]},this._renderPreview())},r._renderPreview=function(){var e=this.props,t=e.altText,r=e.animatedMediaUrl,n=e.height,a=e.shouldAutoPlayGif,i=e.stillMediaUrl,o={height:n,width:e.width,uri:a?r:i};return s.createElement(w.a,{accessibilityLabel:t,source:o})},t}(s.Component),O=function(e,t,r){return C.a.create((function(n){return{background:{backgroundColor:e,height:t,width:r}}}))},P=C.a.create((function(e){return{imageContainer:{marginHorizontal:"1px",overflow:"hidden",flexShrink:1}}})),A=I,N=r("MLl7"),G=r("3XMw"),M=r.n(G),R=r("TEoO"),j=r("eyty"),F=r("7nmT"),K=r.n(F),k=r("3xO4"),T=r.n(k),q=(r("LW0h"),r("KOtZ"),function(e,t){var r=e.reduce((function(e,t){var r=t.original_image;return e+r.width/r.height}),0);return Math.ceil(t/r)});function D(e,t,r){return e.reduce((function(e,n,a){return e[e.length-1].push(Object.assign({},n,{index:a})),e[e.length-1].length>0&&q(e[e.length-1],r)<t&&e.push([]),e}),[[]]).filter((function(e){return e.length>0}))}var L=r("VPAj"),U=r("oQhu"),B=r("I7xG"),W=r("FIs5"),H=M.a.a66b7760,z=M.a.b719e223,Q=M.a.aed71818,X=function(e){return e.map((function(e){return e.id})).join("-")},V=Object(L.a)(null),J=[],Y=function(e){function t(t,r){var n;return n=e.call(this,t,r)||this,u()(a()(n),"_rootNode",null),u()(a()(n),"_render",(function(){var e=n.props,t=e.query,r=e.items,a=n.state.width,i=r?n._brickLayout(r,150,a):J;return a>0?s.createElement(R.a,{assumedItemHeight:150,cacheKey:"gifSearchCategory/"+t,footer:n._renderFooter(),identityFunction:X,items:i,noItemsRenderer:n._renderEmptyItem,onNearEnd:n._handleFetchNext,renderer:n._getRowRenderer()}):null})),u()(a()(n),"_getRowRenderer",Object(B.a)(a()(n),(function(e){return e.shouldAutoPlayGif}),(function(e){return function(t){var r=n.state.width,a=q(t,r),i=r-2*t.length-1,o=0;return s.createElement(T.a,{style:[Z.imageRow,{height:a}]},t.map((function(r,c){var u=r.thumbnail_images[0],l=a/u.height,h=c===t.length-1?i-o:Math.round(u.width*l),d=u.url,f=u.still_image_url;return o+=h,s.createElement(A,{altText:r.alt_text||H,animatedMediaUrl:d,backgroundColor:Object(_.a)(r.index),height:a,key:r.index,onClick:n._handleClickFactory(r),shouldAutoPlayGif:e,stillMediaUrl:f,width:h})})))}}))),u()(a()(n),"_handleClickFactory",(function(e){return function(){var t,r=n.props,a=r.addExternalMediaUpload,i=r.addMediaToDM,o=r.gifSearchKey,c=r.fromSearch,u=r.history,s=r.scribeAction,l=r.updateSingleComposerV2,h=e.alt_text,d=e.found_media_origin,f=e.provider,g=e.original_image.url,p=e.preview_image,m=p.width,y=p.height,v=p.url,S=e.thumbnail_images[0],b=e.url,_=a({mediaCategory:o===N.a.Composition?j.b.TweetGif:j.b.DMGif,mediaType:"image/gif",previewMediaType:"video/mp4",previewUrl:v,sourceUrl:g,stillMediaUrl:S.still_image_url,width:m,height:y}).map((function(e){return e.id})),E={found_media_origin:d,provider:f,url:b},w=h?((t={})[_[0].toString()]={defaultAltText:h},t):{};o===N.a.Composition?l({updates:{mediaIds:_,gifMetadata:E,mediaMetadata:w}}):o===N.a.DMComposition&&i(_,E,w),s({page:o,section:"gif_search",element:"category",action:c?"search":"select"}),u.go(-2)}})),u()(a()(n),"_renderEmptyItem",(function(){return s.createElement(W.a,{header:z,message:Q})})),u()(a()(n),"_renderFooter",Object(B.a)(a()(n),(function(e){return e.nextFetchStatus}),(function(e){return s.createElement(b.a,{fetchStatus:e,onRequestRetry:n._handleFetchNext,render:V})}))),u()(a()(n),"_handleFetch",(function(e){void 0===e&&(e=n.props.query),(0,n.props.fetchInitialIfNeeded)({query:e})})),u()(a()(n),"_handleFetchNext",(function(){var e=n.props,t=e.query;(0,e.fetchNextIfNeeded)({query:t})})),u()(a()(n),"_handleResize",(function(){n._rootNode&&n._rootNode instanceof Element&&n.setState({width:n._rootNode.clientWidth})})),u()(a()(n),"_brickLayout",Object(U.a)(D)),u()(a()(n),"_setRootNode",(function(e){n._rootNode=K.a.findDOMNode(e)})),n.state={width:0},n}o()(t,e);var r=t.prototype;return r.UNSAFE_componentWillMount=function(){this._handleFetch()},r.UNSAFE_componentWillReceiveProps=function(e){this.props.query!==e.query&&this._handleFetch(e.query)},r.componentDidMount=function(){window.addEventListener("resize",this._handleResize),this._handleResize()},r.componentWillUnmount=function(){window.removeEventListener("resize",this._handleResize)},r.render=function(){var e=this.props.initialFetchStatus;return s.createElement("div",{ref:this._setRootNode},s.createElement(b.a,{fetchStatus:e,onRequestRetry:this._handleFetch,ref:this._setRootNode,render:this._render}))},t}(s.Component);u()(Y,"defaultProps",{fromSearch:!1});var Z=C.a.create((function(e){return{emptyItem:{display:"inline-block",paddingHorizontal:e.spaces.xSmall,paddingVertical:e.spaces.large},imageRow:{flexDirection:"row",marginBottom:2}}}));t.a=S(Y)},TEoO:function(e,t,r){"use strict";var n=r("LdEA"),a=r.n(n),i=r("ERkP"),o=r("5UID"),c=r("3GUV"),u=r("iBK2"),s=i.createElement(c.a,null),l=function(e){var t=e.accessibilityTitle,r=a()(e,["accessibilityTitle"]),n=i.createElement(u.b,r);return t?i.createElement(o.a,{title:t},n):n};l.defaultProps={footer:s},t.a=l},XYn1:function(e,t,r){"use strict";r.r(t),r.d(t,"GifSearchSearchScreen",(function(){return z}));var n=r("ERkP"),a=(r("2G9S"),r("z84I"),r("IAdD"),r("KqXw"),r("MvUL"),r("1Pcy")),i=r.n(a),o=r("W/Kd"),c=r.n(o),u=r("KEM+"),s=r.n(u),l=r("zh9S"),h=r("pX0s"),d=r("lnti"),f=r("oEGd"),g=r("hqKg"),p=h.a,m=Object(g.createSelector)((function(e){return p.selectItems(e)}),(function(e){return p.selectInitialFetchStatus(e)}),(function(e,t){return{categories:e&&Object(d.a)(e.map((function(e){return e.display_name?e:void 0}))),initialFetchStatus:t}})),y={fetchInitialIfNeeded:p.fetchInitialIfNeeded,fetchNextIfNeeded:p.fetchNextIfNeeded,scribeAction:l.c},v=Object(f.g)(m,y),S=r("7JQg"),b=r("v//M"),_=r("jHSc"),E=r("x5W0"),w=r("MLl7"),x=r("ij+d"),C=r("3XMw"),I=r.n(C),O=r("QK5w"),P=r("cm6r"),A=r("t62R"),N=r("rHpw"),G=r("D4le"),M=r.n(G),R=r("3xO4"),j=r.n(R),F=I.a.c6f5ac52,K=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,s()(i()(t),"_handleClickFactory",(function(e){return function(){var r=t.props,n=r.gifSearchKey,a=r.history,i=a.location.state&&a.location.state.dmConversationId;a.push({pathname:x.GifSearchPaths.category+"/"+e.id,state:{category:e,gifSearchKey:n,dmConversationId:i}})}})),t}return c()(t,e),t.prototype.render=function(){var e=this.props,t=e.category,r=e.index,a=e.withLeftMargin,i=t.display_name,o=t.original_image.still_image_url;return n.createElement(P.a,{onPress:this._handleClickFactory(t),style:[T.category,a&&T.leftMargin]},n.createElement(M.a,{source:o,style:[T.categoryImage,{backgroundColor:Object(E.a)(r)}]}),n.createElement(j.a,{style:T.categoryNameContainer},n.createElement(A.c,{color:"white",size:"large",weight:"bold"},i)))},t}(n.PureComponent),k=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,s()(i()(t),"_render",(function(){var e=t.props,r=e.categories,a=e.gifSearchKey,i=e.history,o=[];if(r)for(var c=0;c<r.length;c+=2)o.push([r[c],r[c+1]]);return n.createElement(j.a,null,n.Children.toArray(o.map((function(e,t){var r=e[0],o=e[1];return n.createElement(j.a,{style:[T.row,0===t&&T.firstRow]},n.createElement(K,{category:r,gifSearchKey:a,history:i,index:2*t,withLeftMargin:!1}),o?n.createElement(K,{category:o,gifSearchKey:a,history:i,index:2*t+1,withLeftMargin:!0}):null)}))))})),s()(i()(t),"_handleBackClick",(function(){var e=t.props,r=e.history,n=e.location,a=e.scribeAction,i=e.scribeNamespace,o=Object(O.a)({},{location:n});n&&n.state&&n.state.searchFocused||a(Object.assign({},i,{action:"cancel"})),o?r.goBack():r.replace("/")})),s()(i()(t),"_handleFetch",(function(){(0,t.props.fetchInitialIfNeeded)()})),t}c()(t,e);var r=t.prototype;return r.UNSAFE_componentWillMount=function(){this._handleFetch()},r.render=function(){var e=this.props,t=e.initialFetchStatus,r=e.history,a=e.location,i=e.searchBox;return n.createElement(_.b,{documentTitle:F,history:r,location:a,middleControl:i,onBackClick:this._handleBackClick},n.createElement(b.a,{fetchStatus:t,onRequestRetry:this._handleFetch,render:this._render}))},t}(n.Component),T=N.a.create((function(e){return{row:{flexDirection:"row",marginTop:e.spaces.xxSmall},firstRow:{marginTop:0},category:{height:"10rem",flexGrow:1},leftMargin:{marginLeft:e.spaces.xxSmall},categoryImage:{flexGrow:1},categoryNameContainer:{position:"absolute",bottom:0,width:"100%",padding:e.spaces.xxSmall,backgroundImage:"linear-gradient(to top, rgba(0,0,0,0.75), rgba(0,0,0,0))"}}})),q=Object(S.c)({element:"category"})(v(k)),D=r("hiCj"),L=r("VAZu"),U=r("EP6G"),B=I.a.ab468378,W=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,s()(i()(t),"state",{shouldAutoPlayGifOverride:null}),s()(i()(t),"_handleToggleChange",(function(e){t.setState({shouldAutoPlayGifOverride:e})})),s()(i()(t),"_renderHeader",(function(){var e=t.props,r=e.history,a=e.location,i=e.searchBox;return n.createElement(L.a,{history:r,location:a,middleControl:i})})),t}return c()(t,e),t.prototype.render=function(){var e=this.props,t=e.gifSearchKey,r=e.history,a=e.location,i=e.query,o=e.searchBox,c=e.shouldAutoPlayGif,u=this.state.shouldAutoPlayGifOverride,s=Object(w.c)(u,c);return n.createElement(_.b,{backButtonType:"back",documentTitle:B({query:i}),history:r,location:a,middleControl:o},n.createElement(D.a,{location:a,onToggleChange:this._handleToggleChange,shouldAutoPlayGif:s}),n.createElement(U.a,{fromSearch:!0,gifSearchKey:t,history:r,module:h.c,query:i,shouldAutoPlayGif:s}))},t}(n.Component),H=Object(S.c)({element:"gallery"})(W),z=function(e){var t=e.gifSearchKey,r=e.history,a=e.location,i=e.searchBox,o=e.shouldAutoPlayGif,c=a.state&&a.state.query;return c?n.createElement(H,{gifSearchKey:t,history:r,location:a,query:c,searchBox:i,shouldAutoPlayGif:o}):n.createElement(q,{gifSearchKey:t,history:r,location:a,searchBox:i})};t.default=z},hiCj:function(e,t,r){"use strict";r("2G9S");var n=r("1Pcy"),a=r.n(n),i=r("W/Kd"),o=r.n(i),c=r("KEM+"),u=r.n(c),s=r("ERkP"),l=r("P1r1"),h=r("oEGd"),d=r("0KEI"),f={createLocalApiErrorHandler:Object(d.d)("FOUND_MEDIA_AUTOPLAY_TOGGLE"),updateSettings:l.E},g=Object(h.g)((function(){return{}}),f),p=r("3XMw"),m=r.n(p),y=r("fHOo"),v=r("3xO4"),S=r.n(v),b=r("t62R"),_=r("CK8+"),E=r("rHpw"),w=(r("aWzz"),m.a.j7fc4f9b),x=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t=e.call.apply(e,[this].concat(n))||this,u()(a()(t),"_handleSwitchChanged",(function(e){var r=t.props,n=r.createLocalApiErrorHandler,a=r.onToggleChange;(0,r.updateSettings)({shouldAutoPlayGif:e}).catch(n({showToast:!0})),a(e)})),t}return o()(t,e),t.prototype.render=function(){var e=this.props,t=e.location,r=e.shouldAutoPlayGif,n=t.state&&t.state.query,a=t.state&&t.state.category?t.state.category.display_name:"";return Object(y.a)()&&(n||a)?s.createElement(S.a,{style:C.root},s.createElement(b.c,{color:"deepGray"},w),s.createElement(_.a,{accessibilityLabel:w,onValueChange:this._handleSwitchChanged,value:r})):null},t}(s.Component),C=E.a.create((function(e){return{root:{flexDirection:"row",justifyContent:"space-between",margin:e.spaces.xSmall}}}));t.a=g(x)},"ij+d":function(e,t,r){"use strict";r.r(t),r.d(t,"GifSearchPaths",(function(){return q})),r.d(t,"GifSearchScreen",(function(){return D}));r("7x/C"),r("JtPf"),r("KqXw"),r("MvUL"),r("3voH");var n=r("1Pcy"),a=r.n(n),i=r("W/Kd"),o=r.n(i),c=r("KEM+"),u=r.n(c),s=r("ERkP"),l=r("38/B"),h=r("oEGd"),d=r("hqKg"),f=r("H9MA"),g=r("zHh/"),p=r("P1r1"),m=Object(d.createSelector)(p.f,p.j,f.d,(function(e,t,r){return{isDataSaverEnabled:t,shouldAutoPlayGif:(e.shouldAutoPlayGif||Object(g.a)(r))&&!l.a.reducedMotionEnabled}})),y=Object(h.c)(m),v=r("Y6L+"),S=r("3XMw"),b=r.n(S),_=r("Gzkc"),E=r.n(_),w=r("MLl7"),x=r("/de5"),C=r("wytG"),I=r("7JQg"),O=r("3xO4"),P=r.n(O),A=r("6OUF"),N=r("/yvb"),G=r("rHpw"),M=r("oQhu"),R=r("VY6S"),j=r("zCf4"),F=b.a.a50ba821,K=b.a.a9ae1e78,k=Object(C.a)((function(){return Promise.resolve().then(r.bind(null,"XYn1"))})),T=Object(C.a)((function(){return Promise.resolve().then(r.bind(null,"k5pS"))})),q={category:"/i/foundmedia/category",search:"/i/foundmedia/search"},D=function(e){function t(t){var r;return r=e.call(this,t)||this,u()(a()(r),"state",{searchDisabled:!0}),u()(a()(r),"_gifSearchKey",r._getGifSearchKey()),u()(a()(r),"_getScribeNamespace",Object(M.a)((function(e){return{page:e,section:"gif_search"}}))),u()(a()(r),"_setTextInputRef",(function(e){r._textInputRef=e})),u()(a()(r),"_handleChange",(function(e){var t=e.currentTarget.value;r._shouldRenderResultsOnChange?r._goToQueryDebounced(t):r.setState({searchDisabled:!t})})),u()(a()(r),"_handleClear",(function(){var e=r.props,t=e.history,n=e.isDataSaverEnabled,a=e.location,i=a.pathname.startsWith(q.category),o=a.pathname===q.search&&a.state&&a.state.query;!n&&(i||o)?t.goBack():n&&r.setState({searchDisabled:!0})})),u()(a()(r),"_handleSubmit",(function(){var e=r._textInputRef&&r._textInputRef.getValue();r._goToQuery(e)})),u()(a()(r),"_handleSearch",(function(e){var t=e.currentTarget.value;r._goToQuery(t)})),u()(a()(r),"_goToQuery",(function(e){var t=r.props,n=t.history,a=t.isDataSaverEnabled,i=t.location,o={};o.pathname=q.search;var c=i.state&&i.state.query,u=i.pathname===q.search&&!c,s=i.pathname.startsWith(q.category)||i.pathname===q.search&&c,l=!a&&s,h=i.state&&i.state.dmConversationId;e?(o.state={dmConversationId:h,query:e},u?n.push(o):n.replace(o)):l&&n.goBack()})),r._goToQueryDebounced=Object(R.a)((function(){var e;return(e=r)._goToQuery.apply(e,arguments)}),500),r._shouldRenderResultsOnChange=!r.props.isDataSaverEnabled,r}o()(t,e);var r=t.prototype;return r.UNSAFE_componentWillMount=function(){var e=this.props.history;this._gifSearchKey||e.replace("/")},r.render=function(){var e=this.props,t=e.history,r=e.location,n=e.shouldAutoPlayGif,a={gifSearchKey:this._gifSearchKey,history:t,location:r,searchBox:this._renderSearchBox(),shouldAutoPlayGif:n},i=this._gifSearchKey?this._gifSearchKey:void 0;return this._gifSearchKey?s.createElement(I.b,{namespace:this._getScribeNamespace(i)},s.createElement(j.d,null,s.createElement(j.b,{exact:!0,path:q.search},s.createElement(k,a)),s.createElement(j.b,{exact:!0,path:q.category+"/"+v.h},s.createElement(T,a)),s.createElement(j.b,{component:x.a}))):null},r._getGifSearchKey=function(){var e=this.props.location.state||{},t=e.gifSearchKey,r=e.gifSearchKeySource;return t||r&&Object(w.b)(r)&&r},r._getQueryOrCategory=function(){var e=this.props.location,t=e.state&&e.state.query,r=e.state&&e.state.category?e.state.category.display_name:"";return t||r},r._renderSearchBox=function(){var e=this.state.searchDisabled,t=this._getQueryOrCategory();return s.createElement(P.a,{style:L.searchContainer},s.createElement(A.a,{Icon:E.a,autoFocus:!0,defaultValue:t,key:t,onChange:this._handleChange,onClear:this._handleClear,onSubmitEditing:this._handleSearch,placeholder:F,ref:this._setTextInputRef,style:L.searchInput,withClearButton:!0}),this._shouldRenderResultsOnChange?null:s.createElement(N.a,{disabled:e,onPress:this._handleSubmit,size:"normalCompact",style:L.searchButton,type:"primary"},K))},t}(s.Component),L=G.a.create((function(e){return{searchContainer:{alignItems:"center",flex:1,flexDirection:"row",marginVertical:e.spaces.xSmall},searchInput:{height:"100%"},searchButton:{marginStart:e.spaces.xSmall}}}));t.default=y(D)},k5pS:function(e,t,r){"use strict";r.r(t),r.d(t,"GifSearchCategory",(function(){return S}));r("2G9S");var n=r("1Pcy"),a=r.n(n),i=r("W/Kd"),o=r.n(i),c=r("KEM+"),u=r.n(c),s=r("ERkP"),l=r("hiCj"),h=r("pX0s"),d=r("7JQg"),f=r("jHSc"),g=r("EP6G"),p=r("3XMw"),m=r.n(p),y=r("MLl7"),v=m.a.f5ff0d6f,S=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t=e.call.apply(e,[this].concat(n))||this,u()(a()(t),"state",{shouldAutoPlayGifOverride:null}),u()(a()(t),"_handleToggleChange",(function(e){t.setState({shouldAutoPlayGifOverride:e})})),t}return o()(t,e),t.prototype.render=function(){var e=this.props,t=e.gifSearchKey,r=e.history,n=e.location,a=e.searchBox,i=e.shouldAutoPlayGif,o=n.state&&n.state.category,c=o&&o.display_name,u=this.state.shouldAutoPlayGifOverride,d=Object(y.c)(u,i);return s.createElement(f.b,{backButtonType:"back",documentTitle:v({category:c}),history:r,location:n,middleControl:a},s.createElement(l.a,{location:n,onToggleChange:this._handleToggleChange,shouldAutoPlayGif:d}),!!o&&s.createElement(g.a,{gifSearchKey:t,history:r,module:h.b,query:o.id,shouldAutoPlayGif:d}))},t}(s.Component);t.default=Object(d.c)({element:"gallery"})(S)},pX0s:function(e,t,r){"use strict";r.d(t,"a",(function(){return m})),r.d(t,"b",(function(){return y})),r.d(t,"c",(function(){return v}));r("2G9S"),r("LW0h"),r("IAdD"),r("KqXw"),r("LJOr");var n,a=r("RhWx"),i=r.n(a),o=r("9OUN"),c=(r("7x/C"),r("JtPf"),r("LdEA")),u=r.n(c),s=r("oEOe"),l=r("kGix"),h={},d={cursor:{},items:[],initialFetchStatus:l.a.NONE,nextFetchStatus:l.a.NONE},f=function(e){var t=e.defaultQuery,r=e.getApiMethod,n=e.getParams,a=e.mergeNewItems,i=e.localNamespace,o=s.a("rweb/gifSearch/"+i,"FETCH"),c=function(e,t,r){var n,a,i=r.fetchStatus,o=u()(r,["fetchStatus"]),c=e[t]||{},s=(c.cursor||{}).next?"nextFetchStatus":"initialFetchStatus";return Object.assign({},e,((a={})[t]=Object.assign({},d,c,o,((n={})[s]=i,n)),a))},f=function(e){var t=e.cursor,a=e.query;return function(e,i,c){var u=c.api;return s.b(e,{request:r(u),params:n(t,a)})({actionTypes:o,meta:{query:a}})}},g=function(e,r){return void 0===r&&(r=t),(e.gifSearch[i]||{})[r]||{}};return{actionTypes:o,fetchInitialIfNeeded:function(e){var r=(void 0===e?{}:e).query,n=void 0===r?t:r;return function(e,t,r){r.api;var a=g(t(),n);return a.initialFetchStatus===l.a.LOADING||a.items?Promise.resolve():e(f({query:n}))}},fetchNextIfNeeded:function(e){var r=(void 0===e?{}:e).query,n=void 0===r?t:r;return function(e,t,r){r.api;var a=g(t(),n),i=a.cursor,o=void 0===i?{}:i;return a.nextFetchStatus!==l.a.LOADING&&o.next?e(f({query:n,cursor:o.next})):Promise.resolve()}},reducer:function(e,t){switch(void 0===e&&(e=h),t.type){case o.REQUEST:var r=t.meta.query;return c(e,r,{fetchStatus:l.a.LOADING});case o.FAILURE:var n=t.meta.query;return c(e,n,{fetchStatus:l.a.FAILED});case o.SUCCESS:var i=t.payload.cursor,u=t.meta.query,s=(e[u]||{}).items||[];return c(e,u,{cursor:i,fetchStatus:l.a.LOADED,items:a(s,t.payload)});default:return e}},selectInitialFetchStatus:function(e,t){return g(e,t).initialFetchStatus||l.a.NONE},selectItems:function(e,t){return g(e,t).items},selectNextFetchStatus:function(e,t){return g(e,t).nextFetchStatus||l.a.NONE},selectQueryState:g}},g=r("Ssj5"),p=function(e){return e.filter((function(e){var t=e.original_image,r=(t=void 0===t?{}:t).height,n=t.width;return r>0&&n>0}))},m=f({defaultQuery:"categories",getApiMethod:function(e){return e.GifSearch.categories},getParams:function(e){return e?{cursor:e}:{}},mergeNewItems:function(e,t){return[].concat(i()(e),i()(t.data.groups))},localNamespace:"categories"}),y=f({getApiMethod:function(e){return e.GifSearch.category},getParams:function(e,t){return Object.assign({category:t},e?{cursor:e}:{})},mergeNewItems:function(e,t){return[].concat(i()(e),i()(p(t.data.items||[])))},localNamespace:"category"}),v=f({getApiMethod:function(e){return e.GifSearch.search},getParams:function(e,t){return Object.assign({q:t},e?{cursor:e}:{})},mergeNewItems:function(e,t){return[].concat(i()(e),i()(p(t.data.items||[])))},localNamespace:"search"}),S=Object(o.c)({categories:m.reducer,category:y.reducer,search:v.reducer});g.a.register(((n={}).gifSearch=S,n))},x5W0:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r("rHpw").a.theme.colors,a=[n.blue,n.green,n.orange,n.purple,n.red,n.yellow],i=function(e){return void 0===e&&(e=Math.floor(Math.random()*a.length+1)),a[e%a.length]}}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/web_legacy/bundle.GifSearch.dc067f74.js.map