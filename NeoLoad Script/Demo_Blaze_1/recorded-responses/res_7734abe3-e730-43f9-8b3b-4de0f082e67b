(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{gpRP:function(e,t,n){"use strict";n("IAdD"),t.__esModule=!0,t.default=void 0;var r=d(n("7DT3")),o=d(n("/uF9")),a=d(n("ERkP")),i=d(n("OkZJ"));function d(e){return e&&e.__esModule?e:{default:e}}var c=function(e){return void 0===e&&(e={}),(0,r.default)("svg",Object.assign({},e,{style:[i.default.root,e.style,o.default.isRTL&&i.default.iconRtl],viewBox:"0 0 24 24"}),a.default.createElement("g",null,a.default.createElement("path",{d:"M21.185 11.47l-9.25-9.25c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06l8.72 8.72-8.72 8.72c-.294.294-.294.77 0 1.062.145.146.337.22.53.22s.383-.073.53-.22l9.25-9.25c.293-.295.293-.77 0-1.062z"}),a.default.createElement("path",{d:"M13.376 11.47l-9.25-9.25c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06l8.72 8.72-8.72 8.72c-.294.294-.294.77 0 1.062.146.145.337.218.53.218s.384-.073.53-.22l9.25-9.25c.293-.293.293-.767 0-1.06z"})))};c.metadata={height:24,width:24};var s=c;t.default=s},rrZY:function(e,t,n){"use strict";var r=n("ERkP"),o=r.createContext(!1);t.a=o},u1Qz:function(e,t,n){"use strict";n.r(t),n.d(t,"TweetMediaDetailScreen",(function(){return ve}));n("IAdD"),n("KqXw"),n("MvUL");var r=n("1Pcy"),o=n.n(r),a=n("W/Kd"),i=n.n(a),d=n("KEM+"),c=n.n(d),s=n("ERkP"),l=n("aWzz"),u=(n("Blm6"),n("WNMA"),n("zh9S")),h=n("rxPX"),p=n("0KEI"),w=n("H9MA"),m=n("XOJV"),f=n("P1r1"),_=function(e,t){return t.match.params.screenName},v=function(e,t){return t.match.params.statusId},g=function(e,t){var n=t.match.params.index;return parseInt(n,10)-1},M=function(e,t){return m.a.selectFetchStatus(e,v(0,t))},b=function(e,t){return e.location&&e.location.state&&e.location.state[t]},I=function(e,t){return b(t,"promotedContent")},T=function(e,t){return b(t,"socialContext")},x=function(e,t){return b(t,"contextTweetId")},C=function(e,t){var n=v(0,t),r=m.a.select(e,n);return r&&r.conversation_id_str||void 0},E=Object(h.a)().propsFromState((function(){return{fetchStatus:M,index:g,screenName:_,tweetId:v,tweet:m.a.createHydratedTweetSelector(v),promotedContent:I,dataSaver:w.c,socialContext:T,contextTweetId:x,rootTweet:m.a.createHydratedTweetSelector(C),conversationTreeEnabled:f.h,showTweetMediaDetailDrawer:f.v}})).propsFromActions((function(){return{createLocalApiErrorHandler:Object(p.d)("TWEET_MEDIA_DETAIL_SCREEN"),fetchTweetIfNeeded:m.a.fetchOneIfNeeded,googleAnalyticsPageView:u.a,updateSettings:f.E}})).withAnalytics({page:"tweet",section:"media"}),y=(n("2G9S"),n("uFXj"),n("ymux")),S=n("rkhm"),D=n("ZUOq"),k=D.a.columnWidths.secondary.normal,O=D.a.columnWidths.primary,P=n("AUxQ"),R=n("rrZY"),A=n("yw4N"),L=n("I7xG"),N=n("rHpw"),j=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,c()(o()(t),"_getApiErrorHandlerMap",Object(L.a)(o()(t),(function(e){return e.screenName}),(function(e){return Object(S.a)(e)}))),c()(o()(t),"_getModule",Object(L.a)(o()(t),(function(e){return e.tweetId}),(function(e){return e.conversationTreeEnabled}),(function(e,t){return Object(y.a)({focalTweetId:e,conversationTreeEnabled:t})}))),t}return i()(t,e),t.prototype.render=function(){var e=this.props,t=e.contextTweetId,n=e.conversationTreeEnabled,r=e.location,o=e.tweet,a=e.tweetId,i=e.promotedContent,d=e.rootTweet,c=e.socialContext,l={selectedTweetId:a};return s.createElement(A.a,{"aria-expanded":"true",style:B.root},s.createElement(R.a.Provider,{value:!0},s.createElement(P.a,{apiErrorHandlerMap:this._getApiErrorHandlerMap(),contextTweetId:t,conversationTreeEnabled:n,focalTweet:o,focalTweetId:a,location:r,module:this._getModule(),promotedContent:i,rootTweet:d,selectedTweet:l,socialContext:c,withFocalTweetMedia:!1})))},t}(s.Component),B=N.a.create((function(e){return{root:{backgroundColor:e.colors.cellBackground,overflow:"auto",width:k,borderLeftWidth:e.borderWidths.small,borderColor:e.colors.borderColor,borderStyle:"solid"}}})),F=j,H=n("wrlS"),W=n("v//M"),z=n("W5XZ"),Z=n("RCZO"),X=n("3XMw"),J=n.n(X),U=n("zcjS"),q=n.n(U),K=n("gpRP"),V=n.n(K),Y=n("/aF9"),G=n.n(Y),Q=(n("5BYb"),n("6/RC")),$={};var ee=["touchend","touchmove","touchstart"],te=function(){return Q.canUseDOM&&ee.some((function(e){return!!function(e,t){if(void 0!==$[e])return $[e];var n=document.createElement(t||"div"),r="on"+e,o=r in n;return o||(n.setAttribute(r,"return;"),o="function"==typeof n[r]),$[e]=o,o}(e)}))},ne=n("2doW"),re=n("UPvq"),oe=n("VTxf"),ae=n("wiP2"),ie=n("Rp9C"),de=n("xXop"),ce=n("lklz"),se=n("3xO4"),le=n.n(se),ue=n("cHvH"),he=n("mjJ+"),pe=n("/yvb"),we=J.a.d132269b,me=J.a.dd657211,fe=J.a.h63a5c3b,_e=J.a.f20b040d,ve=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,c()(o()(r),"_renderMediaModal",(function(e){var t=r.props.fetchStatus,n=r._shouldHideButtons(),o=r._getCurrentMediaItem(),a=Object(Z.b)(o),i=r._touchSupported&&r._isCurrentMediaItemPhoto();return s.createElement(re.a,{backgroundColor:a,footerButtons:r._renderFooter(),hideButtons:n,mediaItem:o,onCloseButtonPress:r._handleClose,overlayFooter:i,topRightButton:r._renderTopRightButton(e)},s.createElement(W.a,{accessibilityLabel:we,fetchStatus:t,onRequestRetry:r._handleFetchTweet,render:r._renderContent}))})),c()(o()(r),"_renderMediaModalWithDrawer",(function(){var e=r.props,t=e.contextTweetId,n=e.location,o=e.tweetId,a=e.tweet,i=e.promotedContent,d=e.rootTweet,c=e.socialContext,l=e.conversationTreeEnabled,u=e.screenName;return s.createElement(ue.a,null,(function(e){var h=e.windowWidth;return s.createElement(le.a,{style:ge.container},s.createElement(le.a,{style:ge.neighbor},r._renderMediaModal(h)),r._shouldShowMediaModalDrawer(h)?s.createElement(F,{contextTweetId:t,conversationTreeEnabled:l,location:n,promotedContent:i,rootTweet:d,screenName:u,socialContext:c,tweet:a,tweetId:o}):null)}))})),c()(o()(r),"_shouldIgnoreShowDrawerSetting",(function(e){return e-k<O})),c()(o()(r),"_shouldShowMediaModalDrawer",(function(e){var t=r.props.showTweetMediaDetailDrawer,n=r.state.showDrawerOnNarrowScreen;return r._shouldIgnoreShowDrawerSetting(e)?n:t})),c()(o()(r),"_handleToggleDrawer",(function(e){return function(){var t=r.props,n=t.showTweetMediaDetailDrawer,o=t.updateSettings,a=t.analytics,i=r.state.showDrawerOnNarrowScreen;e&&r._shouldIgnoreShowDrawerSetting(e)?(a.scribe({component:"conversation_drawer",action:i?"collapse":"expand"}),r.setState({showDrawerOnNarrowScreen:!i})):(a.scribe({component:"conversation_drawer",action:n?"collapse":"expand"}),o({showTweetMediaDetailDrawer:!n}))}})),c()(o()(r),"_getPermalink",(function(){var e=r.props.tweet;return e&&e.user?"/"+e.user.screen_name+"/status/"+e.id_str:"/"})),c()(o()(r),"_renderOverflowMenu",(function(e){return s.createElement(he.a,{isFixed:!0,items:[{link:r._getPermalink(),text:me}],onCloseRequested:e})})),c()(o()(r),"_getExtendedMedia",(function(){var e=r.props.location.state;if(e){var t=e.mediaItems;return t&&"index"in t&&"items"in t?t:void 0}})),c()(o()(r),"_getIndex",(function(){var e=r._getExtendedMedia();return e?e.index:r.props.index})),c()(o()(r),"_getMediaItems",(function(){var e=r._getExtendedMedia();if(e)return e.items;var t=r.props.tweet;return t?t.extended_entities&&t.extended_entities.media||t.card&&t.card.media:void 0})),c()(o()(r),"_getLocationState",(function(e){var t=r._getExtendedMedia(),n=r.props.location;return t?Object.assign({},n.state,{mediaItems:Object.assign({},t,{index:e})}):n.state})),c()(o()(r),"_isCurrentMediaItemPhoto",(function(){var e=r._getIndex(),t=r._getMediaItems();if(!t)return!1;var n=t[e];return n&&"photo"===n.type})),c()(o()(r),"_handleMediaItemTapped",(function(){r._touchSupported&&r.setState((function(e){return{showControls:!e.showControls}}))})),c()(o()(r),"_renderContent",(function(){var e=r.props,t=e.dataSaver,n=e.promotedContent,o=e.tweet,a=r._getIndex(),i=r._getMediaItems();if(!i)return s.createElement(oe.a,null);var d=i[a],c=Object(Z.b)(d).rgb;return s.createElement(ne.a,{dataSaver:t,dominantColor:c,mediaIndex:a,mediaItems:i,onDismiss:r._handleClose,onMediaDetailZoomed:r._handleMediaDetailZoomed,onMediaItemChanged:r._handleMediaItemChanged,onTap:r._handleMediaItemTapped,promotedContent:n,videoId:1===i.length&&o?ce.b.forTweet(o.id_str):void 0})})),c()(o()(r),"_handleClose",(function(){var e=r.props,t=e.history,n=e.location,o=r._getPermalink();r._historyTrackerEnabled?t.goBackToNonModalRoute({fallbackPath:o,location:n}):t.goBack({backLocation:o})})),c()(o()(r),"_getPermalink",(function(){var e=r.props.tweet;return e&&e.user?"/"+e.user.screen_name+"/status/"+e.id_str:"/"})),c()(o()(r),"_possiblyRedirectToCanonical",(function(){var e=r.props,t=e.history,n=e.screenName,o=e.tweet;if(o&&o.user&&n.toLowerCase()!==o.user.screen_name.toLowerCase()){var a=r._getCanonicalPath();a&&t.replace(a)}})),c()(o()(r),"_getCanonicalPath",(function(){var e=r.props,t=e.index,n=e.tweet;return n&&n.user?"/"+n.user.screen_name+"/status/"+n.id_str+"/photo/"+(t+1):null})),c()(o()(r),"_handleFetchTweet",(function(){var e=r.props,t=e.createLocalApiErrorHandler;(0,e.fetchTweetIfNeeded)(e.tweetId).catch(t(z.a))})),c()(o()(r),"_handleMediaDetailZoomed",(function(e){r.setState({isZoomed:e,showControls:!e})})),c()(o()(r),"_handleMediaItemChanged",(function(e){var t=r.props,n=t.history,o=t.analytics,a=r._getIndex(),i=r._getMediaItems();if(e!==a){o.scribe({component:"gallery",element:a<e?"next":"prev",action:"click",data:{event_value:e+1}});var d=i&&i[e];n.replace({state:r._getLocationState(e),pathname:d&&d.expanded_url})}})),c()(o()(r),"_scribeImpression",(function(){var e=r.props,t=e.analytics,n=e.googleAnalyticsPageView,o=e.tweet;if(o){var a=ie.a.getTweetItem(o);n(t.contextualScribeNamespace),t.scribe({action:"show",data:{items:[a]}})}})),r.state={showControls:!0,showDrawerOnNarrowScreen:!1,isZoomed:!1},r._touchSupported=te(),r._historyTrackerEnabled=H.a.isTrue("responsive_web_history_tracker_enabled"),r}i()(t,e);var n=t.prototype;return n.componentDidMount=function(){this._handleFetchTweet(),this._scribeImpression()},n.componentDidUpdate=function(e){var t,n;this._possiblyRedirectToCanonical(),e.tweetId!==this.props.tweetId&&this._handleFetchTweet(),(null===(t=e.tweet)||void 0===t?void 0:t.id_str)!==(null===(n=this.props.tweet)||void 0===n?void 0:n.id_str)&&this._scribeImpression()},n.render=function(){return s.createElement(ae.a.Configure,{headerless:!0},this.context.isModal?this._renderMediaModalWithDrawer():this._renderMediaModal())},n._getCurrentMediaItem=function(){var e=this._getIndex(),t=this._getMediaItems();return t&&t[e]},n._shouldHideButtons=function(){var e=this.state,t=e.isZoomed,n=e.showControls;return t||!n},n._renderTopRightButton=function(e){var t=this.props.tweet,n=this.context.isModal,r=this._getCurrentMediaItem(),o=Object(Z.b)(r),a=e&&this._shouldShowMediaModalDrawer(e);return n?s.createElement(pe.a,{accessibilityLabel:a?_e:me,dominantColor:o.rgb,icon:a?s.createElement(V.a,null):s.createElement(q.a,null),onClick:this._handleToggleDrawer(e),type:"onMedia"}):t&&!n?s.createElement(pe.a,{accessibilityLabel:fe,dominantColor:r?o.rgb:void 0,icon:s.createElement(G.a,null),renderMenu:this._renderOverflowMenu,type:r?"onMedia":"invertedPrimary"}):void 0},n._renderFooter=function(){var e=this.props.tweet;return e?s.createElement(de.a,{actionSize:"large",activeColor:"white",color:"white",style:ge.actionsBar,tweet:e,withCount:!0}):void 0},t}(s.Component);c()(ve,"contextTypes",{isModal:l.bool});var ge=N.a.create((function(e){return{actionsBar:{height:e.spaces.xxLarge,marginTop:0,maxWidth:"none",paddingHorizontal:e.spaces.xSmall},container:{flexDirection:"row",overflowX:"hidden",overflowY:"hidden",height:"100%",width:"100%",position:"relative"},neighbor:{flexGrow:1,flexShrink:1}}})),Me=E(ve);t.default=Me},zcjS:function(e,t,n){"use strict";n("IAdD"),t.__esModule=!0,t.default=void 0;var r=d(n("7DT3")),o=d(n("/uF9")),a=d(n("ERkP")),i=d(n("OkZJ"));function d(e){return e&&e.__esModule?e:{default:e}}var c=function(e){return void 0===e&&(e={}),(0,r.default)("svg",Object.assign({},e,{style:[i.default.root,e.style,o.default.isRTL&&i.default.iconRtl],viewBox:"0 0 24 24"}),a.default.createElement("g",null,a.default.createElement("path",{d:"M4.656 12l8.72-8.72c.293-.293.293-.768 0-1.06s-.768-.294-1.06 0l-9.25 9.25c-.294.292-.294.767 0 1.06l9.25 9.25c.145.146.337.22.53.22s.383-.073.53-.22c.292-.293.292-.768 0-1.06L4.655 12z"}),a.default.createElement("path",{d:"M12.465 12l8.72-8.72c.293-.293.293-.768 0-1.06s-.768-.294-1.06 0l-9.25 9.25c-.294.292-.294.767 0 1.06l9.25 9.25c.145.146.337.22.53.22s.383-.073.53-.22c.292-.293.292-.768 0-1.06L12.464 12z"})))};c.metadata={height:24,width:24};var s=c;t.default=s}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/web_legacy/bundle.TweetMediaDetail.721ddd94.js.map