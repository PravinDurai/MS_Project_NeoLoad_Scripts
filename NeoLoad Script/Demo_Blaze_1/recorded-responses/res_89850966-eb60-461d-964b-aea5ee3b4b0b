(window.webpackJsonp=window.webpackJsonp||[]).push([[146],{"3A2y":function(t,e,n){"use strict";n("KOtZ"),n("+KXO");var r=n("zrOZ");e.a=function(t,e){var n=Object(r.a)(Array.isArray(e)?e:[e]);return Object.keys(t).reduce((function(e,r){return n.has(r)||(e[r]=t[r]),e}),{})}},MMRb:function(t,e,n){"use strict";n.r(e);var r=n("9OUN"),a=n("lRnM"),i=n("uKEd"),s=n("AQ79");n.d(e,"GLOBAL_STATE_KEY",(function(){return s.a}));var c,o=n("xPna"),u=n("Ssj5"),d=n("xCUF"),_=n("aWyx");n.d(e,"CONVERSATION_TYPE",(function(){return _.a})),n.d(e,"ENTRY_TYPE",(function(){return _.b})),n.d(e,"PAGINATION_STATUS",(function(){return _.c})),n.d(e,"addParticipants",(function(){return a.d})),n.d(e,"selectConversation",(function(){return a.t})),n.d(e,"selectConversationAvatarMediaId",(function(){return a.u})),n.d(e,"selectConversationFetchStatus",(function(){return a.x})),n.d(e,"selectConversationIsLoaded",(function(){return a.y})),n.d(e,"selectConversationIsRead",(function(){return a.z})),n.d(e,"selectConversationAvatarMediaIsUploading",(function(){return a.v})),n.d(e,"selectConversationAvatarMediaUploadProgress",(function(){return a.w})),n.d(e,"selectConversations",(function(){return a.B})),n.d(e,"selectEntries",(function(){return i.l})),n.d(e,"selectEntriesForConversation",(function(){return i.m})),n.d(e,"selectEntry",(function(){return i.n})),n.d(e,"selectInbox",(function(){return o.p})),n.d(e,"selectFetchStatus",(function(){return o.o})),n.d(e,"selectInboxIsLoaded",(function(){return o.q})),n.d(e,"selectIsLoadingTop",(function(){return o.r})),n.d(e,"selectUnreadCount",(function(){return o.t})),n.d(e,"selectUntrustedCursor",(function(){return o.v})),n.d(e,"selectUntrustedUnreadCount",(function(){return o.y})),n.d(e,"selectUntrustedConversationCount",(function(){return o.u})),n.d(e,"selectUntrustedLowQualityCursor",(function(){return o.x})),n.d(e,"selectUntrustedLowQualityConversationCount",(function(){return o.w})),n.d(e,"selectPoppedOutConversationId",(function(){return o.s})),n.d(e,"selectDrawerVisibility",(function(){return o.n})),n.d(e,"selectDrawerExperimentEnabled",(function(){return o.m})),n.d(e,"selectUpdates",(function(){return d.e})),n.d(e,"acceptConversation",(function(){return a.a})),n.d(e,"addAvatarMedia",(function(){return a.b})),n.d(e,"addWelcomeMessageToConversation",(function(){return a.e})),n.d(e,"disableMentionNotifications",(function(){return a.g})),n.d(e,"disableNotifications",(function(){return a.h})),n.d(e,"enableMentionNotifications",(function(){return a.i})),n.d(e,"enableNotifications",(function(){return a.j})),n.d(e,"fetchConversation",(function(){return a.k})),n.d(e,"fetchConversationFromParticipants",(function(){return a.l})),n.d(e,"fetchConversationIfNeeded",(function(){return a.n})),n.d(e,"fetchConversationHistory",(function(){return a.m})),n.d(e,"leaveConversation",(function(){return a.o})),n.d(e,"markAllAsRead",(function(){return a.p})),n.d(e,"markConversationRead",(function(){return a.q})),n.d(e,"removeAvatarMedia",(function(){return a.r})),n.d(e,"removeConversation",(function(){return a.s})),n.d(e,"setConversationAvatar",(function(){return a.C})),n.d(e,"toggleNotifications",(function(){return a.D})),n.d(e,"updateConversationReadState",(function(){return a.I})),n.d(e,"updateConversationAvatar",(function(){return a.E})),n.d(e,"updateConversationName",(function(){return a.G})),n.d(e,"updateTyping",(function(){return a.J})),n.d(e,"fetchInbox",(function(){return o.d})),n.d(e,"fetchInboxIfNeeded",(function(){return o.e})),n.d(e,"fetchTrustedInboxHistory",(function(){return o.f})),n.d(e,"fetchUntrustedInboxHistory",(function(){return o.g})),n.d(e,"fetchUntrustedLowQualityInboxHistory",(function(){return o.h})),n.d(e,"updateLastSeenEventId",(function(){return o.B})),n.d(e,"updateTrustedLastSeenEventId",(function(){return o.C})),n.d(e,"updateUntrustedLastSeenEventId",(function(){return o.D})),n.d(e,"popOutConversation",(function(){return o.l})),n.d(e,"setDrawerVisibility",(function(){return o.A})),n.d(e,"loadDrawerVisibilityFromPersistence",(function(){return o.k})),n.d(e,"setDrawerExperimentEnabled",(function(){return o.z})),n.d(e,"loadDrawerExperimentFromPersistence",(function(){return o.j})),n.d(e,"deleteEntry",(function(){return i.f})),n.d(e,"markSpamStatus",(function(){return i.h})),n.d(e,"removeEntry",(function(){return i.j})),n.d(e,"fetchUpdates",(function(){return d.b})),n.d(e,"fetchUpdatesIfNeeded",(function(){return d.d}));var f=Object(r.c)({conversations:a.f,entries:i.e,inbox:o.c,updates:d.a});u.a.register(((c={})[s.a]=f,c)),e.default=f},WVrH:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}));var r=n("AQ79"),a=Object(r.c)("RESET"),i=function(){return{type:a}}},aWyx:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return i})),n.d(e,"d",(function(){return s}));n("yH/f");var r=Object.freeze({ONE_TO_ONE:"ONE_TO_ONE",GROUP:"GROUP_DM"}),a=Object.freeze({AT_END:"AT_END",HAS_MORE:"HAS_MORE"}),i=Object.freeze({CONVERSATION_AVATAR_UPDATE:"conversation_avatar_update",CONVERSATION_NAME_UPDATE:"conversation_name_update",CONVERSATION_PROFILE_INFO_HEADER:"conversation_profile_info_header",CONVERSATION_READ:"conversation_read",DISABLE_NOTIFICATIONS:"disable_notifications",ENABLE_NOTIFICATIONS:"enable_notifications",JOIN_CONVERSATION:"join_conversation",MARK_ALL_AS_READ:"mark_all_as_read",MENTION_NOTIFICATIONS_UPDATE:"mention_notifications_setting_update",MESSAGE:"message",MESSAGE_DELETE:"message_delete",MESSAGE_MARK_AS_NOT_SPAM:"message_unmark_as_spam",MESSAGE_MARK_AS_SPAM:"message_mark_as_spam",PARTICIPANTS_JOIN:"participants_join",PARTICIPANTS_LEAVE:"participants_leave",REACTION_CREATE:"reaction_create",REACTION_DELETE:"reaction_delete",READ_ONLY_INDICATOR:"read_only_indicator",REMOVE_CONVERSATION:"remove_conversation",TRUST_CONVERSATION:"trust_conversation",TYPING_INDICATOR:"typing_indicator",WELCOME_MESSAGE:"welcome_message_create"}),s=Object.freeze({MUTUAL_FRIENDS:"mutual_friends"})},lRnM:function(t,e,n){"use strict";n.d(e,"f",(function(){return F})),n.d(e,"t",(function(){return k})),n.d(e,"x",(function(){return G})),n.d(e,"y",(function(){return Q})),n.d(e,"B",(function(){return K})),n.d(e,"A",(function(){return W})),n.d(e,"z",(function(){return Y})),n.d(e,"u",(function(){return z})),n.d(e,"v",(function(){return J})),n.d(e,"w",(function(){return Z})),n.d(e,"d",(function(){return X})),n.d(e,"k",(function(){return $})),n.d(e,"l",(function(){return tt})),n.d(e,"n",(function(){return et})),n.d(e,"m",(function(){return nt})),n.d(e,"a",(function(){return rt})),n.d(e,"o",(function(){return at})),n.d(e,"c",(function(){return st})),n.d(e,"p",(function(){return ot})),n.d(e,"q",(function(){return ut})),n.d(e,"I",(function(){return dt})),n.d(e,"s",(function(){return ft})),n.d(e,"D",(function(){return vt})),n.d(e,"h",(function(){return Et})),n.d(e,"j",(function(){return It})),n.d(e,"g",(function(){return bt})),n.d(e,"i",(function(){return lt})),n.d(e,"J",(function(){return At})),n.d(e,"G",(function(){return pt})),n.d(e,"H",(function(){return Tt})),n.d(e,"F",(function(){return St})),n.d(e,"b",(function(){return mt})),n.d(e,"r",(function(){return gt})),n.d(e,"E",(function(){return Rt})),n.d(e,"C",(function(){return Dt})),n.d(e,"e",(function(){return Mt}));n("1t7P"),n("jQ/y"),n("gqY9"),n("2G9S"),n("lTEL"),n("7xRU"),n("z84I"),n("KOtZ"),n("HUPx"),n("ho0z"),n("6U7i"),n("IAdD"),n("ZVkB"),n("+KXO"),n("7x/C"),n("1IsZ"),n("JtPf"),n("kYxP");var r=n("LdEA"),a=n.n(r),i=n("RhWx"),s=n.n(i),c=n("oEOe"),o=n("AspN"),u=n("RqPI"),d=n("AQ79"),_=n("/kEJ"),f=n("xPna"),O=n("pXBW"),v=n("hqKg"),E=n("k49u"),I=n("/NU0"),b=n("aWyx"),l=n("WVrH"),A=n("uKEd"),p=n("k6jb"),T=n("kGix"),y=n("t0aI");function S(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var j=c.a(d.b,"ACCEPT_CONVERSATION"),m=c.a(d.b,"ADD_PARTICIPANTS"),N=c.a(d.b,"FETCH_CONVERSATION"),g=c.a(d.b,"FETCH_CONVERSATION_FROM_PARTICIPANTS"),C=c.a(d.b,"LEAVE_CONVERSATION"),R=c.a(d.b,"MARK_CONVERSATION_READ"),D=c.a(d.b,"DISABLE_MENTION_CONVERSATION_NOTIFICATIONS"),M=c.a(d.b,"DISABLE_CONVERSATION_NOTIFICATIONS"),L=c.a(d.b,"ENABLE_MENTION_CONVERSATION_NOTIFICATIONS"),P=c.a(d.b,"ENABLE_CONVERSATION_NOTIFICATIONS"),U=c.a(d.b,"UPDATE_CONVERSATION_NAME"),x=c.a(d.b,"UPLOAD_MEDIA"),h=c.a(d.b,"UPDATE_GROUP_AVATAR"),V=function(t){return(new Date).getTime()+36e5*t},B=[void 0,V(1),V(8),V(168)],w={};function F(t,e){var n,r,i,c,o,u,d,_,f,O,v,E,I;switch(void 0===t&&(t=w),e.type){case j.SUCCESS:var b,A=e.meta.conversationId,g=t[A];return Object.assign({},t,((b={})[A]=Object.assign({},g,{data:Object.assign({},g.data,{trusted:!0})}),b));case it:var h=Object.entries(e.payload||{}).reduce((function(e,n){var r,a=n[0],i=n[1];return e[a]=Object.assign({},q(t[a],i),{fetchStatus:(r={},r[p.a]=T.a.LOADED,r[p.b]=T.a.LOADED,r)}),e}),{});return Object.assign({},t,h);case m.REQUEST:var V,F,k=e.meta.conversationId,G=t[k];return Object.assign({},t,((F={})[k]=Object.assign({},G,{fetchStatus:Object.assign({},G.fetchStatus,(V={},V[p.b]=T.a.LOADING,V))}),F));case m.FAILURE:var Q,H,K=e.meta.conversationId,W=t[K];return Object.assign({},t,((H={})[K]=Object.assign({},W,{fetchStatus:Object.assign({},W.fetchStatus,(Q={},Q[p.b]=T.a.FAILED,Q))}),H));case m.SUCCESS:var Y,z,J=e.meta.conversationId,Z=t[J],X=Z.data.participants,$=e.payload.entities.entries?Object.values(e.payload.entities.entries)[0].participants:[];return Object.assign({},t,((z={})[J]=Object.assign({},Z,{fetchStatus:Object.assign({},Z.fetchStatus,(Y={},Y[p.b]=T.a.LOADED,Y)),data:Object.assign({},Z.data,{participants:[].concat(s()(X),s()($))})}),z));case N.REQUEST:var tt,et,nt=e.meta,rt=nt.conversationId,at=nt.direction,st=void 0===at?p.a:at,ot=t[rt];return Object.assign({},t,((et={})[rt]=Object.assign({},ot,{fetchStatus:Object.assign({},ot&&ot.fetchStatus||{},(tt={},tt[st]=T.a.LOADING,tt))}),et));case N.FAILURE:var ut,dt,ft=e.meta,vt=ft.conversationId,Et=ft.direction,It=void 0===Et?p.a:Et,bt=t[vt];return Object.assign({},t,((dt={})[vt]=Object.assign({},bt,{fetchStatus:Object.assign({},bt&&bt.fetchStatus||{},(ut={},ut[It]=T.a.FAILED,ut)),error:e.payload}),dt));case N.SUCCESS:var lt,At,pt=e.meta,Tt=pt.conversationId,St=pt.direction,mt=void 0===St?p.a:St;return Object.assign({},t,((At={})[Tt]=Object.assign({},t[Tt],{fetchStatus:Object.assign({},t[Tt]&&t[Tt].fetchStatus||{},(lt={},lt[mt]=T.a.LOADED,lt))}),At));case ct:return Object.entries(t).reduce((function(n,r){var a=r[0];r[1];return n[a]=q(t[a],{last_read_event_id:e.payload}),n}),{});case R.REQUEST:return Object.assign({},t,((n={})[e.meta.conversationId]=q(t[e.meta.conversationId],{last_read_event_id:e.meta.lastReadEventId}),n));case _t:var gt=t,Rt=e.payload;gt[Rt];return a()(gt,[Rt].map(S));case C.REQUEST:return Object.assign({},t,((r={})[e.meta.conversationId]=Object.assign({},t[e.meta.conversationId],{isDeleted:!0}),r));case Ot:return Object.assign({},t,((i={})[e.meta.conversationId]=q(t[e.meta.conversationId],{notifications_disabled:!e.payload}),i));case M.REQUEST:return Object.assign({},t,((c={})[e.meta.conversationId]=q(t[e.meta.conversationId],{notifications_disabled:!0,mute_expiration_time:B[e.meta.duration]}),c));case D.REQUEST:return Object.assign({},t,((o={})[e.meta.conversationId]=q(t[e.meta.conversationId],{mention_notifications_disabled:!0}),o));case P.REQUEST:return Object.assign({},t,((u={})[e.meta.conversationId]=q(t[e.meta.conversationId],{notifications_disabled:!1}),u));case L.REQUEST:return Object.assign({},t,((d={})[e.meta.conversationId]=q(t[e.meta.conversationId],{mention_notifications_disabled:!1}),d));case Ct:return Object.assign({},t,((_={})[e.meta.conversationId]=q(t[e.meta.conversationId],{avatar_image_https:e.payload}),_));case U.REQUEST:case U.SUCCESS:return Object.assign({},t,((f={})[e.meta.conversationId]=q(t[e.meta.conversationId],{name:e.meta.name}),f));case yt:var Dt,Mt=t[e.meta.conversationId],Lt=Mt&&Mt.data&&Mt.data.max_entry_id||"0";return Object(y.b)(e.payload,Lt)?Object.assign({},t,((Dt={})[e.meta.conversationId]=q(t[e.meta.conversationId],{max_entry_id:e.payload}),Dt)):t;case x.REQUEST:return Object.assign({},t,((O={})[e.meta.conversationId]=q(t[e.meta.conversationId],{isUploading:!0}),O));case x.FAILURE:case x.SUCCESS:return Object.assign({},t,((v={})[e.meta.conversationId]=q(t[e.meta.conversationId],{isUploading:!1}),v));case jt:return Object.assign({},t,((E={})[e.meta.conversationId]=q(t[e.meta.conversationId],{avatarMediaId:e.payload}),E));case Nt:return Object.assign({},t,((I={})[e.meta.conversationId]=q(t[e.meta.conversationId],{avatarMediaId:null}),I));case l.a:return w;default:return t}}var q=function(t,e,n){void 0===t&&(t={}),void 0===e&&(e={}),void 0===n&&(n=[]);var r,i,s=t,c=(s.error,a()(s,["error"])),o=(Object(I.a)(e.avatarMediaId)?e:c).avatarMediaId,u=void 0===o?null:o,d=e.isUploading,_=void 0!==d&&d,f=e,O=(f.avatarMediaId,f.isUploading,f.max_entry_id),v=a()(f,["avatarMediaId","isUploading","max_entry_id"]),E=Object.assign({},c&&c.data,v);return O&&(E.max_entry_id=(r=O,i=c&&c.data&&c.data.max_entry_id,Object(y.c)(r,i)?r:i)),Object.assign({},c,{avatarMediaId:u,data:E,isUploading:_})},k=function(t,e){return t[d.a].conversations[e]},G=function(t,e){var n=k(t,e);return n?Object(T.b)(n.fetchStatus,n.data):T.a.LOADED},Q=function(t,e){var n=k(t,e);return!!n&&Object(T.b)(n.fetchStatus,n.data)===T.a.LOADED},H=function(t,e){var n=k(t,e);return!!n&&n.fetchStatus[p.a]===T.a.LOADING},K=Object(v.createSelector)((function(t){return t[d.a].conversations}),(function(t){return Object.entries(t).reduce((function(t,e){var n=e[0],r=e[1];return r.data&&(t[n]=r),t}),{})})),W=function(t,e){var n=((k(t,e)||{}).data||{}).sort_event_id;if(n){var r=u.g(t),a=Object(A.n)(t,n)||{},i=a.message_data,s=a.by_user_id,c=a.id,o=a.sender_id;if(o&&o!==r||i&&i.sender_id!==r||s&&s!==r)return c}return null},Y=function(t,e){var n=W(t,e),r=(k(t,e)||{}).data;return!n||!!(r&&r.last_read_event_id&&Object(y.c)(r.last_read_event_id,n))},z=function(t,e){return(k(t,e)||{}).avatarMediaId},J=function(t,e){return(k(t,e)||{}).isUploading},Z=function(t,e){return o.h(t,z(t,e))},X=function(t,e){return function(n,r,a){var i=a.api,s=e.join(",");return c.b(n,{params:{conversationId:t,joinedParticipantIds:s},request:i.DirectMessages.addParticipants})({actionTypes:m,context:"ACTION_DM_ADD_PARTICIPANTS",meta:{conversationId:t,participantIds:e}},(function(t){if(t){var e=t.entities;return[e.entries&&Object(A.a)(e.entries),Object(_.c)(e)]}})).then((function(t){var e=t.result.failed_participants;if(!e)return Promise.resolve(t);var n=Object.keys(e),r=1===n.length?e[n[0]]:E.a.DefaultApiError,a=new O.a("addParticpants URL",500,t.headers,[{code:r}]);return a.context.action="ACTION_DM_ADD_PARTICIPANTS",Promise.reject(a)}))}},$=function(t){return void 0===t&&(t={}),function(e,n,r){var a=r.api,i=t,s=i.conversationId,o=i.context;return c.b(e,{params:t,request:a.DirectMessages.fetchConversation})({actionTypes:N,context:o,meta:{conversationId:s,direction:Object(p.c)(t)}},(function(t){if(t){var e=t.entities,n=e.cards,r=e.entries,a=e.tweets,i=e.users,s=t.result.conversation_timeline,c=function(t,e){return void 0===t&&(t={}),Object.entries(t).reduce((function(t,n){var r,a=n[0],i=n[1];return Object.assign({},t,((r={})[a]=Object.assign({},i,e),r))}),{})}(s.conversations,{max_entry_id:s.max_entry_id,min_entry_id:s.min_entry_id,status:s.status});return Object(f.b)({conversations:c,entries:r,users:i,tweets:a,cards:n})}}))}},tt=function(t){return function(e,n,r){var a=r.api;return c.b(e,{params:{participantIds:t},request:a.DirectMessages.fetchConversationFromParticipants})({actionTypes:g,meta:{participantIds:t}})}},et=function(t){return void 0===t&&(t={}),function(e,n){var r=n(),a=t.conversationId,i=(k(r,a)||{}).data,s=void 0===i?{}:i,c=H(r,a);return(!s.status||s.status===b.c.HAS_MORE)&&!c?e($({conversationId:a,context:"FETCH_DM_CONVERSATION"})):Promise.resolve()}},nt=function(t){return void 0===t&&(t={}),function(e,n){var r=n(),a=t.conversationId,i=(k(r,a)||{}).data||{},s=i.status,c=i.min_entry_id,o=H(r,a);return s!==b.c.HAS_MORE||o?Promise.resolve():e($(Object.assign({},t,{max_id:c,context:"FETCH_DM_CONVERSATION_HISTORY"})))}},rt=function(t){return function(e,n,r){var a=r.api;return c.b(e,{params:{conversationId:t},request:a.DirectMessages.acceptConversation})({actionTypes:j,meta:{conversationId:t}})}},at=function(t){return void 0===t&&(t={}),function(e,n,r){var a=r.api,i=t.conversationId;return c.c(e,{params:t,request:a.DirectMessages.leaveConversation})({actionTypes:C,context:"ACTION_LEAVE_CONVERSATION",meta:{conversationId:i}})}},it=d.c("ADD_CONVERSATIONS"),st=function(t){return{payload:t,type:it}},ct=d.c("MARK_ALL_AS_READ"),ot=function(t){return{payload:t,type:ct}},ut=function(t,e){return{type:R.REQUEST,meta:{conversationId:t,lastReadEventId:e}}},dt=function(t){return function(e,n,r){var a=r.api,i=n(),s=(k(i,t)||{}).data,o=(void 0===s?{}:s).sort_event_id,u=!Y(i,t);return t&&o&&u?c.c(e,{params:{conversationId:t,last_read_event_id:o},request:a.DirectMessages.markRead})({actionTypes:R,bypassFailureOnErrors:function(){return!0},context:"APP_DM_UPDATE_CONVERSATION_READ_STATE",meta:{conversationId:t,lastReadEventId:o}}):Promise.resolve()}},_t=d.c("REMOVE_CONVERSATION"),ft=function(t){return[{payload:t,type:_t},Object(A.i)(t)]},Ot=d.c("TOGGLE_CONVERSATION_NOTIFICATIONS"),vt=function(t,e){return{meta:{conversationId:t},payload:e,type:Ot}},Et=function(t){return void 0===t&&(t={}),function(e,n,r){var a=r.api,i=t,s=i.conversationId,o=i.duration;return c.c(e,{params:t,request:a.DirectMessages.disableNotifications})({actionTypes:M,context:"ACTION_DISABLE_NOTIFICATIONS",meta:{conversationId:s,duration:o}})}},It=function(t){return void 0===t&&(t={}),function(e,n,r){var a=r.api,i=t.conversationId;return c.c(e,{params:t,request:a.DirectMessages.enableNotifications})({actionTypes:P,context:"ACTION_ENABLE_NOTIFICATIONS",meta:{conversationId:i}})}},bt=function(t){return void 0===t&&(t={}),function(e,n,r){var a=r.api,i=t.conversationId,s=Object.assign({mention_notifications_disabled:!0},t);return c.c(e,{params:s,request:a.DirectMessages.updateMentionNotificationsSetting})({actionTypes:D,context:"ACTION_DISABLE_DM_MENTION_NOTIFICATIONS",meta:{conversationId:i}})}},lt=function(t){return void 0===t&&(t={}),function(e,n,r){var a=r.api,i=t.conversationId,s=Object.assign({mention_notifications_disabled:!1},t);return c.c(e,{params:s,request:a.DirectMessages.updateMentionNotificationsSetting})({actionTypes:L,context:"ACTION_ENABLE_DM_MENTION_NOTIFICATIONS",meta:{conversationId:i}})}},At=function(t){return void 0===t&&(t={}),function(e,n,r){return r.api.DirectMessages.updateTyping(t)}},pt=function(t){return void 0===t&&(t={}),function(e,n,r){var a=r.api,i=t,s=i.conversationId,o=i.name;return c.c(e,{params:t,request:a.DirectMessages.updateConversationName})({actionTypes:U,context:"ACTION_UPDATE_CONVERSATION_NAME",meta:{conversationId:s,name:o}})}},Tt=function(t){return{type:U.SUCCESS,meta:{conversationId:t.conversation_id,name:t.conversation_name}}},yt=d.c("UPDATE_CONVERSATION_MAX_ENTRY_ID"),St=function(t,e){return{meta:{conversationId:t},payload:e,type:yt}},jt=d.c("ADD_AVATAR_MEDIA"),mt=function(t,e){return{meta:{conversationId:t},payload:e,type:jt}},Nt=d.c("REMOVE_AVATAR_MEDIA"),gt=function(t,e){return{meta:{conversationId:t},payload:e,type:Nt}},Ct=d.c("UPDATE_CONVERSATION_AVATAR"),Rt=function(t,e){return{meta:{conversationId:t},payload:e,type:Ct}},Dt=function(t){return function(e,n,r){var a=r.api;e({meta:{conversationId:t},type:x.REQUEST});var i=z(n(),t),s=o.k(i);return e(s).then((function(n){var r=n[0];return e({meta:{conversationId:t},type:x.SUCCESS}),c.b(e,{params:{conversationId:t,avatar_id:r.uploadId},request:a.DirectMessages.updateConversationAvatar})({actionTypes:h,context:"APP_DM_UPDATE_CONVERSATION_AVATAR"})}),(function(n){var r={errors:n,context:"APP_DM_UPDATE_CONVERSATION_AVATAR"};return e({meta:{conversationId:t},type:x.FAILURE}),Promise.reject(r)}))}},Mt=function(t,e){return function(n,r,a){var i=a.api;return c.d(n,{params:{conversation_id:t,welcome_message_id:e},request:i.DirectMessages.addWelcomeMessageToConversation})("ADD_WELCOME_MESSAGE_TO_CONVERSATION")}}},uKEd:function(t,e,n){"use strict";n.d(e,"e",(function(){return N})),n.d(e,"a",(function(){return D})),n.d(e,"f",(function(){return M})),n.d(e,"d",(function(){return L})),n.d(e,"k",(function(){return P})),n.d(e,"i",(function(){return x})),n.d(e,"r",(function(){return h})),n.d(e,"h",(function(){return V})),n.d(e,"b",(function(){return w})),n.d(e,"j",(function(){return q})),n.d(e,"c",(function(){return G})),n.d(e,"g",(function(){return H})),n.d(e,"l",(function(){return K})),n.d(e,"n",(function(){return W})),n.d(e,"o",(function(){return Y})),n.d(e,"m",(function(){return z})),n.d(e,"p",(function(){return J})),n.d(e,"q",(function(){return Z}));n("2G9S"),n("LW0h"),n("hBpG"),n("jwue"),n("lTEL"),n("z84I"),n("KOtZ"),n("tQbP"),n("IAdD"),n("+KXO"),n("7x/C"),n("1IsZ"),n("DZ+c"),n("+oxZ"),n("kYxP");var r=n("LdEA"),a=n.n(r),i=n("RhWx"),s=n.n(i),c=n("t0aI"),o=n("aWyx"),u=n("SrIh"),d=n("WVrH"),_=n("fEA7"),f=n.n(_),O=n("AQ79"),v=n("3A2y"),E=n("J4ZH"),I=n("4FGy"),b=n("s1N3"),l=n("lnti"),A=n("oEOe"),p=Object(A.a)(O.b,"DELETE_MESSAGE"),T=Object(A.a)(O.b,"REACTION_CREATE"),y=Object(A.a)(O.b,"REACTION_DELETE"),S=Object(A.a)(O.b,"MARK_ENTRIES_AS_SPAM"),j=Object(A.a)(O.b,"MARK_ENTRIES_AS_NOT_SPAM"),m={entries:{},entryIdsByConversationId:{},reactionsByMessageId:{}};function N(t,e){void 0===t&&(t=m);var n=e.meta||{},r=n.conversationId,a=n.requestId;switch(e.type){case B:var i,c,_=e.payload.id,f=Object.assign({},t.entries,((i={})[_]=g(t.entries[_],{data:e.payload}),i));return Object.assign({},t,{entries:f,entryIdsByConversationId:Object.assign({},t.entryIdsByConversationId,(c={},c[r]=C([].concat(s()(t.entryIdsByConversationId[r]||[]),[_]),f),c))});case R:var O=Object.values(e.payload).filter((function(t){return t.type!==o.b.CONVERSATION_READ})).reduce((function(e,n){var r=n.id,a=Object(v.a)(n,"message_reactions");return e.allEntries[r]=g(t.entries[r],{data:a,isLoading:!1,isLoaded:!0}),n.message_reactions&&(n.message_reactions.forEach((function(r){var a=Object.assign({},r,{affects_sort:!0,message_id:n.id,type:o.b.REACTION_CREATE});e.allEntries[a.id]=g(t.entries[a.id],{data:a,isLoading:!1,isLoaded:!0})})),e.embeddedReactionsByMessageId[r]=C([].concat(s()(t.reactionsByMessageId[r]||[]),s()(n.message_reactions.map((function(t){return t.id})))),Object.assign({},t.entries,e.allEntries))),e}),{allEntries:{},embeddedReactionsByMessageId:{}}),b=Object.assign({},t.entries,O.allEntries),l=Object(E.a)(Object.values(O.allEntries),(function(t){return t.data.conversation_id})),A=Object.keys(l).reduce((function(e,n){var r=l[n].map((function(t){return t.data.id}));return e[n]=C([].concat(s()(t.entryIdsByConversationId[n]||[]),s()(r)),b),e}),{});return Object.assign({},t,{entries:b,entryIdsByConversationId:Object.assign({},t.entryIdsByConversationId,A),reactionsByMessageId:Object.assign({},t.reactionsByMessageId,O.embeddedReactionsByMessageId)});case S.REQUEST:case j.REQUEST:var T=e.type===S.REQUEST,N=e.payload.reduce((function(e,n){var r,a=t.entries[n]&&t.entries[n].data;return Object.assign({},e,((r={})[n]=Object.assign({},t.entries[n],{data:Object.assign({},a,{marked_as_spam:T})}),r))}),{});return Object.assign({},t,{entries:Object.assign({},t.entries,N)});case p.REQUEST:case U:var D,M=e.type===U&&!Array.isArray(e.payload),L=t.entryIdsByConversationId[r]||[],P=e.type===U?M?L:e.payload:[e.payload].concat(s()(t.reactionsByMessageId[e.payload]||[]));return Object.assign({},t,{entries:Object(v.a)(t.entries,P),entryIdsByConversationId:Object.assign({},Object(v.a)(t.entryIdsByConversationId,r),M?{}:(D={},D[r]=Object(I.a)(L,P),D)),reactionsByMessageId:Object(v.a)(t.reactionsByMessageId,P)});case F:var x,h=e.payload.id||a,V=Object.assign({},Object(v.a)(t.entries,h)),w=C((t.entryIdsByConversationId[r]||[]).filter((function(t){return t!==h})),V),q=w?((x={})[r]=w,x):{};return Object.assign({},t,{entries:V,entryIdsByConversationId:Object.assign({},Object(v.a)(t.entryIdsByConversationId,r),q),reactionsByMessageId:Object(v.a)(t.reactionsByMessageId,h)});case k:var G,H=e.payload,K=[].concat(s()(t.reactionsByMessageId[H.message_id]||[]),[H.id]),W=K.filter((function(e){return t.entries[e]}));K.length!==W.length&&Object(u.a)("DM add reaction is missing a backing entry",{extra:{filteredMessageReactionIds:W,messageReactionIds:K,currentId:H.id}});var Y=C(W,t.entries);return Object.assign({},t,{reactionsByMessageId:Object.assign({},t.reactionsByMessageId,(G={},G[H.message_id]=Y,G))});case y.REQUEST:case Q:var z,J,Z=e.payload,X=(t.reactionsByMessageId[Z.message_id]||[]).find((function(e){return t.entries[e].data.sender_id===Z.sender_id}));if(!X)return t;var $=Object(I.a)(t.entryIdsByConversationId[Z.conversation_id],X),tt=Object(I.a)(t.reactionsByMessageId[Z.message_id],X);return Object.assign({},t,{entries:Object(v.a)(t.entries,X),entryIdsByConversationId:Object.assign({},t.entryIdsByConversationId,(z={},z[Z.conversation_id]=$,z)),reactionsByMessageId:Object.assign({},t.reactionsByMessageId,(J={},J[Z.message_id]=tt,J))});case d.a:return m;default:return t}}var g=function(t,e){var n=t||{},r=(n.error,n.isLoaded,n.isLoading,a()(n,["error","isLoaded","isLoading"])),i=e||{},s=i.data,c=a()(i,["data"]);return Object.assign({},r,{data:Object.assign({},r&&r.data,s)},c)},C=function(t,e){void 0===t&&(t=[]);var n=Object(b.a)(t).sort((function(t,n){var r=Object(c.a)(e[t].data.time,e[n].data.time);return 0===r?Object(c.a)(e[t].id,e[n].id):r}));return n.length?n:void 0},R=Object(O.c)("ADD_ENTRIES"),D=function(t){return{payload:t,type:R}},M=function(t){return function(e,n,r){var i=r.api,s=t||{},c=s.id,o=s.conversationId,u=s.requestId,d=void 0===u?f.a.v1():u,_=a()(s,["id","conversationId","requestId"]),O=Object.assign({},_,{id:c,request_id:d});return Object(A.c)(e,{params:O,request:i.DirectMessages.deleteMessage})({actionTypes:p,context:"ACTION_DELETE_DM",payload:c,meta:{conversationId:o}})}},L=function(t){return function(e,n,r){var a,i,s,c,u,d=r.api,_=(i=(a=t).reaction_key,s=a.conversation_id,c=a.dm_id,u=a.perspective,{id:f.a.v1(),time:(new Date).getTime().toString(),reaction_key:i,conversation_id:s,message_id:c,sender_id:u,type:o.b.REACTION_CREATE});e([w(_.conversation_id,_.id,_),H(_),G(_)]);return Object(A.b)(e,{params:Object(v.a)(t,"perspective"),request:d.DirectMessages.addReaction})({actionTypes:T,context:"ACTION_REACTION_CREATE"},(function(t,e){if(e)return[H(_)]}))}},P=function(t){return function(e,n,r){var i=r.api,s=t.perspective,c=a()(t,["perspective"]);return Object(A.c)(e,{params:c,request:i.DirectMessages.deleteReaction})({actionTypes:y,context:"ACTION_REACTION_DELETE",payload:{conversation_id:t.conversation_id,message_id:t.dm_id,sender_id:s}})}},U="rweb/dm/REMOVE_CONVERSATION_ENTRIES",x=function(t,e){return{meta:{conversationId:t},payload:e,type:U}},h=function(t,e){return{payload:t,type:e?S.REQUEST:j.REQUEST}},V=function(t){var e=t.conversationId,n=t.dmId,r=t.markSpam;return function(t,a,i){var s=i.api;return Object(A.c)(t,{params:{dm_id:n,report_as:r?"spam":"not_spam"},request:s.DirectMessages.reportSpam})({actionTypes:r?p:j,payload:r?n:[n],meta:{conversationId:e}})}},B=Object(O.c)("ADD_ENTRY"),w=function(t,e,n){return{meta:{conversationId:t,requestId:e},payload:n,type:B}},F=Object(O.c)("REMOVE_ENTRY"),q=function(t,e,n){return{meta:{conversationId:t,requestId:e},payload:n,type:F}},k=Object(O.c)("ADD_REACTION"),G=function(t){return{payload:t,type:k}},Q=Object(O.c)("DELETE_REACTION"),H=function(t){return{payload:t,type:Q}},K=function(t){return t[O.a].entries},W=function(t,e){var n=K(t).entries[e];return n&&n.data},Y=function(t,e){return t[O.a].entries.entryIdsByConversationId[e]},z=function(t,e){var n=Y(t,e);return n?Object(l.a)(n.map((function(e){return W(t,e)}))):[]},J=function(t,e){return K(t).reactionsByMessageId[e]},Z=function(t,e){return(J(t,e)||[]).map((function(e){return W(t,e).sender_id}))}},xCUF:function(t,e,n){"use strict";n.d(e,"c",(function(){return I})),n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return A})),n.d(e,"d",(function(){return p})),n.d(e,"f",(function(){return y})),n.d(e,"e",(function(){return N}));n("2G9S"),n("LW0h"),n("lTEL"),n("KOtZ"),n("tQbP"),n("IAdD"),n("7x/C"),n("1IsZ"),n("JtPf"),n("kYxP");var r=n("RhWx"),a=n.n(r),i=n("LdEA"),s=n.n(i),c=n("oEOe"),o=n("aWyx"),u=n("k6jb"),d=n("P1r1"),_=n("AQ79"),f=n("uKEd"),O=n("xPna"),v=n("lRnM"),E=n("WVrH"),I=c.a(_.b,"FETCH_UPDATES"),b={isLoaded:!1,isLoading:!1};function l(t,e){switch(void 0===t&&(t=b),e.type){case I.REQUEST:return Object.assign({},t,{isLoading:!0});case I.FAILURE:return Object.assign({},t,{error:e.payload,isLoaded:!1,isLoading:!1});case I.SUCCESS:var n=t,r=(n.error,s()(n,["error"]));return Object.assign({},r,{isLoaded:!0,isLoading:!1});case T:return Object.assign({},t,{cursor:e.payload});case S:return Object.assign({},t,{tertiaryInboxStatus:e.payload});case E.a:return b;default:return t}}var A=function(t){return function(e,n,r){var i=r.api,o=n().directMessages,_=void 0===o?{}:o,f=(_.updates||{}).cursor,v=t||{},b=v.polling,l=s()(v,["polling"]),A=(_.updates||{}).tertiaryInboxStatus,p=!1,T=b?{"x-twitter-polling":"true"}:{},y=Object(d.p)(n())?"on":"off";A?A!==y&&(f=null,p=!0):p=!0;var S=Object(O.i)(Object.assign({},l,{cursor:f}),n());return c.b(e,{params:S,headers:T,request:i.DirectMessages.fetchUserUpdates})({actionTypes:I,context:"FETCH_DM_USER_UPDATES",meta:{direction:Object(u.c)(t)}},(function(t){if(t){var e=t.entities,n=e.entries,r=e.tweets,i=e.users,s=e.cards,c=t.result,o=c.user_events,u=c.inbox_initial_state;return[u&&Object(E.b)()].concat(a()(Object(O.b)(Object.assign({},o||u,{entries:n,users:i,tweets:r,cards:s}))),a()(o?m(Object.values(n||[])):[]),[p&&j(y)])}}))}},p=function(t){return function(e,n){return g(n())?Promise.resolve():e(A(t))}},T=Object(_.c)("UPDATE_CURSOR"),y=function(t){return{payload:t,type:T}},S=Object(_.c)("UPDATE_TERTIARY_INBOX_STATUS"),j=function(t){return{payload:t,type:S}},m=function(t){return void 0===t&&(t=[]),t.sort((function(t,e){return t.id-e.id})).reduce((function(t,e){switch(e.type){case o.b.CONVERSATION_AVATAR_UPDATE:return[].concat(a()(t),[Object(v.E)(e.conversation_id,e.conversation_avatar_image_https),Object(v.F)(e.conversation_id,e.id)]).filter((function(t){return t}));case o.b.CONVERSATION_NAME_UPDATE:return[].concat(a()(t),[Object(v.H)(e),Object(v.F)(e.conversation_id,e.id)]).filter((function(t){return t}));case o.b.CONVERSATION_READ:return[].concat(a()(t),[Object(v.q)(e.conversation_id,e.last_read_event_id)]);case o.b.DISABLE_NOTIFICATIONS:case o.b.ENABLE_NOTIFICATIONS:var n=e.type===o.b.ENABLE_NOTIFICATIONS;return[].concat(a()(t),[Object(v.D)(e.conversation_id,n)]);case o.b.MARK_ALL_AS_READ:return[].concat(a()(t),[Object(v.p)(e.last_read_event_id)]);case o.b.MESSAGE_DELETE:return[].concat(a()(t),[Object(f.i)(e.conversation_id,e.messages.reduce((function(t,e){return[].concat(a()(t),a()(Object.values(e)))}),[]))]);case o.b.MESSAGE_MARK_AS_NOT_SPAM:case o.b.MESSAGE_MARK_AS_SPAM:var r=e.type===o.b.MESSAGE_MARK_AS_SPAM;return[].concat(a()(t),[Object(f.r)(e.messages.reduce((function(t,e){return[].concat(a()(t),a()(Object.values(e)))}),[]),r)]);case o.b.REMOVE_CONVERSATION:return[].concat(a()(t),a()(Object(v.s)(e.conversation_id)));case o.b.JOIN_CONVERSATION:case o.b.PARTICIPANTS_JOIN:case o.b.PARTICIPANTS_LEAVE:return[].concat(a()(t),[Object(v.F)(e.conversation_id,e.id)]);case o.b.REACTION_CREATE:return[].concat(a()(t),[Object(f.g)(e),Object(f.c)(e),Object(v.F)(e.conversation_id,e.id)]);case o.b.REACTION_DELETE:return[].concat(a()(t),[Object(f.g)(e)]);case o.b.MESSAGE:return[].concat(a()(t),[Object(v.F)(e.conversation_id,e.id)]).filter((function(t){return t}));default:return t}}),[])},N=function(t){return t[_.a].updates},g=function(t){return N(t).isLoading}},xPna:function(t,e,n){"use strict";n.d(e,"a",(function(){return j})),n.d(e,"c",(function(){return N})),n.d(e,"i",(function(){return R})),n.d(e,"p",(function(){return D})),n.d(e,"s",(function(){return P})),n.d(e,"n",(function(){return U})),n.d(e,"m",(function(){return x})),n.d(e,"v",(function(){return h})),n.d(e,"x",(function(){return V})),n.d(e,"o",(function(){return B})),n.d(e,"r",(function(){return w})),n.d(e,"q",(function(){return F})),n.d(e,"t",(function(){return q})),n.d(e,"y",(function(){return k})),n.d(e,"u",(function(){return G})),n.d(e,"w",(function(){return Q})),n.d(e,"d",(function(){return K})),n.d(e,"e",(function(){return W})),n.d(e,"g",(function(){return z})),n.d(e,"h",(function(){return J})),n.d(e,"f",(function(){return Z})),n.d(e,"b",(function(){return tt})),n.d(e,"C",(function(){return et})),n.d(e,"D",(function(){return nt})),n.d(e,"B",(function(){return rt})),n.d(e,"l",(function(){return it})),n.d(e,"A",(function(){return ot})),n.d(e,"k",(function(){return ut})),n.d(e,"z",(function(){return ft})),n.d(e,"j",(function(){return Ot}));n("LW0h"),n("lTEL"),n("KOtZ"),n("IAdD"),n("yH/f"),n("7x/C"),n("1IsZ"),n("JtPf"),n("kYxP");var r,a=n("LdEA"),i=n.n(a),s=n("oEOe"),c=n("/kEJ"),o=n("uKEd"),u=n("kGix"),d=n("YeIG"),_=n("aWyx"),f=n("WVrH"),O=n("xCUF"),v=n("AQ79"),E=n("lRnM"),I=n("t0aI"),b=n("P1r1"),l=s.a(v.b,"FETCH_INBOX"),A=s.a(v.b,"UPDATE_LAST_SEEN_EVENT_ID"),p="inbox",T="trusted",y="untrusted",S="untrusted_low_quality",j=Object.freeze({CLOSED:"closed",COLLAPSED:"collapsed",EXPANDED:"expanded"}),m={cursors:(r={},r[p]={fetchStatus:u.a.NONE},r[T]={fetchStatus:u.a.NONE},r[y]={fetchStatus:u.a.NONE},r[S]={fetchStatus:u.a.NONE},r),lastSeenEventIds:{},poppedOutConversationId:null,drawerVisibility:j.COLLAPSED,drawerExperimentEnabled:!1};function N(t,e){switch(void 0===t&&(t=m),e.type){case l.REQUEST:var n,r=e.meta.timelineType;return Object.assign({},t,{cursors:Object.assign({},t.cursors,(n={},n[r]=Object.assign({},t.cursors[r],{fetchStatus:u.a.LOADING}),n))});case l.FAILURE:var a,i=e.meta.timelineType;return Object.assign({},t,{cursors:Object.assign({},t.cursors,(a={},a[i]=Object.assign({},t.cursors[i],{error:e.payload,fetchStatus:u.a.FAILED}),a))});case l.SUCCESS:var s,c=e.meta.timelineType;return Object.assign({},t,{cursors:Object.assign({},t.cursors,(s={},s[c]=Object.assign({},t.cursors[c],{error:void 0,fetchStatus:u.a.LOADED}),s))});case X:return Object.assign({},t,{cursors:Object.assign({},t.cursors,e.payload.cursors),lastSeenEventIds:g(t.lastSeenEventIds,e.payload.lastSeenEventIds)});case A.REQUEST:return Object.assign({},t,{lastSeenEventIds:Object.assign({},t.lastSeenEventIds,e.meta.lastSeenEventIds)});case f.a:return Object.assign({},m,{cursors:Object.assign({},m.cursors,{inbox:t.cursors.inbox})});case at:return Object.assign({},t,{poppedOutConversationId:e.conversationId,drawerVisibility:j.EXPANDED});case st:return Object.assign({},t,{drawerVisibility:e.visibility});case dt:return Object.assign({},t,{drawerExperimentEnabled:e.enabled});default:return t}}var g=function(t,e){return{last_seen_event_id:C(t.last_seen_event_id,e.last_seen_event_id),trusted_last_seen_event_id:C(t.trusted_last_seen_event_id,e.trusted_last_seen_event_id),untrusted_last_seen_event_id:C(t.untrusted_last_seen_event_id,e.untrusted_last_seen_event_id)}},C=function(t,e){return Object(I.c)(t,e)?t:e},R=function(t,e,n){void 0===n&&(n="all");var r=Object(b.o)(e);return Object(b.p)(e)?Object.assign({},t,{filter_low_quality:r,include_quality:n}):Object.assign({},t,{filter_low_quality:r})},D=function(t){return t[v.a].inbox},M=function(t){return D(t).cursors},L=function(t){return D(t).lastSeenEventIds},P=function(t){return D(t).poppedOutConversationId},U=function(t){return D(t).drawerVisibility},x=function(t){return D(t).drawerExperimentEnabled},h=function(t){return M(t)[y]},V=function(t){return M(t)[S]},B=function(t){return function(t){return M(t)[p]}(t).fetchStatus},w=function(t){return B(t)===u.a.LOADING},F=function(t){return B(t)===u.a.LOADED},q=function(t){var e=Object(b.p)(t),n=Object.values(Object(E.B)(t)),r=e?n.filter((function(t){var e=t.data,n=e.low_quality;return e.trusted||!n})):n,a=L(t).last_seen_event_id;return H(t,r,a)},k=function(t){var e=Object(b.p)(t),n=L(t).untrusted_last_seen_event_id,r=Object.values(Object(E.B)(t)),a=e?r.filter((function(t){var e=t.data,n=e.trusted,r=e.low_quality;return!n&&!r})):r.filter((function(t){return!t.data.trusted}));return H(t,a,n)},G=function(t){return Object.values(Object(E.B)(t)).filter((function(t){return!t.data.trusted})).length},Q=function(t){return Object.values(Object(E.B)(t)).filter((function(t){var e=t.data,n=e.trusted,r=e.low_quality;return!n&&r})).length},H=function(t,e,n){return n?e.reduce((function(e,r){var a=r.data.conversation_id,i=Object(E.A)(t,a),s=Object(E.z)(t,a);return i&&Object(I.b)(i,n)&&!s?e+1:e}),0):0},K=function(t){return void 0===t&&(t={}),function(e,n,r){var a=r.api,i=R(t,n());return s.b(e,{params:i,request:a.DirectMessages.fetchUserInbox})({actionTypes:l,context:"FETCH_DM_INBOX",meta:{timelineType:p}},(function(t){if(t){var e=t.entities,n=e.entries,r=e.users,a=e.tweets,i=e.cards;return tt(Object.assign({},t.result.inbox_initial_state,{entries:n,users:r,tweets:a,cards:i}))}}))}},W=function(t){return void 0===t&&(t={}),function(e,n){var r=n(),a=B(r);return a!==u.a.LOADED&&a!==u.a.LOADING?e(K(t)):Promise.resolve()}},Y=function(t,e){return function(n,r,a){var i=a.api,c=M(r())[t],o=c.status,u=c.min_entry_id,d=t===S?y:t,f=Object.assign({},e,{max_id:u,timelineType:d});if(o!==_.c.HAS_MORE)return Promise.resolve();return s.b(n,{params:f,request:i.DirectMessages.fetchInboxHistory})({actionTypes:l,context:"FETCH_DM_INBOX_HISTORY",meta:{timelineType:t}},(function(e){if(e){var n,r=e.entities,a=r.entries,i=r.users,s=r.tweets,c=r.cards,o=e.result.inbox_timeline;return tt({conversations:o.conversations,inbox_timelines:(n={},n[t]=o,n),entries:a,users:i,tweets:s,cards:c})}}))}},z=function(t){return function(e,n){var r=R(t,n(),"high");return e(Y(y,r))}},J=function(t){return function(e,n){var r=R(t,n(),"low");return e(Y(S,r))}},Z=function(t){return function(e,n){var r=R(t,n());return e(Y(T,r))}},X=Object(v.c)("UPDATE_INBOX"),$=function(t){return{payload:{cursors:t.inbox_timelines,lastSeenEventIds:i()(t,["inbox_timelines"])},type:X}},tt=function(t){void 0===t&&(t={});var e=t,n=e.conversations,r=e.entries,a=e.users,s=e.tweets,u=e.cards,_=e.cursor,f=i()(e,["conversations","entries","users","tweets","cards","cursor"]);return[Object(c.c)({cards:u,tweets:s,users:a}),!Object(d.a)(n)&&Object(E.c)(n),!Object(d.a)(r)&&Object(o.a)(r),!Object(d.a)(_)&&Object(O.f)(_),!Object(d.a)(f)&&$(f)].filter((function(t){return t}))},et=function(){return function(t){return t(rt({withTrusted:!0}))}},nt=function(){return function(t){return t(rt({withUntrusted:!0}))}},rt=function(t){var e=void 0===t?{}:t,n=e.withTrusted,r=e.withUntrusted;return function(t,e,a){var i=a.api,c=e(),o=Object(E.B)(c),u=L(c),d=u.last_seen_event_id,_=u.trusted_last_seen_event_id,f=u.untrusted_last_seen_event_id,O=Object.values(o).reduce((function(t,e){var n=e.data,r=n.sort_event_id,a=n.trusted;return t.last_seen_event_id=C(t.last_seen_event_id,r),t.trusted_last_seen_event_id=a?C(t.trusted_last_seen_event_id,r):t.trusted_last_seen_event_id,t.untrusted_last_seen_event_id=a?t.untrusted_last_seen_event_id:C(t.untrusted_last_seen_event_id,r),t}),Object.assign({},u));return Object(I.b)(O.last_seen_event_id,d)||n&&Object(I.b)(O.trusted_last_seen_event_id,_)||r&&Object(I.b)(O.untrusted_last_seen_event_id,f)?(n||delete O.trusted_last_seen_event_id,r||delete O.untrusted_last_seen_event_id,s.c(t,{params:O,request:i.DirectMessages.updateLastSeenEventId})({actionTypes:A,context:"APP_DM_UPDATE_LAST_SEEN",meta:{lastSeenEventIds:O}})):Promise.resolve()}},at=Object(v.c)("POP_OUT_CONVERSATION"),it=function(t){return function(e){return e({conversationId:t,type:at})}},st=Object(v.c)("SET_DRAWER_VISIBILITY"),ct=function(t){return{visibility:t,type:st}},ot=function(t){return function(e,n,r){return r.userPersistence.set("rweb.dmDrawerVisibility",{visibility:t}),t===j.CLOSED&&e({type:at}),e(ct(t))}},ut=function(){return function(t,e,n){return n.userPersistence.get("rweb.dmDrawerVisibility").then((function(e){e&&t(ct(e.visibility))}))}},dt=Object(v.c)("SET_DRAWER_EXPERIMENT_ENABLED"),_t=function(t){return{enabled:t,type:dt}},ft=function(t){return function(e,n,r){return r.userPersistence.set("rweb.dmQuickAccessEnabled",{enabled:t}),e(_t(t))}},Ot=function(){return function(t,e,n){return n.userPersistence.get("rweb.dmQuickAccessEnabled").then((function(e){e&&t(_t(e.enabled))}))}}}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/web_legacy/loader.directMessagesData.6590ced4.js.map