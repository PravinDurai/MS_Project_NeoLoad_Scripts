(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{"1sB9":function(e,t,n){"use strict";n("IAdD"),t.__esModule=!0,t.default=void 0;var r=i(n("7DT3")),a=i(n("ERkP")),o=i(n("OkZJ"));function i(e){return e&&e.__esModule?e:{default:e}}var c=function(e){return void 0===e&&(e={}),(0,r.default)("svg",Object.assign({},e,{style:[o.default.root,e.style],viewBox:"0 0 24 24"}),a.default.createElement("g",null,a.default.createElement("path",{d:"M23.25 3.25h-2.425V.825c0-.414-.336-.75-.75-.75s-.75.336-.75.75V3.25H16.9c-.414 0-.75.336-.75.75s.336.75.75.75h2.425v2.425c0 .414.336.75.75.75s.75-.336.75-.75V4.75h2.425c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm-3.175 6.876c-.414 0-.75.336-.75.75v8.078c0 .414-.337.75-.75.75H4.095c-.412 0-.75-.336-.75-.75V8.298l6.778 4.518c.368.246.79.37 1.213.37.422 0 .844-.124 1.212-.37l4.53-3.013c.336-.223.428-.676.204-1.012-.223-.332-.675-.425-1.012-.2l-4.53 3.014c-.246.162-.563.163-.808 0l-7.586-5.06V5.5c0-.414.337-.75.75-.75h9.094c.414 0 .75-.336.75-.75s-.336-.75-.75-.75H4.096c-1.24 0-2.25 1.01-2.25 2.25v13.455c0 1.24 1.01 2.25 2.25 2.25h14.48c1.24 0 2.25-1.01 2.25-2.25v-8.078c0-.415-.337-.75-.75-.75z"})))};c.metadata={height:24,width:24};var s=c;t.default=s},"3GUV":function(e,t,n){"use strict";n("Blm6");var r=n("W/Kd"),a=n.n(r),o=n("ERkP"),i=n("rHpw"),c=n("3xO4"),s=n.n(c),l=function(e){function t(){return e.apply(this,arguments)||this}a()(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(){return!1},n.render=function(){return o.createElement(s.a,{style:d.root})},t}(o.Component),d=i.a.create((function(e){return{root:{height:5*parseInt(e.lineHeight,10)+"rem"}}}));t.a=l},"3OvD":function(e,t,n){"use strict";n("IAdD"),t.__esModule=!0,t.default=void 0;var r=i(n("7DT3")),a=i(n("ERkP")),o=i(n("OkZJ"));function i(e){return e&&e.__esModule?e:{default:e}}var c=function(e){return void 0===e&&(e={}),(0,r.default)("svg",Object.assign({},e,{style:[o.default.root,e.style],viewBox:"0 0 24 24"}),a.default.createElement("g",null,a.default.createElement("path",{d:"M19.708 22H4.292C3.028 22 2 20.972 2 19.708V7.375C2 6.11 3.028 5.083 4.292 5.083h2.146C7.633 3.17 9.722 2 12 2c2.277 0 4.367 1.17 5.562 3.083h2.146C20.972 5.083 22 6.11 22 7.375v12.333C22 20.972 20.972 22 19.708 22zM4.292 6.583c-.437 0-.792.355-.792.792v12.333c0 .437.355.792.792.792h15.416c.437 0 .792-.355.792-.792V7.375c0-.437-.355-.792-.792-.792h-2.45c-.317.05-.632-.095-.782-.382-.88-1.665-2.594-2.7-4.476-2.7-1.883 0-3.598 1.035-4.476 2.702-.16.302-.502.46-.833.38H4.293z"}),a.default.createElement("path",{d:"M12 8.167c-2.68 0-4.86 2.18-4.86 4.86s2.18 4.86 4.86 4.86 4.86-2.18 4.86-4.86-2.18-4.86-4.86-4.86zm2 5.583h-1.25V15c0 .414-.336.75-.75.75s-.75-.336-.75-.75v-1.25H10c-.414 0-.75-.336-.75-.75s.336-.75.75-.75h1.25V11c0-.414.336-.75.75-.75s.75.336.75.75v1.25H14c.414 0 .75.336.75.75s-.336.75-.75.75z"})))};c.metadata={height:24,width:24};var s=c;t.default=s},"4q8G":function(e,t,n){"use strict";var r=n("t0aI");t.a=function(e,t){var n=e.sort_event_id,a=t.sort_event_id;return n?a?Object(r.a)(a,n):1:-1}},"5UID":function(e,t,n){"use strict";var r=n("W/Kd"),a=n.n(r),o=n("ERkP"),i=n("3XMw"),c=n.n(i),s=n("rHpw"),l=(n("aWzz"),n("PARX")),d=n.n(l),u=n("3xO4"),p=n.n(u),m=c.a.e5b0063d,f=0,h=function(e){function t(){var t;return(t=e.call(this)||this)._listDomId="accessible-list-"+f,f+=1,t}return a()(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.title,r=m({title:n});return o.createElement(p.a,{accessibilityRole:"region","aria-labelledby":this._listDomId},o.createElement(d.a,{accessibilityRole:"heading","aria-level":1,nativeID:this._listDomId,style:s.a.visuallyHidden},n),o.createElement(p.a,{accessibilityLabel:r},t))},t}(o.Component);t.a=h},6116:function(e,t,n){"use strict";n("IAdD"),t.__esModule=!0,t.default=void 0;var r=i(n("7DT3")),a=i(n("ERkP")),o=i(n("OkZJ"));function i(e){return e&&e.__esModule?e:{default:e}}var c=function(e){return void 0===e&&(e={}),(0,r.default)("svg",Object.assign({},e,{style:[o.default.root,e.style],viewBox:"0 0 24 24"}),a.default.createElement("g",null,a.default.createElement("path",{d:"M22.238 2.257c-.293-.293-.768-.293-1.06 0L2.52 20.917c-.293.292-.293.767 0 1.06.146.146.338.22.53.22s.384-.073.53-.22l18.658-18.66c.293-.293.293-.767 0-1.06zM2.986 17.82c.155 0 .312-.048.446-.148.112-.083 2.752-2.104 2.708-7.248-.02-2.16.643-3.98 1.913-5.266 1.093-1.107 2.577-1.72 4.18-1.727 1.325.006 2.562.42 3.578 1.195.137.104.297.153.455.153.227 0 .45-.102.598-.295.25-.33.188-.8-.142-1.052-1.278-.975-2.828-1.493-4.483-1.5h-.003c-2.008.008-3.87.78-5.248 2.173-1.536 1.551-2.368 3.8-2.348 6.332.037 4.33-2.02 5.967-2.103 6.03-.332.247-.4.718-.154 1.05.147.2.374.303.603.303zm16.844-7.382c.002-.246-.003-.487-.017-.723-.024-.414-.387-.74-.792-.706-.413.023-.728.378-.705.79.012.205.017.413.015.624-.024 2.868.785 4.765 1.526 5.896h-8.314c-.414 0-.75.336-.75.75s.336.75.75.75h3.522c-.1 1.48-1.323 2.66-2.828 2.66-1.003 0-1.913-.514-2.436-1.372-.214-.354-.675-.467-1.03-.25-.354.214-.467.675-.25 1.03.795 1.31 2.185 2.09 3.716 2.09 2.332 0 4.227-1.85 4.328-4.158h4.922c.32 0 .604-.206.707-.51.104-.305 0-.643-.255-.84-.087-.066-2.145-1.7-2.108-6.032z"})))};c.metadata={height:24,width:24};var s=c;t.default=s},"7oQg":function(e,t,n){"use strict";n.r(t);n("KqXw"),n("WNMA"),n("MvUL");var r=n("W/Kd"),a=n.n(r),o=n("ERkP"),i=n("RqPI"),c=n("uDfI"),s=n("3nOA"),l=n("0KEI"),d=n("hqKg"),u=n("GOQE"),p=n("kGix"),m=n("v//M"),f=n("fs1G"),h=(n("aWzz"),n("G6rE")),v=Object(d.createSelector)([i.g,function(e,t){return t.match.params.screenName},function(e,t){return h.e.selectIdByScreenName(e,t.match.params.screenName)}],(function(e,t,n){return{conversationId:e&&n?Object(s.a)(e,n):null,screenName:t}})),b={createLocalApiErrorHandler:Object(l.d)("CREATE_CONVERSATION"),fetchOneByScreenNameWithExtraFieldsIfNeeded:h.e.createFetchOneByScreenNameWithExtraFieldsIfNeeded([h.a,h.d])},g=function(e){function t(){return e.apply(this,arguments)||this}a()(t,e);var n=t.prototype;return n.UNSAFE_componentWillMount=function(){var e=this.props,t=e.createLocalApiErrorHandler,n=e.fetchOneByScreenNameWithExtraFieldsIfNeeded,r=e.history;n(e.screenName).catch((function(e){t(u.a)(e),r.replace("/messages")}))},n.UNSAFE_componentWillReceiveProps=function(e){var t=e.conversationId,n=e.history;t&&n.replace("/messages/"+t)},n.render=function(){return o.createElement(m.a,{fetchStatus:p.a.LOADING,render:f.a})},t}(o.Component);t.default=Object(c.b)(v,b)(g)},BUB3:function(e,t,n){"use strict";n("IAdD");var r=n("LdEA"),a=n.n(r),o=n("ERkP"),i=n("sNn6"),c=n("rHpw"),s=n("3xO4"),l=n.n(s),d=c.a.create((function(e){return{activeRoot:{backgroundColor:e.colors.faintGray},overlay:Object.assign({},c.a.absoluteFillObject,{borderRightStyle:"solid",borderRightWidth:e.borderWidths.medium,borderRightColor:e.colors.primary,zIndex:1})}}));t.a=function(e){var t=e.children,n=a()(e,["children"]);return o.createElement(i.a,n,(function(e){return o.createElement(l.a,{style:[e&&d.activeRoot]},"function"==typeof t?t(e):t,e?o.createElement(l.a,{pointerEvents:"none",style:d.overlay}):null)}))}},CFcj:function(e,t,n){"use strict";n.r(t),n.d(t,"ConversationGroupInfoScreen",(function(){return z}));n("lTEL"),n("7x/C"),n("JtPf"),n("KqXw"),n("87if"),n("MvUL"),n("kYxP");var r=n("1Pcy"),a=n.n(r),o=n("W/Kd"),i=n.n(o),c=n("KEM+"),s=n.n(c),l=n("ERkP"),d=(n("WNMA"),n("MMRb")),u=n("AspN"),p=n("RqPI"),m=n("oEGd"),f=n("0KEI"),h=n("hqKg"),v=n("p9G8"),b=n("AQOc"),g=n("/NU0"),E=n("QK5w"),_=n("G6rE"),y=function(e,t){return t.match.params.conversationId},I=Object(h.createSelector)((function(e,t){return d.selectConversation(e,y(0,t))}),d.selectEntries,E.a,y,(function(e,t){return d.selectConversationFetchStatus(e,y(0,t))}),p.g,_.e.selectAll,(function(e,t){var n=d.selectConversationAvatarMediaId(e,y(0,t));return(Object(g.a)(n)?u.g(e,n):[])[0]}),(function(e,t){return d.selectConversationAvatarMediaIsUploading(e,y(0,t))}),(function(e,t){return d.selectConversationAvatarMediaUploadProgress(e,y(0,t))}),(function(e,t,n,r,a,o,i,c,s,l){var d=e&&e.data,u=d&&Object(b.b)(d,t,i),p=u&&Object(v.a)(u,o);if(!o)throw new Error("logged-in user not found");return{avatarMedia:c,conversation:u,canGoBack:n,conversationId:r,fetchStatus:a,isUploading:s,groupName:p,mediaUploadProgress:l,perspective:o}})),C={addAvatarMedia:d.addAvatarMedia,createLocalApiErrorHandler:Object(f.d)("CONVERSATION_GROUP_INFO_SCREEN"),fetchConversation:d.fetchConversation,fetchConversationIfNeeded:d.fetchConversationIfNeeded,removeAvatarMedia:d.removeAvatarMedia,removeMediaUpload:u.e,setConversationAvatar:d.setConversationAvatar,updateConversationName:d.updateConversationName},w=Object(m.g)(I,C),S=n("7JQg"),O=n("I2k/"),M=n("aA19"),x=n("v//M"),A=n("jHSc"),P=n("3XMw"),N=n.n(P),k=n("mN6z"),T=n("P68U"),D=n("eyty"),R=n("3xO4"),B=n.n(R),j=n("0yYu"),L=n("mw9i"),U=n("/yvb"),F=n("JYMr"),G=n("p+r5"),H=n("rHpw"),W=N.a.abd845fd,V=N.a.d87bff5a,K=N.a.i2209530,q=N.a.cabb453d,z=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,s()(a()(r),"_renderContent",(function(){return l.createElement(B.a,null,r._renderGroupAvatarPicker(),l.createElement(j.a,null),r._renderGroupNameEditor())})),s()(a()(r),"_handleFetch",(function(){var e=r.props,t=e.createLocalApiErrorHandler,n=e.conversationId;(0,e.fetchConversationIfNeeded)({conversationId:n}).catch(t(Object(O.a)(n)))})),s()(a()(r),"_handleGroupNameUpdated",(function(e){r.setState({groupNameEdit:e.target.value})})),s()(a()(r),"_handleSavePress",(function(){r._savePress()})),s()(a()(r),"_savePress",(function(){var e=r.props,t=e.avatarMedia,n=e.canGoBack,a=e.conversationId,o=e.createLocalApiErrorHandler,i=e.fetchConversation,c=e.groupName,s=e.history,l=e.setConversationAvatar,d=e.updateConversationName,u=r.state.groupNameEdit,p=[];return t&&p.push(l(a).catch(o())),u&&c!==u&&p.push(d({conversationId:a,name:u}).catch(o({showToast:!0}))),Promise.all(p).then((function(){i({conversationId:a}).catch(o(Object(O.a)(a))),n?s.goBack():s.replace("/messages/"+a+"/info")}),(function(){return t&&r._clearAvatarMedia(t.id)}))})),s()(a()(r),"_handleAvatarMediaChange",(function(e){var t=e[0],n=r.props,a=n.addAvatarMedia,o=n.avatarMedia,i=n.conversationId;o&&r._clearAvatarMedia(o.id),a(i,t)})),s()(a()(r),"_handleMediaFailure",(function(e){r._clearAvatarMedia(e)})),r.state={groupNameEdit:t.groupName},r}i()(t,e),t.getDerivedStateFromProps=function(e,t){var n=e.groupName;return"string"==typeof n&&null===t.groupNameEdit?{groupNameEdit:n}:null};var n=t.prototype;return n.componentDidMount=function(){this._handleFetch()},n.componentWillUnmount=function(){var e=this.props.avatarMedia;e&&this._clearAvatarMedia(e.id)},n.shouldComponentUpdate=function(e,t){return!Object(k.a)(e,this.props)||!Object(k.a)(t,this.state)},n.render=function(){var e=this.props,t=e.fetchStatus,n=e.conversationId,r=e.history,a=e.location;return l.createElement(A.b,{backLocation:"/messages/"+n+"/info",history:r,location:a,rightControl:this._renderRightControl(),title:W},l.createElement(L.a,{style:Q.root},l.createElement(x.a,{accessibilityLabel:V,fetchStatus:t,onRequestRetry:this._handleFetch,render:this._renderContent})))},n._renderRightControl=function(){var e=this.props,t=e.avatarMedia,n=e.groupName,r=e.isUploading,a=this.state.groupNameEdit,o=r||!(a&&a!==n||t);return l.createElement(U.a,{children:K,disabled:o,onPress:this._handleSavePress,size:"normalCompact",type:"primary"})},n._renderGroupAvatarPicker=function(){var e=this.props,t=e.avatarMedia,n=e.conversation,r=e.mediaUploadProgress,a=e.perspective,o=l.createElement(M.a,{conversation:n,perspective:a});return l.createElement(B.a,null,l.createElement(F.a,{progress:r}),l.createElement(B.a,{style:Q.avatarContainerRoot},l.createElement(T.a,{borderRadius:"infinite",currentContent:o,location:D.c.Avatar,mediaItem:t||void 0,onChange:this._handleAvatarMediaChange,onFailure:this._handleMediaFailure,rootStyle:Q.avatarContainer})))},n._renderGroupNameEditor=function(){return l.createElement(G.a,{label:q,maxLength:50,name:"groupNameEdit",onChange:this._handleGroupNameUpdated,style:Q.groupNameEditor,value:this.state.groupNameEdit||""})},n._clearAvatarMedia=function(e){var t=this.props,n=t.avatarMedia,r=t.conversationId,a=t.removeAvatarMedia,o=t.removeMediaUpload;n&&n.uploading||o(e),a(r,e)},t}(l.Component);s()(z,"defaultProps",{canGoBack:!1});var Q=H.a.create((function(e){return{root:{backgroundColor:e.colors.faintGray},avatarContainerRoot:{alignItems:"center",backgroundColor:e.colors.cellBackground,paddingVertical:e.spaces.medium},groupNameEditor:{backgroundColor:e.colors.cellBackground},avatarContainer:{height:"calc(5 * "+e.spaces.medium+")",width:"calc(5 * "+e.spaces.medium+")"}}}));t.default=Object(S.c)({page:"messages",section:"group_settings"})(w(z))},EPsT:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("1Pcy"),a=n.n(r),o=n("W/Kd"),i=n.n(o),c=n("KEM+"),s=n.n(c),l=n("ERkP"),d=n("jtO7"),u=n("eb3s"),p=function(e){function t(t){var n;return n=e.call(this,t)||this,s()(a()(n),"_handleClick",(function(e){n.setState({showConfirmation:!0})})),s()(a()(n),"_handleCancel",(function(){n.setState({showConfirmation:!1})})),s()(a()(n),"_handleConfirm",(function(){n.setState({showConfirmation:!1}),n.props.onConfirmationSheetConfirm()})),n.state={showConfirmation:!1},n}return i()(t,e),t.prototype.render=function(){var e=this.props,t=e.color,n=e.confirmationSheetConfirmButtonLabel,r=e.confirmationSheetHeadline,a=e.confirmationSheetText,o=e.label,i=e.confirmationSheetConfirmButtonType,c=e.withBottomBorder;return l.createElement(l.Fragment,null,l.createElement(d.a,{color:t,label:o,onPress:this._handleClick,withBottomBorder:c}),this.state.showConfirmation?l.createElement(u.a,{confirmButtonLabel:n,confirmButtonType:i,headline:r,onCancel:this._handleCancel,onConfirm:this._handleConfirm,text:a}):null)},t}(l.Component);s()(p,"defaultProps",{color:"red"})},H9O4:function(e,t,n){"use strict";n("IAdD"),t.__esModule=!0,t.default=void 0;var r=c(n("7DT3")),a=c(n("/uF9")),o=c(n("ERkP")),i=c(n("OkZJ"));function c(e){return e&&e.__esModule?e:{default:e}}var s=function(e){return void 0===e&&(e={}),(0,r.default)("svg",Object.assign({},e,{style:[i.default.root,e.style,a.default.isRTL&&i.default.iconRtl],viewBox:"0 0 24 24"}),o.default.createElement("g",null,o.default.createElement("path",{d:"M19.687 22H7.813C6.538 22 5.5 20.962 5.5 19.687v-4.452c0-.414.336-.75.75-.75s.75.335.75.75v4.45c0 .45.365.815.813.815h11.873c.448 0 .813-.365.813-.813V7.813c0-.448-.365-.813-.813-.813h-4.452c-.414 0-.75-.336-.75-.75s.336-.75.75-.75h4.452C20.962 5.5 22 6.538 22 7.813v11.873C22 20.962 20.962 22 19.687 22z"}),o.default.createElement("path",{d:"M11.25 4.045c-.414 0-.75.336-.75.75V9.44L3.064 2.004c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06L9.438 10.5H4.804c-.414 0-.75.336-.75.75s.336.75.75.75h6.445c.414 0 .75-.336.75-.75V4.795c0-.414-.336-.75-.75-.75z"})))};s.metadata={height:24,width:24};var l=s;t.default=l},M2mT:function(e,t,n){"use strict";n("i4UL");var r=n("LdEA"),a=n.n(r),o=n("W/Kd"),i=n.n(o),c=n("KEM+"),s=n.n(c),l=n("+/5o"),d=n("ERkP"),u=n("HPNB"),p=n("VAZu"),m=n("wiP2"),f=n("3xLC"),h=n("Es6L"),v=(n("IAdD"),n("rHpw")),b=v.a.create((function(e){return{fill:{flex:1,alignSelf:"stretch"},viewportView:Object.assign({},v.a.absoluteFillObject,{overflowY:"auto"}),appBarContainer:{backfaceVisibility:"hidden",position:"sticky",top:0,zIndex:1}}})),g=n("3xO4"),E=n.n(g),_=n("yw4N"),y=n("TnY3"),I=n("cHvH"),C=function(e){function t(){return e.apply(this,arguments)||this}i()(t,e);var n=t.prototype;return n.render=function(){var e=this;return d.createElement(I.a,null,(function(t){var n=t.windowWidth;return u.a.isTwoColumnLayout(n)?e._renderForTwoColumnLayout():e._renderForOneColumnLayout()}))},n._renderForOneColumnLayout=function(){var e=this.props,t=e.children,n=(e.leftControl,e.screenType,e.showSubtitleOnWideDetail,e.withDetailOpen,a()(e,["children","leftControl","screenType","showSubtitleOnWideDetail","withDetailOpen"]));return d.createElement(d.Fragment,null,Object(h.a)()?this._renderInlineNav({isTwoColumnLayout:!1}):d.createElement(m.a.Configure,n),t)},n._renderForTwoColumnLayout=function(){return d.createElement(d.Fragment,null,this._renderInlineNav({isTwoColumnLayout:!0}),this._renderChildren())},n._renderInlineNav=function(e){var t=e.isTwoColumnLayout,n=this.props,r=n.TeamsSwitcher,a=n.TabBar,o=n.backLocation,i=n.documentTitle,c=n.headerless,s=n.history,u=n.leftControl,f=n.location,h=n.onBackClick,v=n.rightControl,g=n.screenType,_=n.searchBoxOptions,y=n.secondaryBar,I=n.showSubtitleOnWideDetail,C=n.subtitle,w=n.title,S=n.titleIconCell,O=n.titleIconCellSize,M=n.withDetailOpen,x=n.withSearchBox,A=n.withTweetButton,P="root"===g,N="secondaryRoot"===g,k="primaryDetail"===g,T=P||k&&t,D=P?l.k:k?l.d:void 0,R=d.createElement(E.a,{style:b.appBarContainer},d.createElement(p.a,{backLocation:o,fixed:!1,hideBackButton:T,history:s,leftControl:u,location:f,onBackClick:h,rightControl:v,subtitle:k&&I?C:void 0,title:w,titleDomId:D,titleIconCell:S,titleIconCellSize:O,withBottomBorder:!y})),B=P||N&&M?null:d.createElement(m.a.Configure,{TabBar:a,TeamsSwitcher:r,backLocation:o,documentTitle:i,headerless:c,onBackClick:h,rightControl:v,searchBoxOptions:_,subtitle:C,title:w,withSearchBox:x,withTweetButton:A});return d.createElement(d.Fragment,null,B,R,y)},n._renderChildren=function(){var e=this.props.children;return this.context.rootDetailPerColumnScroll?d.createElement(E.a,{style:b.fill},d.createElement(_.a,{style:b.viewportView},e)):e},t}(d.Component);s()(C,"contextType",f.a),s()(C,"defaultProps",{screenType:"secondaryDetail",showSubtitleOnWideDetail:!0});t.a=Object(y.a)(C)},P68U:function(e,t,n){"use strict";n("2G9S"),n("hBpG"),n("hCOa"),n("jQ3i"),n("z84I"),n("x4t0"),n("87if");var r=n("1Pcy"),a=n.n(r),o=n("W/Kd"),i=n.n(o),c=n("KEM+"),s=n.n(c),l=n("ERkP"),d=n("oEGd"),u=n("AspN"),p={addMedia:u.b,processMultipleMedia:u.d},m=Object(d.b)(p),f=n("3XMw"),h=n.n(f),v=n("3OvD"),b=n.n(v),g=n("l2F/"),E=n.n(g),_=n("pKoL"),y=n("3xO4"),I=n.n(y),C=n("rFBM"),w=n("/yvb"),S=n("9Xij"),O=n("rHpw"),M=n("VPdC"),x=h.a.b87ca51a,A=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,s()(a()(t),"_getAcceptedFileInputs",(function(){var e=t.props,n=e.acceptGifs,r=e.acceptVideo;return Object(M.b)({acceptGifs:n,acceptVideo:r})})),s()(a()(t),"_handleAddMediaFiles",(function(e){var n=t.props,r=n.addMedia,a=n.location,o=n.onChange,i=n.onFailure,c=n.processMultipleMedia,s=t._getAcceptedFileInputs(),l=Array.from(e).find((function(e){return s.includes(e.type)}));l&&r([l],{location:a}).then((function(e){o&&o(e.map((function(e){return e.id}))),c(e,{onFailure:i})}))})),t}i()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.borderRadius,n=e.maskStyle,r=e.mediaItem,a=e.onRemove,o=e.rootStyle,i=r&&!r.uploader;return l.createElement(I.a,{style:[N.container,o,P[t]]},l.createElement(C.a,{onFilesAdded:this._handleAddMediaFiles,style:[N.dragDropContainer,P[t]]},this._renderPreview(),i?null:l.createElement(l.Fragment,null,l.createElement(I.a,{style:[N.mask,n,P[t]]}),l.createElement(I.a,{style:N.mediaPicker},this._renderMediaPicker(),a?this._renderMediaRemove():null))))},n._renderMediaRemove=function(){var e=this.props.onRemove;return l.createElement(w.a,{accessibilityLabel:x,icon:l.createElement(E.a,null),onPress:e,style:N.remove,type:"invertedText"})},n._renderMediaPicker=function(){var e=this.props,t=e.acceptGifs,n=e.acceptVideo,r=e.accessibilityLabel;return l.createElement(M.a,{acceptGifs:t,acceptVideo:n,accessibilityLabel:r,icon:l.createElement(b.a,null),onChange:this._handleAddMediaFiles,type:"invertedText"})},n._renderPreview=function(){var e=this.props,t=e.aspectRatio,n=e.borderRadius,r=e.currentContent,a=e.mediaItem;return a?l.createElement(S.a,{ratio:t},l.createElement(_.a,{borderRadius:n,enableGif:!1,mediaItem:a,style:N.mediaPreview,withCloseButton:!1})):r},t}(l.Component);s()(A,"defaultProps",{acceptGifs:!1,acceptVideo:!1,aspectRatio:1,borderRadius:"none"});var P=O.a.create((function(e){return{infinite:{borderRadius:e.borderRadii.infinite},medium:{borderRadius:e.borderRadii.medium},none:{borderRadius:0}}})),N=O.a.create((function(e){return{mediaPreview:{height:"100%"},mediaPicker:{alignItems:"center",flexDirection:"row",height:"100%",justifyContent:"center",opacity:.75,position:"absolute",top:0,width:"100%"},remove:{marginLeft:e.spaces.large},mask:{backgroundColor:e.colors.translucentBlack30,height:"100%",position:"absolute",top:0,width:"100%"},container:{justifyContent:"center",overflow:"hidden"},dragDropContainer:{borderWidth:e.borderWidths.medium,borderColor:e.colors.transparent,borderStyle:"solid"}}}));t.a=m(A)},TEoO:function(e,t,n){"use strict";var r=n("LdEA"),a=n.n(r),o=n("ERkP"),i=n("5UID"),c=n("3GUV"),s=n("iBK2"),l=o.createElement(c.a,null),d=function(e){var t=e.accessibilityTitle,n=a()(e,["accessibilityTitle"]),r=o.createElement(s.b,n);return t?o.createElement(i.a,{title:t},r):r};d.defaultProps={footer:l},t.a=d},VV6P:function(e,t,n){"use strict";n.r(t),n.d(t,"DMLowQualityUntrustedInboxScreen",(function(){return P}));n("2G9S"),n("KqXw"),n("WNMA"),n("uFXj");var r=n("1Pcy"),a=n.n(r),o=n("W/Kd"),i=n.n(o),c=n("KEM+"),s=n.n(c),l=n("ERkP"),d=n("HPNB"),u=n("7JQg"),p=n("qz2E"),m=n("qS4/"),f=n("3XMw"),h=n.n(f),v=n("f42t"),b=n("M2mT"),g=n("zML4"),E=(n("AxOO"),n("3xO4")),_=n.n(E),y=n("cHvH"),I=n("t62R"),C=n("FIs5"),w=n("rHpw"),S=(n("aWzz"),n("hl/W")),O=h.a.e7172d70,M=h.a.bef0039f,x=h.a.a5359aac,A={page:"messages",section:"inbox",component:"low_quality_timeline"},P=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,s()(a()(t),"_renderStickyCopy",(function(){var e=t.props.conversationIds;return l.createElement(y.a,null,(function(t){var n=t.windowWidth,r=d.a.isTwoColumnLayout(n),a=0===e.length;return r||a?null:l.createElement(_.a,{style:N.stickyCopyContainer},l.createElement(I.c,{style:N.stickyCopy},x))}))})),s()(a()(t),"_renderSettingsAppBarButton",(function(){return l.createElement(g.a,{to:"/settings/safety"})})),s()(a()(t),"_renderEmptyDMInbox",(function(){return l.createElement(C.a,{header:M,message:x})})),s()(a()(t),"_handleBackClick",(function(){t.props.history.push("/messages/requests")})),s()(a()(t),"_hasDetailOpen",(function(){return!t.props.match.isExact})),t}return i()(t,e),t.prototype.render=function(){var e=this.props,t=e.conversationIds,n=e.createLocalApiErrorHandler,r=e.fetchInbox,a=e.fetchInboxHistory,o=e.fetchInboxIfNeeded,i=e.fetchStatus,c=e.fetchUpdates,s=e.googleAnalyticsPageView,d=e.isRefreshing,u=e.scribeAction,p=e.scribePageImpression,f=e.updateLastSeenEventId;return l.createElement(b.a,{backLocation:"/messages/requests",onBackClick:this._handleBackClick,rightControl:this._renderSettingsAppBarButton(),screenType:"secondaryRoot",title:O,withDetailOpen:this._hasDetailOpen()},l.createElement(m.a,{accessibilityTitle:O,conversationIds:t,conversationPathPrefix:"/messages/requests/additional",createLocalApiErrorHandler:n,fetchInbox:r,fetchInboxHistory:a,fetchInboxIfNeeded:o,fetchStatus:i,fetchUpdates:c,googleAnalyticsPageView:s,isRefreshing:d,isTertiaryInbox:!0,renderEmptyDMInbox:this._renderEmptyDMInbox,renderStickyContent:this._renderStickyCopy,scribeAction:u,scribeNamespace:A,scribePageImpression:p,updateLastSeenEventId:f,virtualScrollerCacheKey:"dmLowQualityUntrustedInbox"}))},t}(l.Component),N=w.a.create((function(e){return{stickyCopyContainer:{backgroundColor:e.colors.cellBackground,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,borderBottomColor:e.colors.borderColor,zIndex:1},stickyCopy:{color:e.colors.deepGray,padding:e.spaces.medium}}})),k=Object(v.a)(Object(u.c)(A)(Object(S.b)({inbox:S.a.tertiary})(P)),{directMessages:p.a});t.default=k},XG7v:function(e,t,n){"use strict";n.r(t),n.d(t,"DMComposeScreen",(function(){return ie}));n("2G9S"),n("DfhM"),n("i4UL"),n("LW0h"),n("hBpG"),n("7xRU"),n("z84I"),n("M+/F"),n("ho0z"),n("IAdD"),n("7x/C"),n("JtPf"),n("KqXw"),n("MvUL");var r=n("1Pcy"),a=n.n(r),o=n("W/Kd"),i=n.n(o),c=n("KEM+"),s=n.n(c),l=n("ERkP"),d=n("aWzz"),u=n("7JQg"),p=n("s14A"),m=n("uB9N"),f=n("3nOA"),h=n("jHSc"),v=n("wO1l"),b=n("p9G8"),g=n("AQOc"),E=n("3XMw"),_=n.n(E),y="nextButton",I=n("aITJ"),C=n("2dXj"),w=n("3xO4"),S=n.n(w),O=n("/yvb"),M=n("I7xG"),x=n("w9LO"),A=n("rHpw"),P=n("zh9S"),N=n("MMRb"),k=n("VnFT"),T=n("1YZw"),D=n("oEGd"),R=n("0KEI"),B=n("hqKg"),j=n("tn7R"),L=n("Hw0q"),U=n("RqPI"),F=n("X/yg"),G=n("G6rE"),H=Object(L.b)("text"),W=Object(L.b)("recipient_id"),V=Object(B.createSelector)(N.selectConversations,(function(e){return Object(j.a)(e).filter((function(e){return!e.isDeleted&&e.data})).map((function(e){return e.data}))})),K=Object(B.createSelector)(V,H,U.g,F.d,G.e.selectAll,W,(function(e,t,n,r,a,o){if(!n)throw new Error("logged-in user not found");return{conversations:e,initialMessage:t,perspective:n,recipientId:o,tweetAttachment:r,users:a}})),q={addToast:T.b,createLocalApiErrorHandler:Object(R.d)("DIRECT_MESSAGES_COMPOSE"),fetchConversationFromParticipants:N.fetchConversationFromParticipants,fetchInboxIfNeeded:N.fetchInboxIfNeeded,popOutConversation:N.popOutConversation,scribeAction:P.c,sendMessage:k.n},z=Object(D.g)(K,q),Q=n("883S"),X=n("GZwR"),$={page:"messages",section:"compose",component:"dm"},J=_.a.de4669e2,Z=_.a.cdcebd22,Y=_.a.j9e025aa,ee=_.a.c64c1883,te=_.a.f277e949,ne=_.a.a2ccb2e7,re=_.a.e3275464,ae=_.a.c1df579e,oe=_.a.e1bde73e,ie=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,s()(a()(r),"_composer",l.createRef()),s()(a()(r),"_setDisableFocusingPreviousActiveElement",(function(e){var t=e.disableFocusingPreviousActiveElement;r._disableFocusingPreviousActiveElement=t})),s()(a()(r),"_renderAppBarRightControl",(function(){var e=r.props.tweetAttachment?re:ae;return l.createElement(S.a,{style:se.rightColumn},l.createElement(O.a,{disabled:0===r.state.participants.length,onPress:r._handleConversationRouting,size:"normalCompact",style:se.button,testID:y,type:"primary"},e))})),s()(a()(r),"_getItemIsDisabled",(function(e){var t=r.state,n=t.isGroupSelected,a=t.participants,o=e.data,i=e.type;return(!n||a[0].id!==e.id)&&(!!(n||i===X.b.DMConversation&&a.length>0)||i===X.b.User&&!(o.can_dm||o.is_dm_able))})),s()(a()(r),"_getItemDisabledMessage",(function(e){return oe({screenName:e.data.screen_name})})),s()(a()(r),"_getInjections",Object(M.a)(a()(r),(function(e){return e.conversations}),(function(e){return e.perspective}),(function(e,t){return t.query}),(function(e,t,n){return Object(v.a)(n,e.map((function(e){return Object(g.b)(e,void 0,r.props.users)})),t).slice(0,12)}))),s()(a()(r),"_handleQueryChange",(function(e){r.setState({query:e})})),s()(a()(r),"_handleSuggestionSelected",(function(e){var t=r.props.perspective,n=r.state,a=n.isGroupSelected,o=n.participants;if(a)e.id===o[0].id&&r._handleRemoveParticipant(e);else if(e.type===X.b.DMConversation)if(r._isShareViaDM())r._createConversationObjectForSelectionPill(e);else{var i=ce(e,t);r._goToConversation(i)}else r._handleParticipantToggle(e)})),s()(a()(r),"_createConversationObjectForSelectionPill",(function(e){var t=r.props,n=t.conversations,a=t.perspective,o=t.users,i=n.find((function(t){return e.id===t.conversation_id}));if(i){var c=Object(g.b)(i,void 0,o),s=Object(b.a)(c,a);e.data=Object.assign({},e.data,c,{name:s}),r.setState({isGroupSelected:!0,participants:[e]})}})),s()(a()(r),"_handleParticipantToggle",(function(e){var t=r.state.participants;if(t.find((function(t){return t.id===e.id})))r._handleRemoveParticipant(e);else{var n=t.concat(e);r.setState({participants:n})}})),s()(a()(r),"_handleRemoveParticipant",(function(e){var t=e.type,n=r.state.participants.filter((function(t){return t.id!==e.id}));t===X.b.DMConversation&&r.setState({isGroupSelected:!1}),r.setState({participants:n})})),s()(a()(r),"_handleConversationRouting",(function(){r.props.tweetAttachment?r._handleShareTweet():r._handleCreateConversation()})),s()(a()(r),"_getExistingGroupConversationFromCache",(function(e){return r.props.conversations.find((function(t){var n=t.participants.length-1;return!t.name&&n===e.length&&e.every((function(e){return Boolean(t.participants.find((function(t){return e.id===t.user_id})))}))}))})),s()(a()(r),"_getExistingGroupConversationFromApi",(function(e){var t=e.map((function(e){return e.id})).join(",");return r.props.fetchConversationFromParticipants(t)})),s()(a()(r),"_getExistingGroupConversation",(function(e){if(e.length<=1)return Promise.resolve();var t=r._getExistingGroupConversationFromCache(e);return t?Promise.resolve(t):r._getExistingGroupConversationFromApi(e)})),s()(a()(r),"_handleCreateConversation",(function(){var e=r.props,t=e.history,n=e.initialMessage,a=e.perspective,o=e.tweetAttachment,i=r.state.participants;if(1===i.length){var c=ce(i[0],a);r._goToConversation(c)}else{var s=r._getExistingGroupConversation(i);r._disableFocusingPreviousActiveElement&&r._disableFocusingPreviousActiveElement(),s.then((function(e){if(!e)throw new Error("No conversation found");r._goToConversation(e.conversation_id)})).catch((function(){var e;t.replace({pathname:"/messages/group",query:(e={},e.text=n,e),state:{participants:i,tweetAttachment:o,isNewGroupConversation:!0}})})),r._disableFocusingPreviousActiveElement&&r._disableFocusingPreviousActiveElement()}})),s()(a()(r),"_handleShareTweet",(function(e,t){var n=r.props,a=n.createLocalApiErrorHandler,o=n.tweetAttachment,i=n.perspective,c=r.state.participants,s=1===c.length,l=c;s&&(l=c[0]);var d={senderId:i,tweetAttachment:o,text:t},u=ce(l,i);return u?r._sendMessage(u,c,d):r._getExistingGroupConversation(c).catch(a(Q.a)).then((function(e){var t=e?e.conversation_id:null;return r._sendMessage(t,c,d)}))})),s()(a()(r),"_sendMessage",(function(e,t,n){var a=r.props,o=a.createLocalApiErrorHandler,i=a.history,c=a.sendMessage,s=Object.assign({conversationId:void 0,recipients:void 0},n);if(!e&&Array.isArray(t)){var l=t.map((function(e){if(e.type===X.b.User)return e.data.id_str})).filter(Boolean);s.recipients=l}else s.conversationId=e;var d=o(Q.b);return r.setState({isSending:!0}),c(s).then((function(e){r._displayDMMessageSentSuccessToast(e),r.setState({isSending:!1}),i.goBack()}),(function(e){r.setState({isSending:!1}),d(e)}))})),s()(a()(r),"_goToConversation",(function(e){var t,n,a,o=r.props,i=o.history,c=o.popOutConversation,s=o.initialMessage,l=o.tweetAttachment;(r._disableFocusingPreviousActiveElement&&r._disableFocusingPreviousActiveElement(),e)&&("drawer"===(null===(t=i.location)||void 0===t||null===(n=t.state)||void 0===n?void 0:n.source)?(c(e),i.goBack()):i.replace({pathname:"/messages/"+e,query:(a={},a.text=s,a),state:{tweetAttachment:l}}))})),s()(a()(r),"_displayDMMessageSentSuccessToast",(function(e){var t=r.props,n=t.addToast,a=t.scribeAction;r._isShareViaDM()&&a(Object.assign({},$,{action:"send_tweet_dm"})),n({text:ne,actionLink:"/messages/"+e,actionLabel:te})})),r.state={isGroupSelected:!1,participants:[],query:"",isSending:!1},r}i()(t,e);var n=t.prototype;return n.UNSAFE_componentWillMount=function(){var e=this.props,t=e.createLocalApiErrorHandler,n=e.history,r=e.initialMessage,a=e.location.query,o=e.perspective,i=e.recipientId;if(i){var c,s=Object(f.a)(i,o);n.replace({pathname:"/messages/"+s,query:Object.assign({},a,(c={},c.text=r,c))})}else this.props.fetchInboxIfNeeded().catch(t())},n.componentDidUpdate=function(e,t){var n=this.state.participants;this._isShareViaDM()&&t.participants.length<n.length&&this._composer.current&&this._composer.current.focus()},n.render=function(){var e=this.props,t=e.history,n=e.initialMessage,r=e.location,a=e.recipientId,o=e.scribeNamespace,i=e.tweetAttachment,c=this.context.isModal,s=this.state,d=s.isSending,u=s.participants,f=this._isShareViaDM();if(a)return null;var v=i?Y:Z;return l.createElement(h.b,{backButtonType:"close",backLocation:"/messages",containerStyle:se.fill,documentTitle:ee,history:t,location:r,rightControl:f?void 0:this._renderAppBarRightControl(),title:v},l.createElement(x.a.Context.Consumer,null,this._setDisableFocusingPreviousActiveElement),l.createElement(p.a,{style:se.fill},l.createElement(C.d,{getItemDisabledMessage:this._getItemDisabledMessage,getItemIsDisabled:this._getItemIsDisabled,injections:this._getInjections(),onQueryChange:this._handleQueryChange,onRemove:this._handleRemoveParticipant,onSelect:this._handleSuggestionSelected,selectedUsers:u,shouldAutoFocus:!f||!I.a.isIOS(),source:X.d.ComposeMessage,withCompactPills:!0}),f&&!c?l.createElement(S.a,{style:se.placeholder}):null,f?l.createElement(m.a,{canSendEmptyMessage:!!i,conversationId:"DMComposeScreen",disabled:0===u.length||d,history:t,isSending:d,isShareViaDM:!!f,isUploading:!1,mediaUploadProgress:0,onSend:this._handleShareTweet,placeholderText:J,prefillText:n,ref:this._composer,scribeNamespace:o,style:[se.shadow,!c&&se.fixToBottom],withEmojiPicker:!1,withGifPicker:!1,withMediaPicker:!1}):null))},n._isShareViaDM=function(){var e=this.props,t=e.initialMessage;return e.tweetAttachment||!!t},t}(l.Component);s()(ie,"contextTypes",{isModal:d.bool});var ce=function(e,t){return Array.isArray(e)||e.type!==X.b.DMConversation?Array.isArray(e)||e.type!==X.b.User?null:Object(f.a)(e.data.id_str,t):e.data.conversationId},se=A.a.create((function(e){return{fill:{flex:1},button:{marginLeft:e.spaces.xSmall},rightColumn:{alignItems:"center",flexDirection:"row",flexGrow:1,justifyContent:"flex-end"},shadow:{boxShadow:"0 -1px 3px rgba(0,0,0,0.12)"},placeholder:{height:46},fixToBottom:{position:"fixed",backfaceVisibility:"hidden",bottom:0,left:0,right:0,paddingBottom:A.a.iPhoneOffsetBottom}}}));t.default=Object(u.c)($)(z(ie))},XoqV:function(e,t,n){"use strict";n.r(t),n.d(t,"DMParticipantsScreen",(function(){return N}));n("2G9S"),n("z84I");var r=n("1Pcy"),a=n.n(r),o=n("W/Kd"),i=n.n(o),c=n("KEM+"),s=n.n(c),l=n("ERkP"),d=(n("KqXw"),n("WNMA"),n("MMRb")),u=n("0KEI"),p=n("hqKg"),m=n("RqPI"),f=n("oEGd"),h=function(e,t){return t.match.params.conversationId},v=Object(p.createSelector)(h,(function(e,t){return d.selectConversationFetchStatus(e,h(0,t))}),d.selectConversations,m.g,(function(e,t,n,r){if(!r)throw new Error("logged-in user not found");var a=n[e];return{conversation:a&&a.data,conversationId:e,fetchStatus:t,perspective:r}})),b={createLocalApiErrorHandler:Object(u.d)("DIRECT_MESSAGES_PARTICIPANTS"),fetchConversationIfNeeded:d.fetchConversationIfNeeded},g=Object(f.g)(v,b),E=n("7JQg"),_=n("I2k/"),y=n("v//M"),I=n("3XMw"),C=n.n(I),w=n("M2mT"),S=n("Es6L"),O=n("rHpw"),M=n("hqDb"),x=n("yw4N"),A=(n("aWzz"),C.a.g2fd3205),P=C.a.d4986f85,N=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,s()(a()(t),"_renderList",(function(){var e=t.props.conversation,n=e&&(e.participants||[]).map((function(e){return e.user_id}))||[];return l.createElement(M.a,{userIds:n,withItemBorder:!0})})),s()(a()(t),"_handleFetch",(function(){t._fetchIfNeeded(t.props.conversationId)})),t}i()(t,e);var n=t.prototype;return n.componentDidMount=function(){this._handleFetch()},n.UNSAFE_componentWillReceiveProps=function(e){this.props.conversationId!==e.conversationId&&this._fetchIfNeeded(e.conversationId)},n.render=function(){var e=this.props,t=e.fetchStatus,n=e.conversationId;return l.createElement(w.a,{backLocation:"/messages/"+n+"/info",documentTitle:P,screenType:"secondaryDetail",title:A},l.createElement(x.a,{style:[k.root,!Object(S.a)()&&k.bottomOffset]},l.createElement(y.a,{fetchStatus:t,onRequestRetry:this._handleFetch,render:this._renderList})))},n._fetchIfNeeded=function(e){var t=this.props,n=t.createLocalApiErrorHandler;(0,t.fetchConversationIfNeeded)({conversationId:e}).catch(n(Object(_.a)(e)))},t}(l.Component),k=O.a.create((function(e){return{root:{backgroundColor:e.colors.cellBackground},bottomOffset:{paddingBottom:"calc("+O.a.theme.componentDimensions.appBarHeight+" + "+O.a.iPhoneOffsetBottom+")"}}}));t.default=Object(E.c)({page:"messages",section:"view_participants"})(g(N))},cOtO:function(e,t,n){"use strict";n.r(t),n.d(t,"DMConversationScreen",(function(){return se}));n("z84I"),n("+KXO"),n("KqXw"),n("MvUL"),n("uFXj");var r=n("1Pcy"),a=n.n(r),o=n("W/Kd"),i=n.n(o),c=n("KEM+"),s=n.n(c),l=n("ERkP"),d=n("HPNB"),u=(n("WNMA"),n("zh9S")),p=n("MMRb"),m=n("VnFT"),f=n("RqPI"),h=n("oEGd"),v=n("hqKg"),b=(n("Myq3"),n("AQOc")),g=n("z2Pn"),E=n("pNZL"),_=n("G6rE"),y=n("X/yg"),I=function(e,t){return t.match.params.conversationId},C=Object(v.createSelector)((function(e,t){return p.selectConversation(e,I(0,t))}),p.selectEntries,I,y.b,f.g,y.c,y.d,_.e.selectAll,(function(e,t){return m.j(e,I(0,t))}),(function(e,t){return m.i(e,I(0,t))}),p.selectPoppedOutConversationId,p.selectDrawerVisibility,(function(e,t,n,r,a,o,i,c,s,l,d,u){var p=e&&e.data;return{conversation:p&&Object(b.a)(p,t,c),conversationId:n,isNewGroupConversation:r,isUploading:s,media:l,newConversationParticipants:o,perspective:a,poppedOutConversationId:d,dmDrawerVisibility:u}})),w=function(e){return function(t){return m.c(e,t)}},S=Object(h.d)(C,(function(e){return{cancelUpload:(t=e.match.params.conversationId,function(){return m.b(t)}),googleAnalyticsPageView:u.a,removeMedia:w(e.match.params.conversationId),scribePageImpression:u.d,setLastViewedDmInboxPath:g.h,updateTweetDetailNav:E.b,popOutConversation:p.popOutConversation,setDrawerVisibility:p.setDrawerVisibility};var t})),O=n("7JQg"),M=n("jdj2"),x=n.n(M),A=(n("uB9N"),n("Oi4X")),P=n("aA19"),N=n("SrtL"),k=n("3XMw"),T=n.n(k),D=n("rHpw"),R=n("mw9i"),B=n("FIs5"),j=T.a.a2f8105f,L=T.a.fa91f351,U=T.a.b999caa8,F=T.a.de2c3337,G=D.a.create((function(e){return{root:{alignItems:"center",justifyContent:"center",flex:1,backgroundColor:e.colors.cellBackground}}})),H=function(e){function t(){return e.apply(this,arguments)||this}return i()(t,e),t.prototype.render=function(){var e=this.props.onButtonPress;return l.createElement(R.a,{style:G.root},l.createElement(N.a,{title:j}),l.createElement(B.a,{buttonText:F,header:L,message:U,onButtonPress:e}))},t}(l.PureComponent),W=n("xPna"),V=n("wrlS"),K=n("XnpN"),q=n("E8TX"),z=n.n(q),Q=n("H9O4"),X=n.n(Q),$=n("7myi"),J=n("M2mT"),Z=(n("AxOO"),n("aITJ")),Y=n("3xO4"),ee=n.n(Y),te=(n("aWzz"),n("/yvb")),ne=n("OhSZ"),re=T.a.d4986f85,ae=T.a.e3e58b6d,oe=T.a.a9ddbb94,ie=l.createElement(z.a,null),ce=l.createElement(X.a,null),se=function(e){function t(t){var n;n=e.call(this,t)||this,s()(a()(n),"_composer",l.createRef()),s()(a()(n),"_handleConversationClose",(function(e){var t=n.props,r=t.conversation,a=t.history;(null==r?void 0:r.trusted)?a.push("/messages"):e()})),s()(a()(n),"_handlePopOutConvo",(function(){var e=n.props,t=e.conversationId;(0,e.popOutConversation)(t)})),s()(a()(n),"_handlePopInConvoFromScreen",(function(){(0,n.props.setDrawerVisibility)(W.a.CLOSED)})),s()(a()(n),"_handleInfoClick",(function(){var e=n.props,t=e.history,r=e.conversationId;r&&t.push("/messages/"+r+"/info")})),s()(a()(n),"_updateLastViewDmInboxPath",(function(){var e=n.props;(0,e.setLastViewedDmInboxPath)(e.location.pathname)}));var r=t.conversationId,o=t.history,i=t.location,c=t.isNewGroupConversation;return r||c||i.pathname!==window.location.pathname||o.replace({pathname:"/messages"}),n._showDMQuickAccess=V.a.isTrue("responsive_web_dm_quick_access_enabled"),n._showDMQuickAccessWithClose=V.a.isTrue("responsive_web_dm_quick_access_with_close_enabled"),n._showDMConversationAvatarInHeader=V.a.isTrue("responsive_web_dm_health_convo_inline_profile_info_enabled"),n}i()(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=e.googleAnalyticsPageView,n=e.scribeNamespace,r=e.scribePageImpression,a=e.updateTweetDetailNav;r(n),a(n),t(n),this._updateLastViewDmInboxPath()},n.componentDidUpdate=function(e){this.props.conversationId!==e.conversationId&&this._updateLastViewDmInboxPath()},n.render=function(){var e=this.props,t=e.conversationId,n=e.dmDrawerVisibility,r=e.history,a=e.location,o=e.poppedOutConversationId,i=e.richTextInputContext,c=e.typeaheadWrapper,s="string"==typeof a.query.text?a.query.text:void 0,d=x.a.get("window").width>=D.a.theme.breakpoints.small,u=this._showDMQuickAccess&&this._showDMQuickAccessWithClose&&t===o&&n!==W.a.CLOSED;return l.createElement(J.a,this._getNavProps(),u?l.createElement(H,{onButtonPress:this._handlePopInConvoFromScreen}):l.createElement(A.a,{conversationId:t,history:r,isWide:d,location:a,prefillText:s,richTextInputContext:i,typeaheadWrapper:c}))},n._getNavProps=function(){var e=this.props,t=e.conversation,n=e.newConversationParticipants,r=e.perspective,a=t&&Object.keys(t.participants).length?Object(ne.a)({conversation:t,perspective:r}):n?Object(ne.a)({newConversationParticipants:n,perspective:r}):re,o=t&&Object.keys(t.participants).length?l.createElement(ne.b,{conversation:t,perspective:r,titleWeight:"heavy",withScreenName:!1}):n?l.createElement(ne.b,{newConversationParticipants:n,perspective:r,titleWeight:"heavy",withScreenName:!1}):re,i=this._showDMConversationAvatarInHeader?"large":void 0,c=r&&this._showDMConversationAvatarInHeader?l.createElement(P.a,{conversation:t,perspective:r,size:i}):void 0,s=t&&t.type===p.CONVERSATION_TYPE.ONE_TO_ONE&&r&&Object(K.a)(t,r).map((function(e){return e.user.screen_name})),d=s?"@"+s[0]:void 0;return{backLocation:"/messages",onBackClick:this._handleConversationClose,documentTitle:a,rightControl:this._renderRightControl(),title:o,titleIconCell:c,titleIconCellSize:i,subtitle:d,screenType:"primaryDetail",withBottomTabBar:!1,headerless:Z.a.isKaiOS()}},n._renderRightControl=function(){var e=this.props,t=e.conversation,n=e.conversationId,r=(null==t?void 0:t.type)===p.CONVERSATION_TYPE.GROUP;return n?l.createElement(ee.a,{style:le.rightControlStyles},d.a.isTwoColumnLayout(x.a.get("window").width)&&this._showDMQuickAccess&&this._showDMQuickAccessWithClose&&l.createElement(te.a,{icon:ce,onPress:this._handlePopOutConvo,pullRight:!0,style:le.infoButton,type:"text"}),l.createElement(te.a,{accessibilityLabel:r?oe:ae,icon:ie,key:n,link:"/messages/"+n+"/info",pullRight:!0,style:le.infoButton,type:"text"})):void 0},t}(l.PureComponent);s()(se,"defaultProps",{isNewGroupConversation:!1,typeaheadWrapper:$.a});var le=D.a.create((function(e){return{root:{flexGrow:1},activity:{flexBasis:"1px",flexGrow:1,height:"100%"},kaiOSFix:{paddingBottom:20},dragDrop:{flexGrow:1},scrollView:{flexGrow:1},infoButton:{marginRight:e.spaces.xxSmall},offsetBottom:{paddingBottom:D.a.iPhoneOffsetBottom},rightControlStyles:{flexDirection:"row"}}}));t.default=Object(O.c)({page:"messages",section:"thread"})(S(se))},f42t:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n("lTEL"),n("z84I"),n("KOtZ"),n("+KXO"),n("7x/C"),n("JtPf"),n("87if"),n("kYxP");var r=n("97Jx"),a=n.n(r),o=n("W/Kd"),i=n.n(o),c=n("ERkP"),s=(n("aWzz"),function(e){function t(t){var n;return(n=e.call(this,t)||this).state={isLoaded:!1},n}i()(t,e);var n=t.prototype;return n.componentDidMount=function(){return this._isMounted=!0,this.load()},n.componentDidUpdate=function(e){return this.props.modules===e.modules?null:this.load()},n.componentWillUnmount=function(){this._isMounted=!1},n.load=function(){var e=this;this.setState({isLoaded:!1});var t=this.props.modules,n=Object.keys(t);return Promise.all(n.map((function(e){return t[e]()}))).then((function(e){return n.reduce((function(t,n,r){return t[n]=e[r],t}),{})})).then((function(t){if(!e._isMounted)return null;e.setState({modules:t,isLoaded:!0})}))},n.render=function(){var e=this.state.isLoaded?this.state.modules:{};return c.Children.only(this.props.children(e||{}))},t}(c.Component)),l=function(e,t){return function(n){return c.createElement(s,{modules:t},(function(t){return c.createElement(e,a()({},t,n))}))}}},fzwJ:function(e,t,n){"use strict";n.r(t),n.d(t,"DMAddParticipantsScreen",(function(){return ee}));n("2G9S"),n("i4UL"),n("LW0h"),n("hBpG"),n("z84I"),n("M+/F");var r=n("RhWx"),a=n.n(r),o=n("1Pcy"),i=n.n(o),c=n("W/Kd"),s=n.n(c),l=n("KEM+"),d=n.n(l),u=n("ERkP"),p=n("k49u"),m=n("VAZu"),f=(n("+KXO"),n("KqXw"),n("WNMA"),n("MMRb")),h=n("1YZw"),v=n("lnti"),b=n("0KEI"),g=n("hqKg"),E=n("RqPI"),_=n("G6rE"),y=n("oEGd"),I=function(e,t){return t.match.params.conversationId},C=Object(g.createSelector)(f.selectConversations,(function(e){return Object(v.a)(Object.keys(e).map((function(t){var n=e[t];if(!n.isDeleted)return n.data})))})),w=Object(g.createSelector)(I,C,(function(e,t){var n=f.selectConversation(e,I(0,t)),r=n&&n.data;return r&&r.participants}),(function(e,t){return f.selectConversationFetchStatus(e,I(0,t))}),E.g,_.e.selectAll,(function(e,t,n,r,a,o){if(!a)throw new Error("logged-in user not found");return{conversationId:e,conversations:t,existingParticipants:n,fetchStatus:r,perspective:a,users:o}})),S={addParticipants:f.addParticipants,addToast:h.b,createLocalApiErrorHandler:Object(b.d)("DIRECT_MESSAGES_ADD_PARTICIPANTS"),fetchConversationIfNeeded:f.fetchConversationIfNeeded},O=Object(y.g)(w,S),M=n("7JQg"),x=n("I2k/"),A=n("s14A"),P=n("kGix"),N=n("jHSc"),k=n("wO1l"),T=n("AQOc"),D=n("3XMw"),R=n.n(D),B=n("oQhu"),j={nextButton:"nextButton",searchPeople:"searchPeople"},L=n("GZwR"),U=n("2dXj"),F=n("3xO4"),G=n.n(F),H=n("/yvb"),W=n("rHpw"),V=R.a.c6026009,K=R.a.d4986f85,q=R.a.af40a8ef,z=R.a.e1bde73e,Q=R.a.e62d3c10,X=R.a.f17f716a,$=R.a.e3fc3547,J=R.a.c55f5c9a,Z=R.a.h8403fb5,Y=R.a.ja522ed3,ee=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,d()(i()(t),"state",{participantsToAdd:[],query:""}),d()(i()(t),"_renderHeader",(function(){var e=t.props,n=e.conversationId,r=e.history,a=e.location;return u.createElement(m.a,{backButtonType:"close",backLocation:"/messages/"+n,history:r,location:a,ref:t._setAppBarRef,rightControl:t._renderAppBarRightControl(),title:V,withBottomBorder:!1})})),d()(i()(t),"_renderAppBarRightControl",(function(){return u.createElement(G.a,{style:te.rightColumn},u.createElement(H.a,{disabled:0===t.state.participantsToAdd.length||t.props.fetchStatus!==P.a.LOADED,onPress:t._handleAddSelectedParticipantsToConversation,size:"normalCompact",testID:j.addPeopleButtonText,type:"primary"},q))})),d()(i()(t),"_handleQueryChange",(function(e){t.setState({query:e})})),d()(i()(t),"_handleSuggestionClicked",(function(e){var n=t.state.participantsToAdd;n.find((function(t){return t.id===e.id}))?t._handleUnselectParticipant(e):t.setState({participantsToAdd:[].concat(a()(n),[e])})})),d()(i()(t),"_handleUnselectParticipant",(function(e){var n=t.state.participantsToAdd;t.setState({participantsToAdd:n.filter((function(t){return t.id!==e.id}))})})),d()(i()(t),"_handleAddSelectedParticipantsToConversation",(function(){var e,n=t.props,r=n.addParticipants,a=n.conversationId,o=n.createLocalApiErrorHandler;r(a,t.state.participantsToAdd.map((function(e){return e.id}))).then((function(e){t._appBarRef&&t._appBarRef.goBack()}),o(((e={defaultToast:{text:Y}})[p.a.DirectMessageCannotDmOtherUser]={toast:{text:J}},e[p.a.DirectMessageGenericUserCouldNotBeAdded]={toast:{text:Z}},e[p.a.DirectMessageOtherUserNotFollowing]={toast:{text:X}},e[p.a.TargetUserNotFound]={toast:{text:Q}},e[p.a.TieredActionTweetSpammer]={toast:{text:$}},e.showToast=!0,e)))})),d()(i()(t),"_getInjections",Object(B.a)((function(e,t,n,r){return Object(k.b)(n,e.map((function(e){return Object(T.b)(e,void 0,r)})),t).slice(0,12)}))),d()(i()(t),"_getItemIsDisabled",(function(e){var t=e.data;return!(t.can_dm||t.is_dm_able)})),d()(i()(t),"_getItemDisabledMessage",(function(e){return z({screenName:e.data.screen_name})})),d()(i()(t),"_setAppBarRef",(function(e){t._appBarRef=e})),t}s()(t,e);var n=t.prototype;return n.UNSAFE_componentWillMount=function(){var e=this.props,t=e.createLocalApiErrorHandler,n=e.conversationId;(0,e.fetchConversationIfNeeded)({conversationId:n}).catch(t(Object(x.a)(n)))},n.render=function(){var e=this.props,t=e.conversations,n=e.existingParticipants,r=e.location,a=e.perspective,o=e.users,i=this.state.query,c=n&&n.map((function(e){return e.user_id}));return u.createElement(N.b,{containerStyle:te.fill,documentTitle:K,location:r,renderHeader:this._renderHeader},u.createElement(A.a,{style:te.fill},u.createElement(U.d,{getItemDisabledMessage:this._getItemDisabledMessage,getItemIsDisabled:this._getItemIsDisabled,injections:this._getInjections(t,a,i,o),onQueryChange:this._handleQueryChange,onRemove:this._handleUnselectParticipant,onSelect:this._handleSuggestionClicked,preselectedUsers:c,selectedUsers:this.state.participantsToAdd,source:L.d.ComposeMessage,withCompactPills:!0})))},t}(u.Component);d()(ee,"defaultProps",{existingParticipants:[]});var te=W.a.create((function(e){return{fill:{flex:1},rightColumn:{flexDirection:"row",flexGrow:1,justifyContent:"flex-end",alignItems:"center"}}}));t.default=Object(M.c)({page:"messages",section:"add_participants"})(O(ee))},"hl/W":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n("LW0h"),n("z84I"),n("tQbP"),n("7x/C"),n("1IsZ"),n("JtPf");var r=n("zh9S"),a=n("MMRb"),o=n("P1r1"),i=n("oEGd"),c=n("4q8G"),s=n("0KEI"),l=n("hqKg"),d=n("kGix"),u=n("tn7R"),p=n("z2Pn"),m={primary:"primary",secondary:"secondary",tertiary:"tertiary"},f=function(e,t){return"all"===e.allow_dms_from||t>0},h=function(e){return e===m.primary?a.fetchTrustedInboxHistory:e===m.secondary?a.fetchUntrustedInboxHistory:a.fetchUntrustedLowQualityInboxHistory},v=function(e){return e===m.primary?a.updateTrustedLastSeenEventId:e===m.secondary?a.updateUntrustedLastSeenEventId:function(){return function(){return Promise.resolve()}}},b=function(e,t){var n=e.low_quality?"low":"high",r=e.trusted===t.trusted;return t.filterByQuality?n===t.allowedQuality&&r:r},g=function(e,t){return t&&("HAS_MORE"===t.status||"AT_END"===t.status&&e>0)},E=function(e,t){return e===m.primary?{filterByQuality:!1,trusted:!0}:e===m.secondary?{filterByQuality:t,allowedQuality:"high",trusted:!1}:{filterByQuality:!0,allowedQuality:"low",trusted:!1}};t.b=function(e){var t=e.inbox;return Object(i.g)(function(e){return Object(l.createSelector)(a.selectFetchStatus,a.selectIsLoadingTop,a.selectConversations,a.selectUntrustedUnreadCount,a.selectUntrustedCursor,a.selectUntrustedConversationCount,a.selectUntrustedLowQualityConversationCount,a.selectUntrustedLowQualityCursor,o.f,(function(t,n,r,a,o,i,s,l,p){var h=(e===m.secondary||e===m.tertiary)&&"all"===p.allow_dms_from&&"enabled"===p.dm_quality_filter,v=E(e,h),_=!!Object.values(r).length,y=Object(u.a)(r).filter((function(e){return e.data&&!e.isDeleted&&b(e.data,v)})).map((function(e){return e.data})).sort(c.a);return{fetchStatus:_?d.a.LOADED:t,isRefreshing:_&&n,conversationIds:y.map((function(e){return e.conversation_id})),untrustedUnreadCount:a,allowUntrustedInbox:f(p,i),allowLowQualityUntrustedInbox:h&&g(s,l),isAtEndOfUntrustedInbox:"AT_END"===o.status}}))}(t),function(e){return{createLocalApiErrorHandler:Object(s.d)("DIRECT_MESSAGES_INBOX"),fetchInboxHistory:h(e),fetchInbox:a.fetchInbox,fetchInboxIfNeeded:a.fetchInboxIfNeeded,fetchUpdates:a.fetchUpdatesIfNeeded,googleAnalyticsPageView:r.a,scribeAction:r.c,scribePageImpression:r.d,setDrawerExperimentEnabled:a.setDrawerExperimentEnabled,setLastViewedDmInboxPath:p.h,updateLastSeenEventId:v(e)}}(t))}},hqDb:function(e,t,n){"use strict";n("2G9S");var r=n("97Jx"),a=n.n(r),o=n("LdEA"),i=n.n(o),c=n("1Pcy"),s=n.n(c),l=n("W/Kd"),d=n.n(l),u=n("KEM+"),p=n.n(u),m=n("ERkP"),f=n("k49u"),h=(n("LW0h"),n("vrRf"),n("KOtZ"),n("rxPX")),v=n("0KEI"),b=n("6xIQ"),g=n("kGix"),E=n("G6rE"),_=function(e,t){return t.userIds},y=function(e,t){return t.userIds.filter((function(t){return!!E.e.select(e,t)}))},I=function(e,t){return t.userIds.reduce((function(t,n){var r=E.e.selectFetchStatus(e,n);return t[n]=r===g.a.NONE?g.a.LOADING:r,t}),{})},C=Object(h.a)().propsFromState((function(){return{availableUserIds:Object(b.a)(y,(function(e){return e})),fetchStatus:Object(b.a)(y,I,_,(function(e,t,n){for(var r=g.a.LOADED,a=0;a<n.length;a++){var o=n[a];if(-1===e.indexOf(o)){var i=t[o]||g.a.LOADING;r=r===g.a.LOADED?i:r}if(r===g.a.LOADED)break}return r}))}})).propsFromActions((function(){return{createLocalApiErrorHandler:Object(v.d)("USERS_LIST_CONTAINER"),fetchUsersIfNeeded:E.e.fetchManyIfNeeded}})),w=n("v//M"),S=n("3XMw"),O=n.n(S),M=n("pQ3Z"),x=n.n(M),A=(n("z84I"),n("cFuS")),P=n("Re5t"),N=n("3xO4"),k=n.n(N),T=n("88ay"),D=function(e){var t=e.displayMode,n=e.renderUserCell,r=e.withFinalItemBorder,a=e.withItemBorder,o=e.userIds;return m.createElement(k.a,null,o.map((function(e,i){var c=i===o.length-1,s=c&&a&&r||!c&&a;return n?n(e):m.createElement(T.b,{decoration:T.d,displayMode:t,key:e,promotedItemType:A.c.USER,userId:e,withBottomBorder:!!s,withFollowsYou:!0})})))};D.defaultProps={displayMode:P.a.UserDetailed,withFinalItemBorder:!0,withItemBorder:!1};var R=D,B=O.a.f5b426c2,j=C(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,p()(s()(t),"state",{allUsersUnavailable:!1}),p()(s()(t),"_renderContent",(function(){var e=t.props,n=e.availableUserIds,r=(e.createLocalApiErrorHandler,e.fetchStatus,e.fetchUsersIfNeeded,e.userIds,i()(e,["availableUserIds","createLocalApiErrorHandler","fetchStatus","fetchUsersIfNeeded","userIds"]));return m.createElement(R,a()({},r,{userIds:n}))})),p()(s()(t),"_handleFetch",(function(){t._fetchUsersIfNeeded()})),t}d()(t,e);var n=t.prototype;return n.componentDidMount=function(){this._fetchUsersIfNeeded()},n.componentDidUpdate=function(e){x()(e.userIds,this.props.userIds)||this._fetchUsersIfNeeded()},n.render=function(){return m.createElement(w.a,{accessibilityLabel:B,fetchStatus:this.state.allUsersUnavailable?g.a.LOADED:this.props.fetchStatus,onRequestRetry:this._handleFetch,render:this._renderContent,retryable:!1})},n._fetchUsersIfNeeded=function(){var e,t=this,n=this.props,r=n.createLocalApiErrorHandler,a=n.fetchUsersIfNeeded,o=n.availableUserIds;a(n.userIds).then((function(){t.setState({allUsersUnavailable:!1})}),r(((e={})[f.a.AddressBookLookupNotFound]={customAction:function(){0===o.length&&t.setState({allUsersUnavailable:!0})}},e)))},t}(m.Component));t.a=j},jUV2:function(e,t,n){"use strict";n.r(t),n.d(t,"DMInboxScreen",(function(){return G}));n("2G9S"),n("IAdD"),n("uFXj");var r=n("1Pcy"),a=n.n(r),o=n("W/Kd"),i=n.n(o),c=n("KEM+"),s=n.n(c),l=n("ERkP"),d=n("7JQg"),u=n("/yvb"),p=n("3XMw"),m=n.n(p),f=n("1sB9"),h=n.n(f),v=m.a.f325afc3,b=function(e){var t=e.testID;return l.createElement(u.a,{accessibilityLabel:v,icon:l.createElement(h.a,null),link:"/messages/compose",pullRight:!0,testID:t,type:"text"})},g=n("qz2E"),E=n("wrlS"),_=n("qS4/"),y=n("f42t"),I=n("v6aA"),C=n("M2mT"),w=n("Es6L"),S="NewDM_Button",O=n("3xO4"),M=n.n(O),x=n("csss"),A=n("Znyr"),P=n("FIs5"),N=n("rHpw"),k=n("hl/W"),T=m.a.a2f8105f,D=m.a.cf2d1047,R=m.a.b8aa3744,B=m.a.j06309e1,j=m.a.gee5150a,L=m.a.da2f9224,U=m.a.h6beb5fa,F={page:"messages",section:"inbox",component:"inbox_timeline"},G=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,s()(a()(t),"_renderPivot",(function(){return t.props.allowUntrustedInbox?l.createElement(M.a,{style:H.requestPivotContainer},l.createElement(x.a,{label:D,link:"/messages/requests",onPress:t._handleRequestsPivotClick,renderRightContent:t._renderPivotBadge,withBottomBorder:!1})):null})),s()(a()(t),"_renderPivotBadge",(function(){var e=t.props.untrustedUnreadCount;return e>0?l.createElement(A.a,{count:e,standalone:!0,truncatedCountFormatter:U,unreadCountLabel:L}):null})),s()(a()(t),"_renderEmptyDMInbox",(function(){return l.createElement(P.a,{buttonLink:"/messages/compose",buttonText:j,header:R,message:B,onImpression:t._handleEmptyDMInboxImpression})})),s()(a()(t),"_handleEmptyDMInboxImpression",(function(){var e=t.props,n=e.scribeAction,r=e.scribeNamespace;n(Object.assign({},r,{component:"empty_message",action:"impression"}))})),s()(a()(t),"_handleRequestsPivotClick",(function(){var e=t.props,n=e.scribeAction,r=e.scribeNamespace;n(Object.assign({},r,{element:"requests_pivot",action:"click"}))})),t}i()(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=e.allowUntrustedInbox,n=e.location,r=e.scribeAction,a=e.scribeNamespace,o=e.setLastViewedDmInboxPath,i=e.setDrawerExperimentEnabled;o(n.pathname),t&&r(Object.assign({},a,{element:"requests_pivot",action:"impression"})),i(E.a.isTrue("responsive_web_dm_quick_access_enabled"))},n.render=function(){var e=Object(w.a)()?l.createElement(b,{testID:S}):void 0,t=this.props,n=t.conversationIds,r=t.createLocalApiErrorHandler,a=t.fetchInbox,o=t.fetchInboxHistory,i=t.fetchInboxIfNeeded,c=t.fetchStatus,s=t.fetchUpdates,d=t.googleAnalyticsPageView,u=t.isRefreshing,p=t.scribeAction,m=t.scribePageImpression,f=t.updateLastSeenEventId;return l.createElement(C.a,{rightControl:e,screenType:"root",title:T},l.createElement(_.a,{accessibilityTitle:T,conversationIds:n,conversationPathPrefix:"/messages",createLocalApiErrorHandler:r,fetchInbox:a,fetchInboxHistory:o,fetchInboxIfNeeded:i,fetchStatus:c,fetchUpdates:s,googleAnalyticsPageView:d,isRefreshing:u,renderEmptyDMInbox:this._renderEmptyDMInbox,renderStickyContent:this._renderPivot,scribeAction:p,scribeNamespace:F,scribePageImpression:m,updateLastSeenEventId:f,virtualScrollerCacheKey:"dmInbox",withDmSearch:!0}))},t}(l.Component);s()(G,"contextType",I.a),s()(G,"defaultProps",{conversationIds:[],untrustedUnreadCount:0});var H=N.a.create((function(e){return{requestPivotContainer:{backgroundColor:e.colors.cellBackground,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,borderBottomColor:e.colors.borderColor,zIndex:2}}})),W=Object(y.a)(Object(d.c)(F)(Object(k.b)({inbox:k.a.primary})(G)),{directMessages:g.a});t.default=W},lL5k:function(e,t,n){"use strict";var r=/[|\\{}()[\]^$+*?.]/g;e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(r,"\\$&")}},"qS4/":function(e,t,n){"use strict";n("vrRf"),n("5BYb"),n("ho0z"),n("IAdD"),n("+KXO");var r=n("1Pcy"),a=n.n(r),o=n("W/Kd"),i=n.n(o),c=n("KEM+"),s=n.n(c),l=n("ERkP"),d=n("BUB3"),u=n("s14A"),p=(n("2G9S"),n("LW0h"),n("jQ3i"),n("lTEL"),n("z84I"),n("6U7i"),n("7x/C"),n("x4t0"),n("hBvt"),n("uFXj"),n("kYxP"),n("MMRb")),m=n("0KEI"),f=n("hqKg"),h=n("AQOc"),v=n("G6rE"),b=n("oEGd"),g=function(e,t){return t.conversationId},E=Object(f.createSelector)(g,(function(e,t){return p.selectConversation(e,g(0,t))}),p.selectEntries,v.e.selectAll,(function(e,t){return!p.selectConversationIsRead(e,g(0,t))}),(function(e,t,n,r,a){return{conversation:t&&Object(h.a)(t.data,n,r),conversationId:e,unread:a}})),_={createLocalApiErrorHandler:Object(m.d)("DIRECT_MESSAGES_INBOX_ITEM"),leaveConversation:p.leaveConversation},y=Object(b.g)(E,_),I=n("aA19"),C=n("OhSZ"),w=n("t62R"),S=n("g54k"),O=Object(f.createSelector)(v.e.selectAll,(function(e,t){return t.entry}),S.b),M=Object(b.c)(O),x=n("zQEV"),A=(n("AxOO"),n("aWzz"),M((function(e){var t=e.entry,n=e.entryType,r=e.perspective,a=e.users,o=Object(x.a)(t,n,r,a);return l.createElement(w.c,{color:"deepGray"},o)}))),P=Object(f.createSelector)((function(e,t){return v.e.select(e,t.senderId)}),(function(e,t){return t.recipientId?v.e.select(e,t.recipientId):void 0}),(function(e,t){return{user:e,recipient:t}})),N=Object(b.c)(P),k=n("cTG8"),T=n("3XMw"),D=n.n(T),R=function(e){return l.createElement(D.a.I18NFormatMessage,{$i18n:"b3a2b11c"},l.createElement(w.c,null,e))},B=D.a.a876e58b,j=D.a.bf584cd1,L=D.a.a9cc8cfd,U=D.a.e20b65b0,F=D.a.e5bfe07d,G=D.a.b1a614fe,H=N((function(e){var t=e.entry,n=e.perspective,r=e.isGroupDM,a=e.user,o=void 0===a?{}:a,i=e.recipient,c=void 0===i?{}:i,s=t&&t.message_data;if(!s)return null;var d=s.attachment,u=void 0===d?{}:d,p=!!(u.video||u.photo||u.animated_gif||u.tweet||u.fleet||u.sticker||u.card),m=n===o.id_str,f=!(!p||!m)||!(!r||m),h=o.name,v=c.name,b=[f&&l.createElement(w.c,{key:"senderName"},R(h)," "),s&&s.text&&l.createElement(k.a,{displayTextRange:[0,s.text.length],entities:s.entities,key:"message",text:s.text,withMediaLinks:!0})];return u.tweet?b=f?function(e,t){return e?l.createElement(w.c,null,D.a.d5b762c8):l.createElement(D.a.I18NFormatMessage,{$i18n:"dfd2b3b9"},l.createElement(w.c,null,t))}(m,h):G:u.fleet?b=function(e,t,n){return e?l.createElement(D.a.I18NFormatMessage,{$i18n:"cc66adbd"},l.createElement(w.c,null,t),l.createElement(w.c,null,n||"")):l.createElement(D.a.I18NFormatMessage,{$i18n:"b35cee40"},l.createElement(w.c,null,n||""))}(m,v,s.text):u.video?b=f?function(e,t){return e?l.createElement(w.c,null,D.a.j7d81019):l.createElement(D.a.I18NFormatMessage,{$i18n:"eee2f120"},l.createElement(w.c,null,t))}(m,h):B:u.photo?b=f?function(e,t){return e?l.createElement(w.c,null,D.a.f80629ba):l.createElement(D.a.I18NFormatMessage,{$i18n:"c1e1f848"},l.createElement(w.c,null,t))}(m,h):j:u.animated_gif?b=f?function(e,t){return e?l.createElement(w.c,null,D.a.eb3d722e):l.createElement(D.a.I18NFormatMessage,{$i18n:"dc4b75a1"},l.createElement(w.c,null,t))}(m,h):L:u.sticker?b=f?function(e,t){return e?l.createElement(w.c,null,D.a.d30c2d4f):l.createElement(D.a.I18NFormatMessage,{$i18n:"c7e2464e"},l.createElement(w.c,null,t))}(m,h):U:u.card&&(b=f?function(e,t){return e?l.createElement(w.c,null,D.a.db53c017):l.createElement(D.a.I18NFormatMessage,{$i18n:"hcbbbb34"},l.createElement(w.c,null,t))}(m,h):F),l.createElement(w.c,{color:"deepGray",numberOfLines:1},b)})),W=n("uKEd"),V=function(e,t){return t.senderId?v.e.select(e,t.senderId):void 0},K=function(e,t){return Object(W.n)(e,t.reactionEntry.message_id)},q=function(e,t){var n=K(e,t);return n&&n.message_data&&v.e.select(e,n.message_data.sender_id)},z=Object(b.e)((function(){return Object(f.createSelector)(V,K,q,(function(e,t,n){return{reactedMessageEntry:t,reactingUser:e,messageUser:n}}))}),{}),Q=n("33Kz"),X=z((function(e){var t,n=e.isGroupDM,r=e.messageUser,a=e.perspective,o=e.reactionEntry,i=e.reactedMessageEntry,c=e.reactingUser,s=i&&i.message_data,d=s&&s.attachment,u=s&&s.text,p=r&&r.screen_name,m=a===(c&&c.id_str),f=c&&c.name,h=Object(Q.b)(o.reaction_key||"");return t=d&&d.tweet?n?function(e,t,n,r){return e?l.createElement(D.a.I18NFormatMessage,{$i18n:"d23578d2"},l.createElement(w.c,null,n),l.createElement(w.c,null,r)):l.createElement(D.a.I18NFormatMessage,{$i18n:"bcf6e62b"},l.createElement(w.c,null,t),l.createElement(w.c,null,n),l.createElement(w.c,null,r))}(m,f,p,h):function(e,t,n){return e?l.createElement(D.a.I18NFormatMessage,{$i18n:"ca684bf5"},l.createElement(w.c,null,n)):l.createElement(D.a.I18NFormatMessage,{$i18n:"h5797be5"},l.createElement(w.c,null,t),l.createElement(w.c,null,n))}(m,f,h):d&&d.video?n?function(e,t,n,r){return e?l.createElement(D.a.I18NFormatMessage,{$i18n:"abcacd1d"},l.createElement(w.c,null,n),l.createElement(w.c,null,r)):l.createElement(D.a.I18NFormatMessage,{$i18n:"ef33625e"},l.createElement(w.c,null,t),l.createElement(w.c,null,n),l.createElement(w.c,null,r))}(m,f,p,h):function(e,t,n){return e?l.createElement(D.a.I18NFormatMessage,{$i18n:"ab1cdfe2"},l.createElement(w.c,null,n)):l.createElement(D.a.I18NFormatMessage,{$i18n:"f0cf1699"},l.createElement(w.c,null,t),l.createElement(w.c,null,n))}(m,f,h):d&&d.photo?n?function(e,t,n,r){return e?l.createElement(D.a.I18NFormatMessage,{$i18n:"g246cea8"},l.createElement(w.c,null,n),l.createElement(w.c,null,r)):l.createElement(D.a.I18NFormatMessage,{$i18n:"f5d11d9b"},l.createElement(w.c,null,t),l.createElement(w.c,null,n),l.createElement(w.c,null,r))}(m,f,p,h):function(e,t,n){return e?l.createElement(D.a.I18NFormatMessage,{$i18n:"jf27606a"},l.createElement(w.c,null,n)):l.createElement(D.a.I18NFormatMessage,{$i18n:"cd110359"},l.createElement(w.c,null,t),l.createElement(w.c,null,n))}(m,f,h):d&&d.animated_gif?n?function(e,t,n,r){return e?l.createElement(D.a.I18NFormatMessage,{$i18n:"cd78281d"},l.createElement(w.c,null,n),l.createElement(w.c,null,r)):l.createElement(D.a.I18NFormatMessage,{$i18n:"c35bdc44"},l.createElement(w.c,null,t),l.createElement(w.c,null,n),l.createElement(w.c,null,r))}(m,f,p,h):function(e,t,n){return e?l.createElement(D.a.I18NFormatMessage,{$i18n:"b2da1bf8"},l.createElement(w.c,null,n)):l.createElement(D.a.I18NFormatMessage,{$i18n:"g84c0421"},l.createElement(w.c,null,t),l.createElement(w.c,null,n))}(m,f,h):d&&d.card?n?function(e,t,n,r){return e?l.createElement(D.a.I18NFormatMessage,{$i18n:"d616a311"},l.createElement(w.c,null,n),l.createElement(w.c,null,r)):l.createElement(D.a.I18NFormatMessage,{$i18n:"f94203b2"},l.createElement(w.c,null,t),l.createElement(w.c,null,n),l.createElement(w.c,null,r))}(m,f,p,h):function(e,t,n){return e?l.createElement(D.a.I18NFormatMessage,{$i18n:"f9fb1cf6"},l.createElement(w.c,null,n)):l.createElement(D.a.I18NFormatMessage,{$i18n:"f2bf910e"},l.createElement(w.c,null,t),l.createElement(w.c,null,n))}(m,f,h):u?n?function(e,t,n,r,a){return e?l.createElement(D.a.I18NFormatMessage,{$i18n:"e8e333d8"},l.createElement(w.c,null,r),l.createElement(w.c,null,n),l.createElement(w.c,null,a)):l.createElement(D.a.I18NFormatMessage,{$i18n:"e1e9ab3e"},l.createElement(w.c,null,t),l.createElement(w.c,null,r),l.createElement(w.c,null,n),l.createElement(w.c,null,a))}(m,f,h,p,u):function(e,t,n,r){return e?l.createElement(D.a.I18NFormatMessage,{$i18n:"cec676f3"},l.createElement(w.c,null,n),l.createElement(w.c,null,r)):l.createElement(D.a.I18NFormatMessage,{$i18n:"a2706f9a"},l.createElement(w.c,null,t),l.createElement(w.c,null,n),l.createElement(w.c,null,r))}(m,f,h,u):function(e,t,n){return e?l.createElement(D.a.I18NFormatMessage,{$i18n:"d6b15bbf"},l.createElement(w.c,null,n)):l.createElement(D.a.I18NFormatMessage,{$i18n:"ac0d4bc7"},l.createElement(w.c,null,t),l.createElement(w.c,null,n))}(m,f,h),l.createElement(w.c,{color:"deepGray",numberOfLines:1},t)})),$=n("H4nC"),J=n("b9JY"),Z=D.a.fb3ccb55,Y=function(e){var t=e.conversationType,n=e.entry,r=e.perspective;if(n.marked_as_spam)return l.createElement(w.c,{color:"deepGray",numberOfLines:1},Z);if(Object(J.b)(n)){var a=n.message_data,o=(a=void 0===a?{}:a).sender_id,i=a.recipient_id;return l.createElement(H,{entry:n,isGroupDM:t===p.CONVERSATION_TYPE.GROUP,perspective:r,recipientId:i,senderId:o})}return Object(J.c)(n)?l.createElement(X,{isGroupDM:t===p.CONVERSATION_TYPE.GROUP,perspective:r,reactionEntry:n,senderId:n.sender_id}):Object(J.a)(n)?l.createElement(A,{entry:n,entryType:n.type,perspective:r}):Object(J.d)(n)?l.createElement($.a,{entry:n,isCompact:!0}):null},ee=n("wrlS"),te=n("Myq3"),ne=n("6116"),re=n.n(ne),ae="conversation",oe=n("K2+g"),ie=n.n(oe),ce=n("3xO4"),se=n.n(ce),le=n("Irs7"),de=n("0PHd"),ue=n("/yvb"),pe=n("eb3s"),me=n("GBcw"),fe=n("htQn"),he=n("5mJL"),ve=n("rHpw"),be=n("aWyx"),ge=D.a.gdf4b79f,Ee=D.a.bbf83d83,_e=D.a.d96cf7cd,ye={component:"low_quality_timeline"},Ie=function(e){var t=e.children;return l.createElement(se.a,{style:we.socialProofContainer},t)},Ce=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,s()(a()(t),"_socialProofEnabled",ee.a.isTrue("responsive_web_dm_health_inbox_request_cell_social_proof_enabled")),s()(a()(t),"state",{showConfirmation:!1}),s()(a()(t),"_renderSocialProof",(function(e){var t=e.social_proof;if(!t||0===t.length)return null;var n=t[0];switch(n.proof_type){case be.d.MUTUAL_FRIENDS:if(0===n.total)return null;var r=n.users.map((function(e){return e.profile_image_url_https})),a=n.users.map((function(e){return e.name}));return l.createElement(Ie,null,l.createElement(de.a,{displayFacepileInline:!0,knownFollowersAvatarUrls:r,knownFollowersCount:n.total,knownFollowersNames:a}));default:return null}})),s()(a()(t),"_renderTrashcan",(function(){var e=t.props.conversationId;return l.createElement(l.Fragment,null,l.createElement(ue.a,{accessibilityLabel:_e,borderColor:"transparent",icon:l.createElement(ie.a,{style:we.trashcanIcon}),onPress:t._handleShowConfirmation,type:"destructiveText"}),t.state.showConfirmation?l.createElement(pe.a,{confirmButtonLabel:_e,confirmButtonType:"destructive",headline:ge,onCancel:t._handleHideConfirmation,onConfirm:t._deleteConversation(e),text:Ee}):null)})),s()(a()(t),"_renderTimestamp",(function(){var e=t.props.conversation;return l.createElement(l.Fragment,null,l.createElement(se.a,null,e?l.createElement(me.a,{timestamp:Number(e.sort_timestamp)}):null,(null==e?void 0:e.notifications_disabled)?l.createElement(re.a,{style:we.notificationsDisabledIcon}):null))})),s()(a()(t),"_deleteConversation",(function(e){return function(){var n=t.props,r=n.analytics,a=n.createLocalApiErrorHandler,o=n.leaveConversation;t._handleHideConfirmation(),r.scribe(Object.assign({},ye,{element:"thread",action:"delete_thread"})),o({conversationId:e}).catch(a({showToast:!0}))}})),s()(a()(t),"_handleHideConfirmation",(function(){t.setState({showConfirmation:!1})})),s()(a()(t),"_handleOnClick",(function(e){var n=t.props,r=n.conversationId;(0,n.onClick)(e,r)})),s()(a()(t),"_handleShowConfirmation",(function(e){var n=t.props.analytics;e.stopPropagation(),n.scribe(Object.assign({},ye,{element:"accessory_trashcan",action:"click"})),t.setState({showConfirmation:!0})})),t}i()(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(e,t){var n=this.props.conversation,r=null==n?void 0:n.conversation_id,a=null==n?void 0:n.last_read_event_id,o=null==n?void 0:n.sort_event_id,i=null==n?void 0:n.max_entry_id,c=e.conversation,s=null==c?void 0:c.conversation_id,l=null==c?void 0:c.last_read_event_id,d=null==c?void 0:c.sort_event_id,u=null==c?void 0:c.max_entry_id,p=this.props,m=p.filter,f=p.isActive,h=e.filter,v=e.isActive,b=this.state.showConfirmation,g=t.showConfirmation;return r!==s||a!==l||o!==d||i!==u||f!==v||b!==g||m!==h},n.render=function(){var e=this.props,t=e.conversation,n=e.filter,r=e.isActive,a=e.isTertiaryInbox,o=e.perspective,i=e.unread,c=e.link,s=(null==t?void 0:t.entries)||[],d=Object(te.a)(s,(function(e){return![be.b.MESSAGE_DELETE,be.b.REACTION_DELETE,be.b.MESSAGE_MARK_AS_SPAM,be.b.MESSAGE_MARK_AS_NOT_SPAM].includes(e.type)})),u=[we.root,we.bottomBorder,i&&we.unread];if(!t||!n(t))return null;var p=!t.trusted&&this._socialProofEnabled;return l.createElement(fe.a,{accessibilityRole:"tab",accessibilityState:{selected:r},link:{pathname:c,anchorless:!0},onPress:this._handleOnClick,style:u,testID:ae},l.createElement(he.a,{avatarCell:l.createElement(I.a,{conversation:t,perspective:o})},l.createElement(se.a,{style:we.bodyColumn},l.createElement(se.a,{style:we.titleContainer},l.createElement(C.b,{conversation:t,perspective:o}),l.createElement(se.a,{style:we.snippet},d?l.createElement(Y,{conversationType:t.type,entry:d,perspective:o}):null),p?this._renderSocialProof(t):null),a?this._renderTrashcan():this._renderTimestamp())))},t}(l.Component);s()(Ce,"defaultProps",{isActive:!1,filter:function(e){return!0},unread:!1});var we=ve.a.create((function(e){return{root:{backgroundColor:e.colors.cellBackground,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.small,width:"100%"},bottomBorder:{borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,borderBottomColor:e.colors.borderColor},bodyColumn:{flexDirection:"row"},titleContainer:{flex:1},notificationsDisabledIcon:{alignSelf:"flex-end",color:e.colors.deepGray,paddingTop:e.spaces.xxSmall},trashcanIcon:{color:e.colors.red},snippet:{maxHeight:e.spaces.xLarge,overflow:"hidden"},unread:{backgroundColor:e.colors.unreadCellBackground},socialProofContainer:{marginTop:e.spaces.xxSmall}}})),Se=Object(le.a)(y(Ce),{page:"messages",section:"inbox"}),Oe=n("dwig"),Me=n("v//M"),xe=n("QB0K"),Ae=n("1sB9"),Pe=n.n(Ae),Ne=n("FRNI"),ke=D.a.dabdea6b,Te=D.a.f325afc3,De=function(e){function t(){return e.apply(this,arguments)||this}return i()(t,e),t.prototype.render=function(){return l.createElement(xe.a,{accessibilityLabel:ke,href:"/messages/compose",icon:l.createElement(Pe.a,null),label:ke,scribeComponent:"floating_dm_button",shortLabel:Te,testID:Ne.a.message})},t}(l.PureComponent),Re=n("Gzkc"),Be=n.n(Re),je=n("VPAj"),Le=n("IRWI"),Ue=Object.assign({},Le.a,{initialScrollHeadroom:Object(je.a)(0),scrollHeadroom:Object(je.a)(0),pinToTopWhenAtTop:!0}),Fe=n("TEoO"),Ge=n("v6aA"),He=n("IG4P"),We=n("GSsg"),Ve=n("Kzn8"),Ke=n.n(Ve),qe=n("6OUF"),ze=n("mw9i"),Qe=n("VY6S"),Xe=n("+d3d"),$e=function(e){return e},Je=D.a.a66ac766,Ze=D.a.fe61929d,Ye=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,s()(a()(r),"state",{filterQuery:""}),s()(a()(r),"_render",(function(){var e=r.props,t=e.accessibilityTitle,n=e.conversationIds,a=e.footer,o=e.isRefreshing,i=e.renderEmptyDMInbox,c=e.renderStickyContent,s=e.virtualScrollerCacheKey;return l.createElement(l.Fragment,null,c?c():null,r._enableSearchInbox?l.createElement(se.a,{style:et.searchInput},l.createElement(qe.a,{Icon:Be.a,onChange:r._handleSearchChange,onClear:r._handleSearchClear,onFocus:r._handleSearchFocus,placeholder:Ze,withClearButton:!0})):null,l.createElement(u.a,null,l.createElement(He.a,{isRefreshing:o,onRefresh:r._handlePullToRefresh},s&&n?l.createElement(Fe.a,{accessibilityRole:"tablist",accessibilityTitle:t,anchoring:Ue,assumedItemHeight:100,cacheKey:s,footer:a,identityFunction:$e,items:n,noItemsRenderer:i,onNearEnd:r._handleNearEnd,renderer:r._renderInboxItem(r.state.filterQuery)}):null)))})),s()(a()(r),"_handleNearEnd",(function(){r.state.filterQuery||r._handleHistoryRequest()})),s()(a()(r),"_handleSearchChangeInner",(function(e){var t=r.props,n=t.scribeAction,a=t.scribeNamespace;r.setState({filterQuery:e.toLowerCase()}),n(Object.assign({},a,{element:"thread",action:"search"}),{event_value:r.state.filterQuery.length})})),s()(a()(r),"_handleSearchChangeDebounced",Object(Qe.a)(r._handleSearchChangeInner,200)),s()(a()(r),"_handleSearchChange",(function(e){var t=e.currentTarget.value;return r._handleSearchChangeDebounced(t)})),s()(a()(r),"_handleSearchClear",(function(){return r._handleSearchChangeInner("")})),s()(a()(r),"_handleSearchFocus",(function(){r.props.conversationIds&&r.props.conversationIds.length<30&&r._handleHistoryRequest()})),s()(a()(r),"_renderInboxItem",(function(e){return function(t){var n=r.context.loggedInUserId,a=r.props,o=a.conversationPathPrefix,i=a.isTertiaryInbox,c=r._filterConversation(e),s=o+"/"+t;return l.createElement(d.a,{exact:!1,path:s},(function(e){return l.createElement(Se,{conversationId:t,filter:c,isActive:e,isTertiaryInbox:i,key:t,link:s,onClick:r._handleConversationClick,perspective:n})}))}})),s()(a()(r),"_filterConversation",(function(e){return function(e){var t=r.state.filterQuery;if(!t)return!0;var n=r.context.loggedInUserId,a=Object.keys(e.participants),o="GROUP_DM"===e.type&&e.name&&e.name.toLowerCase().indexOf(t)>-1,i=a.some((function(o){var i=e.participants[o],c=n===o,s=1===a.length&&c,l=i&&i.user&&!c;return!(!s&&!l)&&r._userMatchesQuery(i.user.screen_name,i.user.name,t)}));return!(!o&&!i)}})),s()(a()(r),"_handleFetchInitialWrapper",(function(){r._handleFetchInitial()})),s()(a()(r),"_handleFetchInitial",(function(){var e=r.props,t=e.createLocalApiErrorHandler,n=e.fetchInboxIfNeeded,a=e.fetchUpdates;return n().then(r._updateLastSeenEventId,t()).then((function(){r._updatePolling.start()})).then((function(){return a().catch(t())}))})),s()(a()(r),"_handleConversationClick",(function(e,t){var n=r.props,a=n.customCellClick,o=n.scribeAction,i=n.scribeNamespace;o(Object.assign({},i,{element:"thread",action:"click"}),{event_value:r.state.filterQuery.length}),a&&a(e,t)})),s()(a()(r),"_handleEmptyDMInboxImpression",(function(){var e=r.props,t=e.scribeAction,n=e.scribeNamespace;t(Object.assign({},n,{component:"empty_message",action:"impression"}))})),s()(a()(r),"_handlePullToRefresh",(function(){var e=r.props,t=e.createLocalApiErrorHandler;(0,e.fetchInbox)().then(r._updateLastSeenEventId,t())})),s()(a()(r),"_updateLastSeenEventIdIfActive",(function(){if("background"!==Ke.a.currentState)return r._updateLastSeenEventId()})),s()(a()(r),"_updateLastSeenEventId",(function(){var e=r.props,t=e.createLocalApiErrorHandler;return(0,e.updateLastSeenEventId)().catch(t())})),r._fab=l.createElement(De,null),r._enableSearchInbox=!!t.withDmSearch&&ee.a.isTrue("responsive_web_search_dms_enabled"),r}i()(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this,t=this.props,n=t.createLocalApiErrorHandler,r=t.fetchInboxHistory,a=t.fetchUpdates,o=t.googleAnalyticsPageView,i=t.scribeNamespace;return(0,t.scribePageImpression)(i),o(i),this._updatePolling=new We.a((function(){a().then(e._updateLastSeenEventIdIfActive,n())}),{interval:8e3}),this._handleHistoryRequest=Object(Xe.a)((function(){r.apply(void 0,arguments).catch(n())}),1e3),this._handleFetchInitial()},n.componentWillUnmount=function(){this._updatePolling.stop()},n.render=function(){return l.createElement(Oe.a,{component:ze.a,fab:this._fab,style:et.root},l.createElement(Me.a,{accessibilityLabel:Je,fetchStatus:this.props.fetchStatus,onRequestRetry:this._handleFetchInitialWrapper,render:this._render}))},n._userMatchesQuery=function(e,t,n){return e&&e.toLowerCase().indexOf(n)>-1||t&&t.toLowerCase().indexOf(n)>-1},t}(l.Component);s()(Ye,"contextType",Ge.a),s()(Ye,"defaultProps",{conversationIds:[],isTertiaryInbox:!1,withDmSearch:!1});var et=ve.a.create((function(e){return{root:{backgroundColor:e.colors.cellBackground,flexGrow:1},searchInput:{backgroundColor:e.colors.cellBackground,borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:"1px",padding:e.spaces.xSmall,zIndex:1}}}));t.a=Ye},uHIe:function(e,t,n){"use strict";n.r(t),n.d(t,"DMMediaScreen",(function(){return O}));n("2G9S"),n("KqXw"),n("MvUL");var r=n("1Pcy"),a=n.n(r),o=n("W/Kd"),i=n.n(o),c=n("KEM+"),s=n.n(c),l=n("ERkP"),d=(n("WNMA"),n("oEGd")),u=n("hqKg"),p=n("zh9S"),m=n("H9MA"),f=n("uKEd"),h=function(e,t){return t.match.params.entryId},v=Object(u.createSelector)(h,(function(e,t){return Object(f.n)(e,h(0,t))}),(function(e,t){return t.match.params.conversationId}),m.c,(function(e,t,n,r){var a=t&&t.message_data.attachment||{};return{conversationId:n,mediaItem:a.photo||a.animated_gif||a.video,messageId:e,dataSaver:r}})),b={scribeAction:p.c},g=Object(d.g)(v,b),E=n("7JQg"),_=n("RCZO"),y=n("kp0V"),I=n("2doW"),C=n("UPvq"),w=n("wiP2"),S=n("lklz"),O=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,s()(a()(t),"_handleClose",(function(){var e=t.props,n=e.conversationId,r=e.history,a=e.location,o=n?"/messages/"+n:"/messages";Object(y.a)({backLocation:o,history:r,location:a})})),t}i()(t,e);var n=t.prototype;return n.UNSAFE_componentWillMount=function(){var e=this.props,t=e.conversationId,n=e.history;e.mediaItem||n.replace(t?"/messages/"+t:"/messages")},n.render=function(){var e=this.props,t=e.dataSaver,n=e.mediaItem,r=e.messageId,a=Object(_.b)(n);return n?l.createElement(w.a.Configure,{headerless:!0},l.createElement(C.a,{backgroundColor:a,mediaItem:n,onCloseButtonPress:this._handleClose},l.createElement(I.a,{dataSaver:t,mediaItems:[n],onDismiss:this._handleClose,videoId:S.b.forDm(r)}))):null},t}(l.Component);t.default=Object(E.c)({page:"messages",section:"media"})(g(O))},wG2w:function(e,t,n){"use strict";n.r(t),n.d(t,"DMUntrustedInboxScreen",(function(){return B}));n("2G9S"),n("IAdD"),n("KqXw"),n("WNMA"),n("uFXj");var r=n("1Pcy"),a=n.n(r),o=n("W/Kd"),i=n.n(o),c=n("KEM+"),s=n.n(c),l=n("ERkP"),d=n("HPNB"),u=n("7JQg"),p=n("qz2E"),m=n("qS4/"),f=n("3XMw"),h=n.n(f),v=n("f42t"),b=n("v6aA"),g=n("zCf4"),E=n("M2mT"),_=n("zML4"),y=n("3xO4"),I=n.n(y),C=n("0yYu"),w=n("t62R"),S=n("cm6r"),O=n("cHvH"),M=n("FIs5"),x=n("rHpw"),A=n("hl/W"),P=h.a.cf2d1047,N=h.a.bef0039f,k=h.a.eb7de4a9,T=h.a.a0e81a2e,D=h.a.a5359aac,R={page:"messages",section:"inbox",component:"requests_timeline"},B=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,s()(a()(t),"componentDidMount",(function(){var e=t.props.scribeAction;t._shouldRenderTombstone()&&e(Object.assign({},R,{element:"low_quality_pivot",action:"impression"}))})),s()(a()(t),"componentDidUpdate",(function(e){var n=t.props.scribeAction;!t._shouldRenderTombstone()||e.allowLowQualityUntrustedInbox&&e.isAtEndOfUntrustedInbox||n(Object.assign({},R,{element:"low_quality_pivot",action:"impression"}))})),s()(a()(t),"_shouldRenderTombstone",(function(){var e=t.props,n=e.allowLowQualityUntrustedInbox,r=e.isAtEndOfUntrustedInbox;return n&&r})),s()(a()(t),"_renderTombstone",(function(){var e=t.props.conversationIds;return t._shouldRenderTombstone()?l.createElement(I.a,null,e.length>0&&l.createElement(C.a,null),l.createElement(I.a,{style:j.tombstoneDescription},l.createElement(w.c,{color:"deepGray",size:"small"},k)),l.createElement(S.a,{link:"/messages/requests/additional",onPress:t._handleTombstoneClick,style:j.tombstoneContainer},l.createElement(w.c,{align:"center",color:"primary",size:"normal"},T))):null})),s()(a()(t),"_renderStickyCopy",(function(){var e=t.props.conversationIds;return l.createElement(O.a,null,(function(t){var n=t.windowWidth,r=d.a.isTwoColumnLayout(n),a=0===e.length;return r||a?null:l.createElement(I.a,{style:j.stickyCopyContainer},l.createElement(w.c,{style:j.stickyCopy},D))}))})),s()(a()(t),"_renderSettingsAppBarButton",(function(){return l.createElement(_.a,{to:"/settings/safety"})})),s()(a()(t),"_renderEmptyDMInbox",(function(){var e=t._renderTombstone();return l.createElement(l.Fragment,null,l.createElement(M.a,{header:e?"":N,message:D,style:j.emptyMessage}),e)})),s()(a()(t),"_handleBackClick",(function(){t.props.history.push("/messages")})),s()(a()(t),"_handleTombstoneClick",(function(){(0,t.props.scribeAction)(Object.assign({},R,{element:"low_quality_pivot",action:"click"}))})),s()(a()(t),"_hasConversationOpen",(function(){return!t.props.match.isExact})),t}return i()(t,e),t.prototype.render=function(){var e=this.props,t=e.allowUntrustedInbox,n=e.conversationIds,r=e.createLocalApiErrorHandler,a=e.fetchInbox,o=e.fetchInboxHistory,i=e.fetchInboxIfNeeded,c=e.fetchStatus,s=e.fetchUpdates,d=e.googleAnalyticsPageView,u=e.isRefreshing,p=e.scribeAction,f=e.scribePageImpression,h=e.updateLastSeenEventId;return t?l.createElement(E.a,{backLocation:"/messages",onBackClick:this._handleBackClick,rightControl:this._renderSettingsAppBarButton(),screenType:"secondaryRoot",title:P,withDetailOpen:this._hasConversationOpen()},l.createElement(m.a,{accessibilityTitle:P,conversationIds:n,conversationPathPrefix:"/messages/requests",createLocalApiErrorHandler:r,fetchInbox:a,fetchInboxHistory:o,fetchInboxIfNeeded:i,fetchStatus:c,fetchUpdates:s,footer:this._renderTombstone(),googleAnalyticsPageView:d,isRefreshing:u,renderEmptyDMInbox:this._renderEmptyDMInbox,renderStickyContent:this._renderStickyCopy,scribeAction:p,scribeNamespace:R,scribePageImpression:f,updateLastSeenEventId:h,virtualScrollerCacheKey:"dmUntrustedInbox"})):l.createElement(g.a,{to:"/messages"})},t}(l.Component);s()(B,"contextType",b.a),s()(B,"defaultProps",{conversationIds:[]});var j=x.a.create((function(e){return{emptyMessage:{borderBottomStyle:"solid",borderBottomColor:e.colors.borderColor,borderBottomWidth:e.borderWidths.small,paddingVertical:e.spaces.small},stickyCopyContainer:{backgroundColor:e.colors.cellBackground,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,borderBottomColor:e.colors.borderColor,zIndex:1},stickyCopy:{color:e.colors.deepGray,padding:e.spaces.medium},tombstoneContainer:{borderTopStyle:"solid",borderTopColor:e.colors.borderColor,borderTopWidth:e.borderWidths.small,borderBottomStyle:"solid",borderBottomColor:e.colors.borderColor,borderBottomWidth:e.borderWidths.small,paddingVertical:e.spaces.xSmall},tombstoneDescription:{paddingHorizontal:e.spaces.small,paddingVertical:e.spaces.small}}})),L=Object(v.a)(Object(u.c)(R)(Object(A.b)({inbox:A.a.secondary})(B)),{directMessages:p.a});t.default=L},wO1l:function(e,t,n){"use strict";n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return b}));n("2G9S"),n("LW0h"),n("z84I"),n("5BYb"),n("tQbP"),n("ho0z"),n("IAdD"),n("iKE+"),n("KqXw"),n("DZ+c");var r=n("LdEA"),a=n.n(r),o=n("aWyx"),i=n("4q8G"),c=n("lL5k"),s=n.n(c),l=n("XnpN"),d=n("w6IS"),u=n("s1N3"),p=n("VIKJ"),m=n("vy4g"),f=n("GZwR");function h(e){return Object(u.a)(e,(function(e){var t=e.type,n=e.id;return t===f.b.DMConversation?"c_"+n:"u_"+n}))}var v=function(e,t,n,r){void 0===r&&(r=!1);var o=e&&new RegExp("(^|.*\\s)"+s()(e)+".*","i");return h(function(e,t){return Object(d.a)(e.map((function(e){return Object(l.a)(e,t).map((function(e){return e.user}))})))}(t.sort(i.a),n).filter((function(e){return(!o||(o.test(e.screen_name)||o.test(e.name)))&&(e.followed_by||r)})).map((function(e){return function(e){var t=e.id_str,n=Object(m.a)(Object(m.b)(e),f.c.DMInjected),r=n.tokens,o=n.rounded_score,i=n.src,c=a()(n,["tokens","rounded_score","src"]);return{data:Object.assign({},c,{can_dm:!0}),rounded_score:o,tokens:r,src:i,id:t,type:f.b.User}}(e)})))};function b(e,t,n){var r=e&&new RegExp("(^|.*\\s)"+s()(e)+".*","i"),a=t.filter((function(e){return e.trusted})).filter((function(t){if(!e)return!0;var a=r&&t.name&&r.test(t.name),o=Object(l.a)(t,n).map((function(e){return e.user})),i=r&&o.some((function(e){return r.test(e.screen_name)||r.test(e.name)}));return a||i})).sort(i.a),c=a;if(e){var u=Object(p.a)(a,(function(e){return e.type===o.a.ONE_TO_ONE})),m=u[0],b=u[1];c=m.concat(b)}return h(Object(d.a)(c.map((function(t){var r=t.type===o.a.GROUP,a=[];return r&&a.push(function(e){return{data:{name:e.name||"",conversationId:e.conversation_id},id:e.conversation_id,type:f.b.DMConversation}}(t)),!e&&r||(a=a.concat(v(r?e:null,[t],n,!r))),a}))))}},yV8l:function(e,t,n){"use strict";n.r(t),n.d(t,"ConversationInfoScreen",(function(){return we})),n.d(t,"styles",(function(){return Se}));n("LW0h"),n("7xRU"),n("z84I"),n("M+/F"),n("IAdD"),n("1IsZ"),n("KqXw"),n("WNMA");var r=n("1Pcy"),a=n.n(r),o=n("W/Kd"),i=n.n(o),c=n("KEM+"),s=n.n(c),l=n("ERkP"),d=n("EbOo"),u=n("EPsT"),p=(n("6U7i"),n("+KXO"),n("MMRb")),m=n("RqPI"),f=n("1YZw"),h=n("oEGd"),v=n("0KEI"),b=n("hqKg"),g=n("p9G8"),E=n("AQOc"),_=n("zh9S"),y=n("G6rE"),I=function(e,t){return t.match.params.conversationId},C=Object(b.createSelector)((function(e,t){return p.selectConversation(e,I(0,t))}),p.selectEntries,I,(function(e,t){return p.selectConversationFetchStatus(e,I(0,t))}),m.f,m.g,y.e.selectAll,(function(e,t,n,r,a,o,i){var c=e&&e.data,s=c&&Object(E.b)(c,t,i),l=s&&Object(g.a)(s,o),d=!(!c||!c.notifications_disabled),u=!(!c||!c.mention_notifications_disabled),p=c&&c.mute_expiration_time&&Number(c.mute_expiration_time),m=s?Object.keys(s.participants):[],f=m&&1===m.length&&m[0]===o,h=m&&m.filter((function(e){return e!==o})),v=f?m:h.slice(0,5),b=v.length<h.length;if(!o)throw new Error("logged-in user not found");return{conversation:s,conversationId:n,fetchStatus:r,groupName:l,mentionNotificationsDisabled:u,language:a,muteExpirationTime:p,notificationsDisabled:d,perspective:o,showViewPeople:b,visibleParticipants:v,isSelfConversation:f}})),w={addToast:f.b,block:y.e.block,createLocalApiErrorHandler:Object(v.d)("DIRECT_MESSAGES_CONVERSATION_INFO"),disableMentionNotifications:p.disableMentionNotifications,disableNotifications:p.disableNotifications,enableMentionNotifications:p.enableMentionNotifications,enableNotifications:p.enableNotifications,fetchConversationIfNeeded:p.fetchConversationIfNeeded,leaveConversation:p.leaveConversation,scribeAction:_.c,unblock:y.e.unblock,updateConversationName:p.updateConversationName},S=Object(h.g)(C,w),O=n("7JQg"),M=n("aWyx"),x=n("I2k/"),A=n("aA19"),P=n("v//M"),N=n("XnpN"),k=n("3XMw"),T=n.n(k),D=n("tuLS"),R=n("M2mT"),B=n("u0B7"),j=n("Re5t"),L=n("hqDb"),U=n("3xO4"),F=n.n(U),G=n("mjJ+"),H=n("mw9i"),W=n("5mJL"),V=n("t62R"),K=n("0yYu"),q=n("6vad"),z=n("jtO7"),Q=n("CK8+"),X=n("rHpw"),$=n("mN6z"),J=n("fs1G"),Z=T.a.e3e58b6d,Y=T.a.a9ddbb94,ee=T.a.abd845fd,te=T.a.g2fd3205,ne=T.a.eb1bb5a1,re=T.a.c6026009,ae=T.a.eb75875d,oe=T.a.j9552760,ie=T.a.ec39f437,ce=T.a.g946f84b,se=T.a.i8cf41b1,le=T.a.cc7c8ce6,de=T.a.hab58673,ue=T.a.e3c6e080,pe={confirmButtonLabel:T.a.bb1d57b6,actionTextDelete:T.a.ad63377d,actionTextLeave:T.a.g9074da4,header:T.a.gdf4b79f,text:T.a.h09b49f7},me=T.a.i6b19b07,fe=T.a.j7bb1a42,he=T.a.fcd4d489,ve=T.a.a30e1677,be=T.a.a9fd20be,ge=T.a.e133be4e,Ee=T.a.c9623eeb,_e=T.a.cceeaf2b,ye=T.a.d87bff5a,Ie=[{duration:1,displayText:T.a.j37c4674,toast:T.a.hf94a2d5},{duration:2,displayText:T.a.fb7a43c5,toast:T.a.bd54fad1},{duration:3,displayText:T.a.cb5bf56e,toast:T.a.f6fce0fd},{duration:0,displayText:T.a.cabeb6c1,toast:T.a.hfc86556}],Ce={page:"messages",section:"settings"},we=function(e){function t(t){var n;return n=e.call(this,t)||this,s()(a()(n),"_getScreenNameOfOneToOneConvo",(function(){var e=n._getSenderOfOneToOneConvo();return e?e.screen_name:""})),s()(a()(n),"_getBlockedOfOneToOneConvo",(function(){var e=n._getSenderOfOneToOneConvo();return e?e.blocking:null})),s()(a()(n),"_getSenderOfOneToOneConvo",(function(){var e=n.props,t=e.conversation,r=e.perspective,a=t&&Object(N.a)(t,r).map((function(e){return e.user}));return a&&a[0]||null})),s()(a()(n),"_renderContent",(function(){var e=n.props.conversation,t=!(null==e?void 0:e.trusted);return l.createElement(F.a,null,n._renderGroupSection(),n._renderParticipantsSection(),t?null:n._renderNotificationsSection(),n._renderConversationActions())})),s()(a()(n),"_getItems",(function(){return Ie.map((function(e){return{text:e.displayText,onClick:function(){return n._handleNotificationsDisabled(e)}}}))})),s()(a()(n),"_renderActionMenu",(function(e){return l.createElement(G.a,{items:n._getItems(),onCloseRequested:e})})),s()(a()(n),"_handleViewPeople",(function(){n._scribeAction("view_participants")})),s()(a()(n),"_handleBlockUser",(function(){var e=n.props,t=e.addToast,r=e.block,a=e.createLocalApiErrorHandler,o=n._getSenderOfOneToOneConvo(),i=o?o.id_str:"";""!==i&&(r(i).then((function(){t({actionLabel:ge,onAction:n._handleUnblockUser,text:be})}),a(d.a)),n._scribeAction("block"))})),s()(a()(n),"_handleUnblockUser",(function(){var e=n._getSenderOfOneToOneConvo(),t=e?e.id_str:"",r=n.props,a=r.createLocalApiErrorHandler;(0,r.unblock)(t).catch(a(B.a)),n._scribeAction("unblock")})),s()(a()(n),"_handleReportConversation",(function(){n._scribeAction("report")})),s()(a()(n),"_handleFetch",(function(){var e=n.props,t=e.createLocalApiErrorHandler,r=e.conversationId;(0,e.fetchConversationIfNeeded)({conversationId:r}).catch(t(Object(x.a)(r)))})),s()(a()(n),"_handleLeaveConversation",(function(){var e=n.props,t=e.conversation,r=e.conversationId,a=e.createLocalApiErrorHandler;(0,e.leaveConversation)({conversationId:r}).catch(a({showToast:!0}));var o=(null==t?void 0:t.type)===M.a.GROUP?"leave_group":"delete_thread";n._scribeAction(o),n._handleConversationClose()})),s()(a()(n),"_handleNotificationsDisabled",(function(e){var t=n.props,r=t.addToast,a=t.conversationId;(0,t.disableNotifications)({conversationId:a,duration:e.duration}),r({text:e.toast})})),s()(a()(n),"_handleNotificationsEnabled",(function(){var e=n.props,t=e.addToast,r=e.conversationId,a=e.createLocalApiErrorHandler;(0,e.enableNotifications)({conversationId:r}).then((function(){t({text:ie})}),a({showToast:!0}))})),s()(a()(n),"_handleMentionSwitchChanged",(function(e){var t=n.props,r=t.addToast,a=t.conversationId,o=t.createLocalApiErrorHandler,i=t.disableMentionNotifications,c=t.enableMentionNotifications,s=t.scribeAction,l=t.scribeNamespace;s(Object.assign({},l,{component:"dm_existing_conversation_dialog",action:e?"disable_mentions":"enable_mentions"})),e?i({conversationId:a}).then((function(){r({text:de})}),o({showToast:!0})):c({conversationId:a}).then((function(){r({text:ue})}),o({showToast:!0}))})),s()(a()(n),"_handleConversationClose",(function(){var e=n.props,t=e.history,r=e.match,a=Object.values(r.params).slice(0,-1).filter(Boolean);t.push({pathname:"/messages"+a.join("")})})),s()(a()(n),"_scribeAction",(function(e){var t=n.props,r=t.conversation,a=t.scribeAction,o=t.scribeNamespace,i=(null==r?void 0:r.trusted)?"trusted_conversation_info":"untrusted_conversation_info";a(Object.assign({},o,{element:i,action:e}),n._getScribeData())})),s()(a()(n),"_getScribeData",(function(){var e=n.props.conversation;return{items:[{conversation_type:(null==e?void 0:e.type)===M.a.GROUP?1:0}]}})),n.state={notificationsDisabled:t.notificationsDisabled,muteExpirationTime:t.muteExpirationTime},n}i()(t,e);var n=t.prototype;return n.componentDidMount=function(){this._handleFetch()},n.shouldComponentUpdate=function(e,t){return!Object($.a)(e,this.props)||!Object($.a)(t,this.state)},n.render=function(){var e=this.props,t=e.conversation,n=e.fetchStatus,r=e.conversationId,a=(null==t?void 0:t.type)===M.a.GROUP;return l.createElement(R.a,{backLocation:"/messages/"+r,screenType:"secondaryDetail",title:a?Y:Z,withBottomTabBar:!1},l.createElement(H.a,{style:Se.root},l.createElement(P.a,{accessibilityLabel:ye,fetchStatus:n,onRequestRetry:this._handleFetch,render:this._renderContent})))},n._renderGroupSection=function(){var e=this.props,t=e.conversation,n=e.conversationId,r=e.groupName,a=e.perspective,o=(null==t?void 0:t.type)===M.a.GROUP,i=null==t?void 0:t.trusted;return o?l.createElement(W.a,{avatarCell:l.createElement(A.a,{conversation:t,perspective:a}),cellStyle:Se.groupSectionRight,style:Se.groupSection},l.createElement(V.c,{numberOfLines:1,weight:"bold"},r),i?l.createElement(V.c,{link:"/messages/"+n+"/group-info",style:Se.edit},ee):null):null},n._renderParticipantsSection=function(){var e=this.props,t=e.conversation,n=e.conversationId,r=e.showViewPeople,a=e.visibleParticipants,o=(null==t?void 0:t.type)===M.a.GROUP,i=null==t?void 0:t.trusted;return l.createElement(F.a,null,o?l.createElement(l.Fragment,null,l.createElement(K.a,null),l.createElement(q.a,{text:te})):null,l.createElement(L.a,{displayMode:j.a.UserCompact,userIds:a,withFinalItemBorder:o,withItemBorder:!0}),r?l.createElement(z.a,{color:"primary",label:ne,link:"/messages/"+n+"/participants",onClick:this._handleViewPeople,withBottomBorder:!0}):null,o&&i?l.createElement(z.a,{color:"primary",label:re,link:"/messages/"+n+"/add"}):null)},n._renderMuteConversationSwitch=function(){var e=this.props,t=e.muteExpirationTime,n=e.notificationsDisabled;return n?l.createElement(F.a,{accessibilityRole:"label"},l.createElement(F.a,{style:Se.notificationsToggleContainer},l.createElement(V.c,{color:"normal"},oe),l.createElement(Q.a,{onValueChange:this._handleNotificationsEnabled,value:n})),t?l.createElement(V.c,{color:"deepGray",size:"small",style:Se.notificationsDescription},this._displayExpirationTime()):null):l.createElement(F.a,{style:Se.notificationsToggleContainer},l.createElement(V.c,{color:"normal"},oe),l.createElement(D.a,{accessibilityLabel:oe,renderMenu:this._renderActionMenu},l.createElement(Q.a,{onValueChange:J.a,value:n})))},n._renderMuteMentionsSwitch=function(){var e=this.props.mentionNotificationsDisabled;return l.createElement(F.a,null,l.createElement(F.a,{accessibilityRole:"label",style:Se.notificationsToggleContainer},l.createElement(V.c,{color:"normal"},se),l.createElement(Q.a,{onValueChange:this._handleMentionSwitchChanged,value:e})),l.createElement(V.c,{color:"deepGray",size:"small",style:Se.notificationsDescription},le))},n._renderNotificationsSection=function(){var e=this.props,t=e.conversation,n=e.isSelfConversation,r=(null==t?void 0:t.type)===M.a.GROUP;return n?null:l.createElement(F.a,null,l.createElement(K.a,null),l.createElement(q.a,{text:ae}),l.createElement(F.a,{style:r&&Se.settingGroup},this._renderMuteConversationSwitch()),r?this._renderMuteMentionsSwitch():null)},n._displayExpirationTime=function(){var e=this.props,t=e.language,n=e.muteExpirationTime;if(!n)return null;var r=n-(new Date).getTime()<864e5,a=new Date(n).toLocaleString(t||"en",r?{hour:"2-digit",minute:"2-digit"}:{weekday:"long",month:"short",day:"2-digit"});return ce({expiration:a})},n._renderConversationActions=function(){var e=this.props.conversation,t=(null==e?void 0:e.type)!==M.a.GROUP,n=!(null==e?void 0:e.trusted);return l.createElement(F.a,null,l.createElement(K.a,null),t?this._renderBlockUserButton():null,this._renderReportConversationButton(),l.createElement(u.a,{confirmationSheetConfirmButtonLabel:pe.confirmButtonLabel,confirmationSheetConfirmButtonType:"destructive",confirmationSheetHeadline:pe.header,confirmationSheetText:pe.text,label:n?pe.actionTextDelete:pe.actionTextLeave,onConfirmationSheetConfirm:this._handleLeaveConversation,withBottomBorder:!1}))},n._renderBlockUserButton=function(){var e=this.props.isSelfConversation,t=this._getScreenNameOfOneToOneConvo(),n=this._getBlockedOfOneToOneConvo(),r=n?_e({screenName:t}):ve({screenName:t}),a=n?Ee({screenName:t}):he({screenName:t});return e?null:l.createElement(u.a,{color:"primary",confirmationSheetText:r,label:a,onConfirmationSheetConfirm:n?this._handleUnblockUser:this._handleBlockUser})},n._renderReportConversationButton=function(){var e=this.props,t=e.conversation,n=e.conversationId,r=e.isSelfConversation,a=(null==t?void 0:t.type)!==M.a.GROUP?fe({screenName:this._getScreenNameOfOneToOneConvo()}):me,o={pathname:"/i/report/dm_conversation/"+n,state:{clientReferer:window.location.pathname,scribeNamespace:Ce}};return r?null:l.createElement(z.a,{color:"primary",label:a,link:o,onPress:this._handleReportConversation})},t}(l.Component),Se=X.a.create((function(e){return{root:{backgroundColor:e.colors.cellBackground},edit:{flexShrink:0},groupSection:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},groupSectionRight:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},notificationsToggleContainer:{alignItems:"center",flexDirection:"row",flexGrow:1,justifyContent:"space-between",paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},notificationsDescription:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingBottom:e.componentDimensions.gutterVertical,paddingTop:0},settingGroup:{borderBottomColor:e.colors.borderColor,borderBottomWidth:1,borderBottomStyle:"solid"}}}));t.default=Object(O.c)(Ce)(S(we))},zML4:function(e,t,n){"use strict";var r=n("W/Kd"),a=n.n(r),o=n("ERkP"),i=n("3XMw"),c=n.n(i),s=n("3c1N"),l=n.n(s),d=n("/yvb"),u=n("rHpw"),p=c.a.bb081ea1,m=function(e){function t(){return e.apply(this,arguments)||this}return a()(t,e),t.prototype.render=function(){var e=this.props,t=e.onPress,n=e.to;return o.createElement(d.a,{accessibilityLabel:p,icon:o.createElement(l.a,null),link:n,onPress:t,pullRight:!0,style:f.button,type:"text"})},t}(o.PureComponent),f=u.a.create((function(e){return{button:{marginVertical:"calc(-"+e.spaces.xSmall+")"}}}));t.a=m}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/web_legacy/bundle.DirectMessages.149b50e4.js.map