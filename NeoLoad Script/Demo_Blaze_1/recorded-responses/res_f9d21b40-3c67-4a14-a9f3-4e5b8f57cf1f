(window.webpackJsonp=window.webpackJsonp||[]).push([[182],{TzCa:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));a("7x/C"),a("JtPf");var r=a("ERkP"),n=a("zb92"),i=Object(n.a)({loader:function(){return a.e(184).then(a.bind(null,"tpds"))},renderPlaceholder:function(){return null}});function c(e){return r.createElement(i,{player:e})}},"aX4+":function(e,t,a){"use strict";a.r(t),a.d(t,"HWCard",(function(){return Ae}));a("LW0h"),a("z84I"),a("ho0z"),a("IAdD");var r=a("LdEA"),n=a.n(r),i=a("97Jx"),c=a.n(i),o=a("1Pcy"),d=a.n(o),s=a("W/Kd"),u=a.n(s),l=a("KEM+"),_=a.n(l),p=a("ERkP"),m=a("bU1N"),v=a("SMZj"),b=a("Tb0w"),f=a("6rlp"),g=a("vjRr"),h=a("rxPX"),y=a("0KEI"),w=a("P1r1"),I=a("oEOe"),C=a("/kEJ"),T=I.a("rweb/cards",""),S=function(e,t){return function(a,r,n){var i=n.api;return I.b(a,{params:{ids:[t]},request:i.Broadcasts.fetchBroadcast})({actionTypes:T,context:"FETCH_BROADCAST",meta:{}},(function(t){if(t){var a,n=t.result.broadcasts[0],i=t.entities.broadcasts[n],c=g.a.select(r(),e);if(!c)return[];var o=E(i,c);return[Object(C.c)({cards:(a={},a[e]=Object.assign({},o),a)})]}}))}},E=function(e,t){var a=e.pre_live_slate_url,r=e.scheduled_start_ms,n=e.state,i=e.status,c=e.twitter_user_id,o=e.user_display_name,d=t.hw_card_binding_values;return{hw_card_binding_values:Object.assign({},d,{broadcast_state:{type:"STRING",string_value:n},broadcast_title:{type:"STRING",string_value:i},site:{type:"USER",user_value:{id_str:c}},broadcaster_display_name:{type:"STRING",string_value:o},broadcast_scheduled_start_time:{type:"STRING",string_value:r}},a?{broadcast_pre_live_slate:{type:"IMAGE",image_value:{url:a}}}:null)}},O=function(e,t){return t.cardState||b.b(e,t.card.url)},x=function(e,t){return t.card.binding_values.broadcast_id&&"STRING"===t.card.binding_values.broadcast_id.type?t.card.binding_values.broadcast_id.string_value:void 0},R=Object(h.a)().propsFromState((function(){return{cardState:O,isDataSaverEnabled:w.j,broadcastId:x}})).propsFromActions((function(){return{createLocalApiErrorHandler:Object(y.d)("CARD_CONTAINER"),requestCardUpdate:g.a.fetchOne,log:f.a,updateBroadcastCard:S,vote:g.a.vote,remindMeButtonSubscribe:g.a.eventSubscribe,remindMeButtonUnsubscribe:g.a.eventUnsubscribe}})).withAnalytics({element:"platform_card"}),L=a("TrHT"),j=a("wrlS"),A=a("F3pd"),k=function(e,t,a,r){switch(e){case"card_url_click":return{event:"card_url_click"};case"install_app":return{event:"install_app"};case"dm_button_click":return{event:"card_url_click",engagement_metadata:JSON.stringify({direct_message_card_details:{button_index:a}})};case"convo_button_click":return{event:"card_click",engagement_metadata:JSON.stringify({conversational_card_details:{button_index:a}})};case"poll_card_vote":return{event:"poll_card_vote"};case"unified_card_component_url_click":return Object.assign({event:"unified_card",uc_event:JSON.stringify({event:"click",component:t,destination:"browser"})},"button_group"===t||r?{engagement_metadata:JSON.stringify(Object.assign({uc_button_group_details:{button_index:a}},r?{uc_event_metadata:r}:null))}:null);case"unified_card_component_app_store_click":return{event:"unified_card",uc_event:JSON.stringify({event:"click",component:"details"===t?"app_store_details":t,destination:"app_store"}),engagement_metadata:JSON.stringify({uc_event_metadata:Object.assign({},r,{app_event:"install_app"},"button_group"===t?{button_index:a}:null)})};case"unified_card_carousel_swipe_next":case"unified_card_carousel_swipe_previous":return{event:"unified_card",uc_event:JSON.stringify({event:"unified_card_carousel_swipe_next"===e?"swipe_next":"swipe_previous",component:t}),engagement_metadata:JSON.stringify({uc_event_metadata:r})};default:return null}},M=a("3XMw"),N=a.n(M),P=(a("vrRf"),a("Blm6"),a("Zb1g")),F=a("nT9l"),U=a("aITJ"),B=a("TIdA"),J=a("Jd6J"),D=a("A91F"),q=a("t62R"),H=!1,V=N.a.ic1e826e,G=N.a.c8b4bcaf,X=N.a.b62956a9,z=N.a.b5298d91,W=N.a.i3ea806a,K=N.a.fd00a769,Z=N.a.e0aa5848,Y=N.a.d3f6b1a6,Q=N.a.b0e322cc,$=N.a.cb8bddc7,ee=N.a.cb8c547e,te=N.a.d980e29e,ae=N.a.f93bb3ee,re=N.a.fc209bb7,ne=U.a.isIOS()?"ios":U.a.isAndroid()?"android":"other",ie={},ce=function(e){return function(t,a,r){var n=0===t.indexOf("card://"),i=a||!n?""+(a||"")+(a&&!n?" ":"")+(n?"":t):null;e.push(Object.assign({pathname:"/compose/tweet"},i?{query:{text:i}}:null,{state:{convoCardData:{cardId:t,cardUrl:n?t:null,nextState:r}}}))}};function oe(e){var t,a;H||(H=!0,J.b.init((t=e,a=t.history,[{composeDirectMessage:function(e){var t=e.recipient,r=e.welcomeMessageId,n=e.messageText,i={recipient_id:t};r&&(i.welcome_message_id=r),n&&(i.text=n),a.push({pathname:"/messages/compose",query:Object.assign({},i)})},composeTweet:ce(a),getFetchIntervalSeconds:function(){return 30},getCtaString:function(e){switch(e){case"play":return V;case"shop":return G;case"book":return X;case"connect":return z;case"order":return W;case"open":return K;case"install":default:return Z}},getMessageMeString:function(e){switch(e){case"message_me_card_cta_1":return Y;case"message_me_card_cta_3":return $;case"message_me_card_cta_4":return ee;case"message_me_card_cta_2":default:return Q}},getMobileOS:function(){return ne},renderImage:function(e,t,a,r,n,i){var c=e.uri,o=e.width,d=e.height,s=r?function(e){if(ie[e])return ie[e];var t=B.a.createLayoutCache();return ie[e]=t,t}(r):void 0,u=function(e){var a=e.useMinimumData;return p.createElement(B.a,{accessibilityLabel:i,aspectMode:D.a.exact(t||1),cropCandidates:n,image:{url:c,width:o||1e3,height:d||1e3},layoutCache:s,previewMode:a})};return"preview"===a?p.createElement(F.a,{acceptLabel:ae,renderContent:u,resourceId:c}):u({useMinimumData:!1})},renderTwemojiText:function(e){return p.createElement(q.c,null,e)},renderNumVotesLabel:function(e){return P.d({count:e,formattedCount:P.c(e)})},renderFinalResultsLabel:function(){return P.a},renderTimeLeftLabel:function(e){return P.b(e)},renderStartingTimeLabel:function(e){var t=new Date(parseInt(e,10));return te({date:re(t)})}}])[0]))}var de=a("v6aA"),se=a("TzCa"),ue=a("cFuS"),le=a("Rp9C"),_e=a("Jkc4"),pe=(a("2G9S"),a("XOJV")),me=function(e,t){return t.media_tweet_id},ve=function(e,t){var a=me(0,t);return a?pe.a.selectFetchStatus(e,a):void 0},be=Object(h.a)().propsFromState((function(){return{videoTweetFetchStatus:ve,videoTweet:pe.a.createHydratedTweetSelector(me)}})).propsFromActions((function(){return{createLocalApiErrorHandler:Object(y.d)("EVENT_CARD_CONTEXT"),fetchTweetIfNeeded:pe.a.fetchOneIfNeeded}})),fe=a("v//M"),ge=a("W5XZ"),he=a("fUT7"),ye=a("Modb"),we=a("lklz"),Ie=a("3xO4"),Ce=a.n(Ie),Te=a("9Xij"),Se=a("rHpw"),Ee=N.a.a1979463,Oe=be(function(e){function t(){for(var t,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return t=e.call.apply(e,[this].concat(r))||this,_()(d()(t),"_renderInlinePlayer",(function(){var e,a=t.props,r=a.aspect_ratio,n=a.event_id,i=a.media_tweet_id,o=a.poster_image,d=a.promotedContent,s=a.videoTweet,u=null==s||null===(e=s.extended_entities)||void 0===e?void 0:e.media[0],l=we.b.forTweet(i);return u?p.createElement(ye.a,c()({},Object(L.a)(l,u,n),{aspectRatio:r,poster:o,promotedContent:d})):null})),_()(d()(t),"_handleFetchTweet",(function(){var e=t.props,a=e.createLocalApiErrorHandler,r=e.fetchTweetIfNeeded,n=e.media_tweet_id;he.a.preload(),r(n).catch(a(ge.a))})),t}u()(t,e);var a=t.prototype;return a.componentDidMount=function(){this._handleFetchTweet()},a.render=function(){var e=this.props,t=e.aspect_ratio,a=e.media_tweet_id,r=e.videoTweetFetchStatus;return a?p.createElement(Te.a,{ratio:t},p.createElement(Ce.a,{style:Se.a.absoluteFill},p.createElement(fe.a,{accessibilityLabel:Ee,fetchStatus:r,onRequestRetry:this._handleFetchTweet,render:this._renderInlinePlayer}))):null},t}(p.Component)),xe=a("TnY3"),Re=U.a.isTwitterLiteAPK(),Le=N.a.ac4c73d8,je={objectFitVideo:"cover"},Ae=function(e){function t(t,a){var r;return r=e.call(this,t,a)||this,_()(d()(r),"_getCardState",(function(){var e=r.props,t=e.cardState;return"player"===e.card.name&&Re?"static":t})),_()(d()(r),"_updateBroadcastCard",(function(e){var t=e[0],a=r.props,n=a.broadcastId,i=a.updateBroadcastCard,c=a.createLocalApiErrorHandler;n&&i(t,n).catch(c())})),_()(d()(r),"_handleRequestCardUpdate",(function(){var e=r.context.loggedInUserId,t=r.props,a=t.card,n=t.requestCardUpdate,i=t.createLocalApiErrorHandler;return a.name===v.c.TwitterBroadcast?r._updateBroadcastCard:e?function(e,t){var a=Object.assign({},t);n(e,a).catch(i())}:void 0})),_()(d()(r),"_handlePromotedLogEvent",(function(e){var t=e.action,a=e.componentType,n=e.buttonIndex,i=e.isAuthRequired,c=e.ucPromotedMetadata,o=r.props,d=o.createLocalApiErrorHandler,s=o.cardContext,u=o.log,l=o.promotedContent,_=r.context.loggedInUserId;if((!i||_)&&l&&s){var p=l.disclosure_type,m=l.impression_id;u({disclosureType:p,itemId:s.tweetId,itemType:ue.c.TWEET,params:Object.assign({impression_id:m},k(t,a,n,c))}).catch(d())}})),_()(d()(r),"_handleScribeEvent",(function(e){var t=e.action,a=e.componentType,n=e.cardName,i=e.cardUrl,c=e.ctaIndex,o=e.isMessageMe,d=e.isAuthRequired,s=r.props,u=s.analytics,l=s.cardContext,_=s.promotedContent,p=r.context.loggedInUserId,m="unified_card_app_store_open_link"===t?"open_link":t,v=_&&"earned"!==Object(A.a)(_)?_.impression_id:void 0;d&&!p||u.scribe({action:m,data:{items:[le.a.getHWCardItem(Object.assign({componentType:a,cardName:n,cardUrl:i,ctaIndex:c,tweetId:l.tweetId,tweetUserId:l.tweetUserId},o?{viewingUserId:p}:null,{isUCAppInstall:"unified_card_app_store_open_link"===t,impressionId:v}))]}})})),_()(d()(r),"_handlePollVote",(function(e){var t=e.choice,a=e.cardId,n=r.props,i=n.cardContext.tweetId;(0,n.vote)(a,{selectedIndex:t,tweetId:i})})),_()(d()(r),"_handleEventReminderClick",(function(e){var t=e.cardId,a=e.eventId,n=e.notificationId,i=e.remindMe,c=r.props,o=c.remindMeButtonSubscribe,d=c.remindMeButtonUnsubscribe;i?o(t,a,{remind_me:i,notification_id:n}):d(t,a,{remind_me:i,notification_id:n})})),_()(d()(r),"_renderVideoPlayer",(function(e,t,a){var i=r.props,o=i.cardContext.tweetId,d=i.promotedContent,s=(d||{}).impression_id;if("live_broadcast"===e.type){var u=e.broadcast_id,l=e.aspect_ratio,_=e.content_id,m=e.poster_image,v=e.timecode;return p.createElement(ye.a,{accessibilityLabel:Le,aspectRatio:a||l,customOverlay:se.a,displayOptions:je,forceFullPreviewImage:"suboptimal"===t,poster:m,promotedContent:d,source:{contentId:_,videoId:we.b.forBroadcast(u,o,s)},timecode:v,videoType:"video"})}if("tweet_video"===e.type)return p.createElement(Oe,c()({},e,{promotedContent:j.a.isTrue("live_event_vod_promoted_content_enabled")?d:void 0}));if("uc_video"===e.type){e.type;var b=e.original_info,f=n()(e,["type","original_info"]),g=Object(L.a)(we.b.forTweet(o,s),Object.assign({},f,{original_info:Object.assign({},b),type:"video"})),h=(g.accessibilityLabel,g.backgroundColor,g.primaryLabel,g.secondaryLabel,n()(g,["accessibilityLabel","backgroundColor","primaryLabel","secondaryLabel"]));return a&&(h.aspectRatio=a),p.createElement(ye.a,c()({forceFullPreviewImage:"suboptimal"===t},h,{accessibilityLabel:Le,promotedContent:d}))}var y=e.aspect_ratio,w=e.content_id,I=e.duration_ms,C=e.poster_image,T=e.variants,S=e.vmap_url,E=T&&T.filter((function(e){return!!e.src}));return o?p.createElement(ye.a,{accessibilityLabel:Le,aspectRatio:a||y,durationMs:I,forceFullPreviewImage:"suboptimal"===t,poster:C,promotedContent:d,source:Object.assign({contentId:w},E&&E.length>0?{variants:E.map((function(e){return{content_type:e.type,url:e.src}}))}:null,{videoId:{type:"tweet",id:o},vmapUrl:S}),videoType:"vine"===e.type?"vine":"video"}):null})),oe({history:t.history}),r}return u()(t,e),t.prototype.render=function(){var e=this,t=this.props,a=t.dmSentOrReceived,r=t.isDataSaverEnabled,n=t.promotedContent,i=t.card,c=t.cardContext,o=t.isInteractive,d=t.withSquareBottomBorderRadius,s=j.a.isTrue("unified_cards_cta_color_blue_cta");return p.createElement(_e.a,null,(function(t){return p.createElement(m.a,{card:i,cardContext:c,cardState:e._getCardState(),dmSentOrReceived:a,isDataSaverEnabled:r,isInteractive:o,isPromoted:!!n,onEventReminderClick:t(e._handleEventReminderClick),onPollVote:t(e._handlePollVote),onPromotedLogEvent:e._handlePromotedLogEvent,onScribeEvent:e._handleScribeEvent,promotedContent:n,renderVideoPlayer:e._renderVideoPlayer,requestCardUpdate:e._handleRequestCardUpdate(),useBlueButtonForAppDetails:s,withSquareBottomBorderRadius:d})}))},t}(p.Component);_()(Ae,"contextType",de.a);var ke=R(Object(xe.a)(Ae));t.default=ke}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/web_legacy/loader.HWCard.aeb26314.js.map