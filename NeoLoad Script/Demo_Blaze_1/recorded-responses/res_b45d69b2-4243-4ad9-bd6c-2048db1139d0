(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{"3OvD":function(e,t,a){"use strict";a("IAdD"),t.__esModule=!0,t.default=void 0;var n=o(a("7DT3")),r=o(a("ERkP")),i=o(a("OkZJ"));function o(e){return e&&e.__esModule?e:{default:e}}var d=function(e){return void 0===e&&(e={}),(0,n.default)("svg",Object.assign({},e,{style:[i.default.root,e.style],viewBox:"0 0 24 24"}),r.default.createElement("g",null,r.default.createElement("path",{d:"M19.708 22H4.292C3.028 22 2 20.972 2 19.708V7.375C2 6.11 3.028 5.083 4.292 5.083h2.146C7.633 3.17 9.722 2 12 2c2.277 0 4.367 1.17 5.562 3.083h2.146C20.972 5.083 22 6.11 22 7.375v12.333C22 20.972 20.972 22 19.708 22zM4.292 6.583c-.437 0-.792.355-.792.792v12.333c0 .437.355.792.792.792h15.416c.437 0 .792-.355.792-.792V7.375c0-.437-.355-.792-.792-.792h-2.45c-.317.05-.632-.095-.782-.382-.88-1.665-2.594-2.7-4.476-2.7-1.883 0-3.598 1.035-4.476 2.702-.16.302-.502.46-.833.38H4.293z"}),r.default.createElement("path",{d:"M12 8.167c-2.68 0-4.86 2.18-4.86 4.86s2.18 4.86 4.86 4.86 4.86-2.18 4.86-4.86-2.18-4.86-4.86-4.86zm2 5.583h-1.25V15c0 .414-.336.75-.75.75s-.75-.336-.75-.75v-1.25H10c-.414 0-.75-.336-.75-.75s.336-.75.75-.75h1.25V11c0-.414.336-.75.75-.75s.75.336.75.75v1.25H14c.414 0 .75.336.75.75s-.336.75-.75.75z"})))};d.metadata={height:24,width:24};var l=d;t.default=l},"51jI":function(e,t,a){"use strict";t.a={edit:"ProfileBirthdate_Edit_Button",cancel:"ProfileBirthdate_Cancel_Button",save:"Profile_Save_Button",remove:"ProfileBirthdate_Remove_Button",monthSelector:"ProfileBirthdate_Month_Selector",daySelector:"ProfileBirthdate_Day_Selector",yearSelector:"ProfileBirthdate_Year_Selector",missingBirthdate:"ProfileBirthdate_Missing_Birthdate"}},"53j7":function(e,t,a){"use strict";a.d(t,"f",(function(){return v})),a.d(t,"g",(function(){return g})),a.d(t,"a",(function(){return M})),a.d(t,"c",(function(){return y})),a.d(t,"b",(function(){return A})),a.d(t,"d",(function(){return P})),a.d(t,"e",(function(){return S})),a.d(t,"h",(function(){return w})),a.d(t,"i",(function(){return O})),a.d(t,"j",(function(){return L}));a("IAdD"),a("7x/C"),a("JtPf");var n,r=a("oEOe"),i=a("AspN"),o=a("/kEJ"),d=a("XMGw"),l=a("Ssj5"),c=d.a+"/profile",s="rweb/"+c,u=function(e){return s+"/"+e},h=r.a(s,"REMOVE_PROFILE_BANNER"),p=r.a(s,"UPDATE_PROFILE"),f=r.a(s,"UPDATE_PROFILE_AVATAR"),m=r.a(s,"UPDATE_PROFILE_BANNER"),_=r.a(s,"UPLOAD_MEDIA"),b={avatarMediaId:null,bannerMediaId:null,isUploading:!1};var v=function(e){return e[c].avatarMediaId},g=function(e){return e[c].bannerMediaId},C=u("ADD_AVATAR_MEDIA"),M=function(e){return{meta:{mediaId:e},type:C}},E=u("REMOVE_AVATAR_MEDIA"),y=function(e){return{meta:{mediaId:e},type:E}},B=u("ADD_BANNER_MEDIA"),A=function(e){return{meta:{mediaId:e},type:B}},R=u("REMOVE_BANNER_MEDIA"),P=function(e){return{meta:{mediaId:e},type:R}},S=function(e){return function(t,a,n){var i=n.api;return r.b(t,{params:e,request:i.Settings.removeProfileBanner})({actionTypes:h,context:"ACTION_REMOVE_USER_BANNER"},(function(e){var t;if(e)return[Object(o.c)({users:(t={},t[e.id_str]=Object.assign({},e,{profile_banner_url:null}),t)})]}))}},w=function(e){return function(t,a,n){var i=n.api;return r.b(t,{params:e,request:i.Settings.updateProfile})({actionTypes:p,context:"ACTION_UPDATE_PROFILE_SETTINGS"},(function(e){if(e&&e.entities)return[Object(o.c)(e.entities)]}))}},I=function(e,t,a){return function(n){return function(d,l,c){var s=c.api;d({type:_.REQUEST});var u=i.k(n);return d(u).then((function(n){var i=n[0];d([{type:_.SUCCESS},{type:e.REQUEST}]);return r.b(d,{params:{media_id:i.uploadId},request:a(s)})({actionTypes:p,context:t},(function(e){var t;if(e)return[Object(o.c)({users:(t={},t[e.id_str]=e,t)})]}))}),(function(e){return d({type:_.FAILURE}),Promise.reject(e)}))}}},O=I(f,"ACTION_UPDATE_USER_AVATAR",(function(e){return e.Settings.updateProfileAvatar})),L=I(m,"ACTION_UPDATE_USER_BANNER",(function(e){return e.Settings.updateProfileBanner}));l.a.register(((n={})[c]=function(e,t){switch(void 0===e&&(e=b),void 0===t&&(t={}),t.type){case C:return Object.assign({},e,{avatarMediaId:t.meta.mediaId});case E:return Object.assign({},e,{avatarMediaId:null});case B:return Object.assign({},e,{bannerMediaId:t.meta.mediaId});case R:return Object.assign({},e,{bannerMediaId:null});case _.REQUEST:return Object.assign({},e,{isUploading:!0});case _.FAILURE:case _.SUCCESS:return Object.assign({},e,{isUploading:!1});default:return e}},n))},P68U:function(e,t,a){"use strict";a("2G9S"),a("hBpG"),a("hCOa"),a("jQ3i"),a("z84I"),a("x4t0"),a("87if");var n=a("1Pcy"),r=a.n(n),i=a("W/Kd"),o=a.n(i),d=a("KEM+"),l=a.n(d),c=a("ERkP"),s=a("oEGd"),u=a("AspN"),h={addMedia:u.b,processMultipleMedia:u.d},p=Object(s.b)(h),f=a("3XMw"),m=a.n(f),_=a("3OvD"),b=a.n(_),v=a("l2F/"),g=a.n(v),C=a("pKoL"),M=a("3xO4"),E=a.n(M),y=a("rFBM"),B=a("/yvb"),A=a("9Xij"),R=a("rHpw"),P=a("VPdC"),S=m.a.b87ca51a,w=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return t=e.call.apply(e,[this].concat(n))||this,l()(r()(t),"_getAcceptedFileInputs",(function(){var e=t.props,a=e.acceptGifs,n=e.acceptVideo;return Object(P.b)({acceptGifs:a,acceptVideo:n})})),l()(r()(t),"_handleAddMediaFiles",(function(e){var a=t.props,n=a.addMedia,r=a.location,i=a.onChange,o=a.onFailure,d=a.processMultipleMedia,l=t._getAcceptedFileInputs(),c=Array.from(e).find((function(e){return l.includes(e.type)}));c&&n([c],{location:r}).then((function(e){i&&i(e.map((function(e){return e.id}))),d(e,{onFailure:o})}))})),t}o()(t,e);var a=t.prototype;return a.render=function(){var e=this.props,t=e.borderRadius,a=e.maskStyle,n=e.mediaItem,r=e.onRemove,i=e.rootStyle,o=n&&!n.uploader;return c.createElement(E.a,{style:[O.container,i,I[t]]},c.createElement(y.a,{onFilesAdded:this._handleAddMediaFiles,style:[O.dragDropContainer,I[t]]},this._renderPreview(),o?null:c.createElement(c.Fragment,null,c.createElement(E.a,{style:[O.mask,a,I[t]]}),c.createElement(E.a,{style:O.mediaPicker},this._renderMediaPicker(),r?this._renderMediaRemove():null))))},a._renderMediaRemove=function(){var e=this.props.onRemove;return c.createElement(B.a,{accessibilityLabel:S,icon:c.createElement(g.a,null),onPress:e,style:O.remove,type:"invertedText"})},a._renderMediaPicker=function(){var e=this.props,t=e.acceptGifs,a=e.acceptVideo,n=e.accessibilityLabel;return c.createElement(P.a,{acceptGifs:t,acceptVideo:a,accessibilityLabel:n,icon:c.createElement(b.a,null),onChange:this._handleAddMediaFiles,type:"invertedText"})},a._renderPreview=function(){var e=this.props,t=e.aspectRatio,a=e.borderRadius,n=e.currentContent,r=e.mediaItem;return r?c.createElement(A.a,{ratio:t},c.createElement(C.a,{borderRadius:a,enableGif:!1,mediaItem:r,style:O.mediaPreview,withCloseButton:!1})):n},t}(c.Component);l()(w,"defaultProps",{acceptGifs:!1,acceptVideo:!1,aspectRatio:1,borderRadius:"none"});var I=R.a.create((function(e){return{infinite:{borderRadius:e.borderRadii.infinite},medium:{borderRadius:e.borderRadii.medium},none:{borderRadius:0}}})),O=R.a.create((function(e){return{mediaPreview:{height:"100%"},mediaPicker:{alignItems:"center",flexDirection:"row",height:"100%",justifyContent:"center",opacity:.75,position:"absolute",top:0,width:"100%"},remove:{marginLeft:e.spaces.large},mask:{backgroundColor:e.colors.translucentBlack30,height:"100%",position:"absolute",top:0,width:"100%"},container:{justifyContent:"center",overflow:"hidden"},dragDropContainer:{borderWidth:e.borderWidths.medium,borderColor:e.colors.transparent,borderStyle:"solid"}}}));t.a=p(w)},PVvL:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("yH/f");var n=Object.freeze({SELF:"self",MUTUAL_FOLLOW:"mutualfollow",FOLLOWING:"following",FOLLOWERS:"followers",PUBLIC:"public"})},fS8x:function(e,t,a){"use strict";var n=a("ERkP"),r=a("1Pcy"),i=a.n(r),o=a("W/Kd"),d=a.n(o),l=a("KEM+"),c=a.n(l),s=a("rxPX"),u=a("/NU0"),h=a("AspN"),p=function(e,t){return t.media?t.media:Object(u.a)(t.mediaId)?Object(h.g)(e,t.mediaId)[0]:void 0},f=function(e,t){return void 0!==t.mediaId?t.mediaId:t.media?t.media.id:null},m=Object(s.a)().propsFromState((function(){return{media:p,mediaId:f}})).propsFromActions((function(){return{processMedia:h.c,updateMediaUpload:h.j}})).withAnalytics({page:"media",section:"edit"}),_=a("jHSc"),b=a("3XMw"),v=a.n(b),g=a("EeFI"),C=a("/yvb"),M=a("rHpw"),E=v.a.gd80afba,y=v.a.a753a87f,B=function(e){function t(t){var a;return a=e.call(this,t)||this,c()(i()(a),"_getMedia",(function(){var e=a.props.media;return e&&e.mediaFile&&e.mediaFile.isImage?e:null})),c()(i()(a),"_renderAppBarRightControl",(function(){var e=a.state.isProcessing;return n.createElement(C.a,{disabled:e,onPress:a._handleApplyButtonClick,size:"normalCompact",type:"primary"},y)})),c()(i()(a),"_handleBackClick",(function(){var e=a.props,t=e.analytics,n=e.onCancel;t.scribe({action:"cancel"}),n&&n()})),c()(i()(a),"_handleApplyButtonClick",(function(){var e=a.props.onCropDone,t=a._cropper.current;if(t){var n=a.props,r=n.analytics,i=n.media,o=n.mediaId,d=n.onDone,l=n.processMedia,c=n.updateMediaUpload;a.setState({isProcessing:!0});var s=t.getCropData(),h=(i||{}).originalMediaFile,p=!h||0===s.top&&0===s.left&&s.width===h.width&&s.height===h.height;Object(u.a)(o)&&(e?(e(s),d()):(c({id:o,cropData:p?void 0:s}),l(o).then((function(){a.setState({isProcessing:!1}),r.scribe({action:"done"}),d()}))))}})),a.state={isProcessing:!1},a._cropper=n.createRef(),t.media||t.onCancel(),a}return d()(t,e),t.prototype.render=function(){var e=this.props,t=e.defaultAspectRatio,a=e.history,r=e.location,i=e.title,o=e.withAspectRatioOptions,d=e.withZoomControl,l=this._getMedia();return n.createElement(_.b,{backButtonType:"back",containerStyle:A.root,documentTitle:i||E,history:a,location:r,onBackClick:this._handleBackClick,rightControl:this._renderAppBarRightControl(),title:i||E},n.createElement(g.a,{defaultAspectRatio:t,media:l,ref:this._cropper,withAspectRatioOptions:o,withZoomControl:d}))},t}(n.Component),A=M.a.create((function(e){return{root:{flexShrink:1,height:650}}})),R=m(B),P=a("X8FW"),S=M.a.create((function(e){return{modal:{width:600,maxWidth:"90vw"}}}));t.a=function(e){return n.createElement(P.b,{clickMaskToClose:!1,location:e.location,modalSize:"fitChildren",style:S.modal},n.createElement(R,e))}},zITG:function(e,t,a){"use strict";a.r(t),a.d(t,"ProfileScreen",(function(){return ye}));a("1t7P"),a("jQ/y"),a("DfhM"),a("jwue"),a("ho0z"),a("IAdD"),a("+KXO"),a("KqXw"),a("MvUL"),a("+oxZ");var n=a("1Pcy"),r=a.n(n),i=a("W/Kd"),o=a.n(i),d=a("KEM+"),l=a.n(d),c=a("ERkP"),s=a("zh9S"),u=a("AspN"),h=a("53j7"),p=a("1YZw"),f=a("oEGd"),m=a("0KEI"),_=a("hqKg"),b=a("/NU0"),v=a("G6rE"),g=Object(_.createSelector)(v.e.selectLoggedInUser,(function(e,t){var a=h.f(e);return(Object(b.a)(a)?u.g(e,a):[])[0]}),(function(e,t){var a=h.g(e);return(Object(b.a)(a)?u.g(e,a):[])[0]}),(function(e,t,a){return{loggedInUser:e,avatarMedia:t,bannerMedia:a}})),C={addAvatarMedia:h.a,addBannerMedia:h.b,addToast:p.b,createLocalApiErrorHandler:Object(m.d)("SETTINGS_PROFILE_SCREEN"),googleAnalyticsPageView:s.a,removeAvatarMedia:h.c,removeBannerMedia:h.d,removeMediaUpload:u.e,removeProfileBanner:h.e,scribeAction:s.c,scribePageImpression:s.d,updateProfile:h.h,updateProfileAvatar:h.i,updateProfileBanner:h.j},M=Object(f.g)(g,C),E=a("wrlS"),y=a("jHSc"),B=a("kp0V"),A=a("fS8x"),R=a("mN6z"),P=a("P68U"),S=a("eyty"),w=(a("uFXj"),a("7x/C"),a("JtPf"),a("zb92")),I=a("RuTB"),O=Object(w.a)({loader:function(){return Promise.all([a.e(2),a.e(209)]).then(a.bind(null,"it2P"))},renderPlaceholder:function(e,t){return c.createElement(I.a,{error:e,onRetry:t})}}),L=a("3XMw"),j=a.n(L),D=a("51jI"),U=a("WWyu"),T=a("3xO4"),F=a.n(T),k=a("t62R"),x=a("21zW"),N=a("eb3s"),V=a("rHpw"),z=j.a.c119dee8,W=j.a.abd845fd,H=j.a.cfd2f35d,G=j.a.bbf0afc7,X={headline:j.a.f98d367e,text:j.a.b982a8b4,confirmButtonLabel:j.a.abd845fd},K=function(e){function t(t){var a;return a=e.call(this,t)||this,l()(r()(a),"_handleModalCancel",(function(){a.setState({showConfirmationModal:!1})})),l()(r()(a),"_handleModalConfirmed",(function(){a.setState({isEditing:!0,showConfirmationModal:!1})})),l()(r()(a),"_handleEditPress",(function(){a.setState({showConfirmationModal:!0})})),l()(r()(a),"_handleRemoveBirthdate",(function(){var e=a.props.onRemoveBirthdate;a.setState({isEditing:!1}),e()})),l()(r()(a),"_handleCancelEditPress",(function(){a.props.onCancelEditBirthdate(),a.setState({isEditing:!1})})),a.state={isEditing:!1,showConfirmationModal:!1},a}o()(t,e);var a=t.prototype;return a.render=function(){var e=this.state.isEditing,t=this.props,a=t.birthdate,n=t.errors,r=t.onChange,i=t.showBirthdateRemoveButton,o=a.month&&a.day&&a.year;return c.createElement(F.a,{style:q.root},c.createElement(F.a,{style:q.container},e?c.createElement(k.c,{weight:"bold"},z):c.createElement(k.c,{color:"deepGray"},z),c.createElement(x.a,null),c.createElement(k.c,{accessibilityRole:"button",color:"link",onPress:e?this._handleCancelEditPress:this._handleEditPress,testID:e?D.a.cancel:D.a.edit,withInteractiveStyling:!0},e?H:W)),e?c.createElement(O,{birthdate:a,errors:n,onChange:r,onRemoveBirthdate:this._handleRemoveBirthdate,showBirthdateRemoveButton:i}):c.createElement(k.c,{size:"large",testID:o?void 0:D.a.missingBirthdate},o?c.createElement(U.a,{birthdate:a}):G),this._renderConfirmationModal())},a._renderConfirmationModal=function(){return this.state.showConfirmationModal?c.createElement(N.a,{confirmButtonLabel:X.confirmButtonLabel,headline:X.headline,onCancel:this._handleModalCancel,onConfirm:this._handleModalConfirmed,text:X.text,withForwardFocusOnConfirm:!0}):null},t}(c.Component),q=V.a.create((function(e){return{root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.small},container:{flexDirection:"row"},containerItem:{marginLeft:e.spaces.xxSmall}}})),J=a("PVvL"),Q=a("Dtul"),Z=a("BTou"),Y=(a("AxOO"),a("oSwX")),$=a("9Xij"),ee=a("Q0VY"),te=a("/yvb"),ae=a("p+r5"),ne=(a("aWzz"),a("jTgF")),re=a("D4le"),ie=a.n(re),oe=j.a.g7088266,de=j.a.d4e220b3,le=j.a.d9d293b8,ce=j.a.f9130a80,se=j.a.a990900c,ue=j.a.f7d20516,he=j.a.jaaa8984,pe=j.a.dcd7b98a,fe=j.a.i2209530,me=j.a.c9a30f8d,_e={page:"settings",section:"profile"},be=j.a.g511f467,ve=j.a.ec3a116d,ge=j.a.j94599ec,Ce=j.a.df31d76a,Me={confirmButtonLabel:j.a.g9677c6d,headline:j.a.c01a0e19},Ee={visibility:J.a.MUTUAL_FOLLOW,year_visibility:J.a.SELF},ye=function(e){function t(t){var a;a=e.call(this,t)||this,l()(r()(a),"_handleCancel",(function(){var e=a.props,t=e.history,n=e.location,r=e.loggedInUser,i=r?"/"+r.screen_name:"/login";Object(B.a)({history:t,location:n,backLocation:i})})),l()(r()(a),"_handleSubmit",(function(){var e=a._getBirthdateErrors();Object.keys(e).length?a.setState({errors:e}):a._shouldShowBirthdateConfirmationModal()?a.setState({showBirthdateConfirmationModal:!0}):a._saveChanges()})),l()(r()(a),"_getBirthdateErrors",(function(){var e=a.state.birthdate,t={};return e!==Ee&&["day","month","year"].forEach((function(a){e[a]||(t[a]=!0)})),t})),l()(r()(a),"_shouldShowBirthdateConfirmationModal",(function(){var e=a.props.loggedInUser,t=a.state.birthdate,n=["day","month","year"].every((function(e){return!!t[e]})),r=e&&e.birthdate||Ee,i=!Object(R.a)(r,t);return n&&i})),l()(r()(a),"_handleBirthdateModalCancel",(function(){a.setState({showBirthdateConfirmationModal:!1})})),l()(r()(a),"_handleBirthdateModalConfirm",(function(){a.setState({showBirthdateConfirmationModal:!1}),a._scribeBirthdateAddOrEdit(),a._saveChanges()})),l()(r()(a),"_handleBirthdateChange",(function(e){var t=a.state,n=t.birthdate,r=t.errors,i=Object.assign({},r);Object.keys(r).forEach((function(t){e[t]&&r[t]&&delete i[t]})),a.setState({birthdate:Object.assign({},n,e),errors:i})})),l()(r()(a),"_handleResetBirthdate",(function(){var e=a.props.loggedInUser&&a.props.loggedInUser.birthdate;a.setState({birthdate:e||Ee,errors:{}})})),l()(r()(a),"_handleRemoveBirthdate",(function(){var e=a.props,t=e.updateProfile,n=e.createLocalApiErrorHandler;(0,e.scribeAction)(Object.assign({},_e,{component:"birthdate",action:"remove"})),t({birthdate_day:0,birthdate_month:0,birthdate_year:0}).then((function(){a.setState({birthdate:Ee,errors:{}})})).catch(n({showToast:!0}))})),l()(r()(a),"_handleAvatarMediaChange",(function(e){var t=e[0],n=a.props,r=n.addAvatarMedia,i=n.avatarMedia;i&&a._clearAvatarMedia(i.id),r(t),a.setState({showAvatarCropper:!0})})),l()(r()(a),"_handleAvatarCropDone",(function(){return a.setState({showAvatarCropper:!1})})),l()(r()(a),"_handleAvatarCropCancel",(function(){return a._handleAvatarCropDone()})),l()(r()(a),"_handleBannerMediaChange",(function(e){var t=e[0],n=a.props,r=n.addBannerMedia,i=n.bannerMedia;i&&a._clearBannerMedia(i.id),r(t),a.setState({showBannerCropper:!0})})),l()(r()(a),"_handleBannerCropDone",(function(){return a.setState({showBannerCropper:!1})})),l()(r()(a),"_handleBannerCropCancel",(function(){return a._handleBannerCropDone()})),l()(r()(a),"_handleBannerMediaRemove",(function(){var e=a.props.bannerMedia;e?a._clearBannerMedia(e.id):a.setState({shouldDeleteBanner:!0})})),l()(r()(a),"_handleAvatarMediaFailure",(function(e){a._clearAvatarMedia(e)})),l()(r()(a),"_handleBannerMediaFailure",(function(e){a._clearBannerMedia(e)})),l()(r()(a),"_handleMediaUpdateFailureFactory",(function(e,t){return function(n){var r=a.props,i=r.addToast,o=r.createLocalApiErrorHandler,d=r.removeMediaUpload,l=Object(ne.a)(n);if(l){var c=Object(ne.b)(l,t);c&&i(c)}else o({showToast:!0})(n);d(e.id)}})),l()(r()(a),"_handleChangeDisplayName",(function(e){a.setState({name:e.currentTarget.value})})),l()(r()(a),"_handleChangeDescription",(function(e){a.setState({description:e.currentTarget.value})})),l()(r()(a),"_handleChangeLocation",(function(e){a.setState({location:e.currentTarget.value})})),l()(r()(a),"_handleChangeURL",(function(e){a.setState({url:e.currentTarget.value})}));var n=t.loggedInUser;return a.state={displayNameMaxLength:E.a.getNumberValue("user_display_name_max_limit",20),birthdate:n&&n.birthdate||Ee,showBirthdateConfirmationModal:!1,errors:{},showAvatarCropper:!1,showBannerCropper:!1,shouldDeleteBanner:!1},a}o()(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this.props,t=e.googleAnalyticsPageView,a=e.scribePageImpression,n=e.loggedInUser,r=e.history;n?(a(_e),t(_e),this._unlockReload=Q.a.acquire()):r.push("/login")},a.componentWillUnmount=function(){var e=this.props,t=e.avatarMedia,a=e.bannerMedia;t&&this._clearAvatarMedia(t.id),a&&this._clearBannerMedia(a.id),this._unlockReload()},a.render=function(){var e=this.props.loggedInUser;return e?this._render(e):null},a._render=function(e){var t=this.props,a=t.location,n=t.avatarMedia,r=t.bannerMedia,i=t.history,o=this.state,d=o.displayNameMaxLength,l=o.shouldDeleteBanner,s=o.showAvatarCropper,u=o.showBannerCropper,h=o.errors,p=e.entities.url,f=p&&p.urls?p.urls[0].expanded_url:null,m=c.createElement(Y.default,{size:"custom",uri:e.profile_image_url_https}),_=r||e.profile_banner_url&&!l,b=c.createElement($.a,{ratio:V.a.theme.aspectRatios.profileBanner},_?c.createElement(ie.a,{source:{uri:e.profile_banner_url},style:Be.banner}):null),v=e.description;null!==v&&ee.a.descriptionTextParts(v,e.entities).forEach((function(e){"url"===e.entityType&&(v=v.replace(e.url,e.displayUrl))}));var g=!!(n&&!n.uploader||r&&!r.uploader)||!!Object.keys(h).length,C=c.createElement(te.a,{disabled:g,onPress:this._handleSubmit,size:"normalCompact",testID:D.a.save,type:"primary"},fe);return c.createElement(y.b,{history:i,location:a,onBackClick:this._handleCancel,rightControl:C,title:oe},c.createElement(F.a,{style:Be.container},c.createElement(P.a,{accessibilityLabel:Ce,aspectRatio:3,currentContent:b,location:S.c.Banner,mediaItem:r,onChange:this._handleBannerMediaChange,onFailure:this._handleBannerMediaFailure,onRemove:_?this._handleBannerMediaRemove:void 0,rootStyle:Be.bannerContainer}),c.createElement(P.a,{accessibilityLabel:ge,borderRadius:"infinite",currentContent:m,location:S.c.Avatar,mediaItem:n,onChange:this._handleAvatarMediaChange,onFailure:this._handleAvatarMediaFailure,rootStyle:Be.avatarContainer}),c.createElement(ae.a,{autoComplete:"off",defaultValue:e&&e.name,label:de,maxLength:d,name:"displayName",onChange:this._handleChangeDisplayName,placeholder:me}),c.createElement(ae.a,{defaultValue:v,label:se,maxLength:160,multiline:!0,name:"description",numberOfLines:3,onChange:this._handleChangeDescription,placeholder:ue}),c.createElement(ae.a,{defaultValue:e&&e.location,label:he,maxLength:30,name:"location",onChange:this._handleChangeLocation,placeholder:pe}),c.createElement(ae.a,{defaultValue:f||"",label:le,maxLength:100,name:"url",onChange:this._handleChangeURL,placeholder:ce}),this._renderProfileBirthdate(),this._renderBirthdateConfirmationModal()),s?c.createElement(A.a,{circle:!0,defaultAspectRatio:1,location:a,media:n,onCancel:this._handleAvatarCropCancel,onDone:this._handleAvatarCropDone}):null,u?c.createElement(A.a,{defaultAspectRatio:3,location:a,media:r,onCancel:this._handleBannerCropCancel,onDone:this._handleBannerCropDone}):null)},a._renderProfileBirthdate=function(){var e=this.state,t=e.birthdate,a=e.errors,n=this.props.loggedInUser;return c.createElement(K,{birthdate:t,errors:a,onCancelEditBirthdate:this._handleResetBirthdate,onChange:this._handleBirthdateChange,onRemoveBirthdate:this._handleRemoveBirthdate,showBirthdateRemoveButton:!(!n||!n.birthdate)})},a._renderBirthdateConfirmationModal=function(){return this.state.showBirthdateConfirmationModal?c.createElement(N.a,{confirmButtonLabel:Me.confirmButtonLabel,headline:Me.headline,onCancel:this._handleBirthdateModalCancel,onConfirm:this._handleBirthdateModalConfirm,text:this._getBirthdateConfirmationModalText()}):null},a._getBirthdateConfirmationModalText=function(){var e=this.state.birthdate,t=e.day,a=e.month,n=e.year;return c.createElement(j.a.I18NFormatMessage,{$i18n:"e9dec56e"},c.createElement(U.a,{birthdate:{day:t,month:a,year:n}}))},a._saveChanges=function(){var e=this,t=this.props,a=t.avatarMedia,n=t.bannerMedia,r=t.createLocalApiErrorHandler,i=t.removeMediaUpload,o=t.updateProfile,d=t.updateProfileAvatar,l=t.updateProfileBanner,c=t.removeProfileBanner;if(a){var s=a.id;d(s).then((function(){return i(s)}),this._handleMediaUpdateFailureFactory(a,be))}n?l(n.id).then((function(){return i(n.id)}),this._handleMediaUpdateFailureFactory(n,ve)):this.state.shouldDeleteBanner&&c().catch(r({showToast:!0})),o(this._getFormattedState()).then((function(){Z.a.refreshHTMLCache(),e._handleCancel()})).catch(r({showToast:!0}))},a._getFormattedState=function(){var e=this.state,t=e.birthdate,a=e.displayNameMaxLength,n=e.url,r=e.name,i=e.description,o=e.location,d=t.day,l=t.month,c=t.year,s=t.visibility,u=t.year_visibility,h=d&&l&&c?{birthdate_day:d,birthdate_month:l,birthdate_year:c,birthdate_visibility:s,birthdate_year_visibility:u}:{};return Object.assign({},h,{displayNameMaxLength:a,url:n,name:r,description:i,location:o})},a._scribeBirthdateAddOrEdit=function(){var e=this.props,t=e.scribeAction,a=e.loggedInUser,n=a&&a.birthdate,r=n&&n.month&&n.day&&n.year?"edit":"add";t(Object.assign({},_e,{component:"birthdate",action:r}))},a._clearAvatarMedia=function(e){var t=this.props,a=t.avatarMedia,n=t.removeAvatarMedia,r=t.removeMediaUpload;a&&a.uploading||r(e),n(e)},a._clearBannerMedia=function(e){var t=this.props,a=t.bannerMedia,n=t.removeBannerMedia,r=t.removeMediaUpload;a&&a.uploading||r(e),n(e)},t}(c.Component),Be=V.a.create((function(e){return{avatarContainer:{backgroundColor:e.colors.cellBackground,borderWidth:e.borderWidths.medium,borderColor:e.colors.cellBackground,borderStyle:"solid",marginLeft:"1rem",marginTop:"-3rem",maxWidth:"8rem",width:"25%"},banner:{height:"100%"},bannerContainer:{maxHeight:"200px"},container:{paddingBottom:e.spaces.jumbo}}}));t.default=M(ye)}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/web_legacy/bundle.SettingsProfile.bef58954.js.map