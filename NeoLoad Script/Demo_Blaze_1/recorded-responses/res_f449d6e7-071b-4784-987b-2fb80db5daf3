(window.webpackJsonp=window.webpackJsonp||[]).push([[13,180],{ACNv:function(e,t,n){"use strict";n.r(t);n("jQ3i"),n("z84I"),n("KOtZ"),n("x4t0"),n("hBvt");var i=n("LdEA"),r=n.n(i),a=n("1Pcy"),o=n.n(a),c=n("W/Kd"),s=n.n(c),u=n("KEM+"),d=n.n(u),l=n("ERkP"),f=n("3XMw"),m=n.n(f),v=n("hACr"),h=n("fs1G"),p=n("I7xG"),_=n("mjJ+"),b=n("eb3s"),g=(n("aWzz"),m.a.cfd2f35d),E=function(e){function t(t){var n;return n=e.call(this,t)||this,d()(o()(n),"_getShortcutKeyHandlers",Object(p.a)(o()(n),(function(e,t,n){return n._getProcessedActionItems()}),(function(e){return e.reduce((function(e,t){var n=t.shortcutKey,i=t.onClick;return n&&i&&(e[n]=i),e}),{})}))),d()(o()(n),"_getFinalActionItems",Object(p.a)(o()(n),(function(e,t,n){return n._getProcessedActionItems()}),(function(e){return e.map((function(e){e.shortcutKey;return r()(e,["shortcutKey"])}))}))),d()(o()(n),"_getProcessedActionItems",Object(p.a)(o()(n),(function(e){return e.actionItems}),(function(e){return e.dividerIndices}),(function(e){return e.onClose}),(function(e,t,i){return e.map((function(e,r){var a=e.text,o=e.subText,c=e.testID,s=e.onClick,u=e.confirmation,d=e.isEmphasized,l=e.shortcutKey,f=e.link;return{shortcutKey:l,Icon:e.Icon,isEmphasized:d,testID:c,subText:o,text:a,onClick:s?function(){u?u.render?n._handleConfirm({callback:s,render:u.render}):n._handleConfirm({callback:s,text:u.text,headline:u.headline,label:u.label,confirmButtonType:u.confirmButtonType}):(s(),i())}:h.a,link:f,withBottomBorder:t&&t.includes(r)}}))}))),d()(o()(n),"_handleConfirmed",(function(){n.state.activeConfirmation&&n.state.activeConfirmation.callback(),n.setState({activeConfirmation:null}),n.props.onClose()})),d()(o()(n),"_handleCancelConfirm",(function(){n.setState({activeConfirmation:null})})),n.state={activeConfirmation:null},n}s()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.hidden,n=e.enableKeyboardShortcuts,i=e.onClose,r=this.state.activeConfirmation;return r?this._renderConfirmation(r):l.createElement(v.a,{enabled:!!n,handlers:this._getShortcutKeyHandlers()},t?null:l.createElement(_.a,{cancelButtonLabel:g,items:this._getFinalActionItems(),onCloseRequested:i}))},n._renderConfirmation=function(e){if(e&&e.render)return e.render(this._handleConfirmed,this._handleCancelConfirm);var t=e||{},n=t.headline,i=t.label,r=t.confirmButtonType,a=t.text;return l.createElement(b.a,{confirmButtonLabel:i,confirmButtonType:r,headline:n,onCancel:this._handleCancelConfirm,onConfirm:this._handleConfirmed,text:a})},n._handleConfirm=function(e){this.setState({activeConfirmation:e})},t}(l.Component);t.default=E},"K2+g":function(e,t,n){"use strict";n("IAdD"),t.__esModule=!0,t.default=void 0;var i=o(n("7DT3")),r=o(n("ERkP")),a=o(n("OkZJ"));function o(e){return e&&e.__esModule?e:{default:e}}var c=function(e){return void 0===e&&(e={}),(0,i.default)("svg",Object.assign({},e,{style:[a.default.root,e.style],viewBox:"0 0 24 24"}),r.default.createElement("g",null,r.default.createElement("path",{d:"M20.746 5.236h-3.75V4.25c0-1.24-1.01-2.25-2.25-2.25h-5.5c-1.24 0-2.25 1.01-2.25 2.25v.986h-3.75c-.414 0-.75.336-.75.75s.336.75.75.75h.368l1.583 13.262c.216 1.193 1.31 2.027 2.658 2.027h8.282c1.35 0 2.442-.834 2.664-2.072l1.577-13.217h.368c.414 0 .75-.336.75-.75s-.335-.75-.75-.75zM8.496 4.25c0-.413.337-.75.75-.75h5.5c.413 0 .75.337.75.75v.986h-7V4.25zm8.822 15.48c-.1.55-.664.795-1.18.795H7.854c-.517 0-1.083-.246-1.175-.75L5.126 6.735h13.74L17.32 19.732z"}),r.default.createElement("path",{d:"M10 17.75c.414 0 .75-.336.75-.75v-7c0-.414-.336-.75-.75-.75s-.75.336-.75.75v7c0 .414.336.75.75.75zm4 0c.414 0 .75-.336.75-.75v-7c0-.414-.336-.75-.75-.75s-.75.336-.75.75v7c0 .414.336.75.75.75z"})))};c.metadata={height:24,width:24};var s=c;t.default=s},U9kc:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));n("yH/f");var i=Object.freeze({EVENTS:"events",MOMENTS:"moments"}),r=Object.freeze({SHARE:"share",OVERFLOW:"overflow"})},apAj:function(e,t,n){"use strict";n("2G9S"),n("IAdD"),n("KqXw"),n("MvUL"),n("tVqn");var i=n("RhWx"),r=n.n(i),a=n("1Pcy"),o=n.n(a),c=n("W/Kd"),s=n.n(c),u=n("KEM+"),d=n.n(u),l=n("ERkP"),f=n("8aq1"),m=n.n(f),v=n("1YZw"),h=n("rxPX"),p=n("Fg8X"),_=Object(h.a)().propsFromActions((function(){return{addToast:v.b,deleteMoment:p.a.delete}})).withAnalytics({component:"action_sheet"}),b=n("ACNv"),g=n("3XMw"),E=n.n(g),C=n("GoHP"),I=n.n(C),w=n("7CKV"),y=n.n(w),T=n("O/fU"),A=n.n(T),x=n("Uwiv"),S=n.n(x),O=n("SvUW"),k=n.n(O),M=n("NNEa"),j=n.n(M),D=n("fn9Y"),R=n("K2+g"),L=n.n(R),B=n("8jkQ"),N=n("v6aA"),P=n("Rp9C"),z=n("QK5w"),K=n("aITJ"),V=n("TnY3"),H=n("U9kc"),F=E.a.e8dff578,U=E.a.ea193d66,W=E.a.fcc64f01,G=E.a.fd61ab81,X=E.a.aaae5e7f,q=E.a.d96cf7cd,Y=E.a.e7718461,Q=E.a.bd455e2e,J=E.a.j9c5f765,Z=E.a.bd703057,$=E.a.d8a02c62,ee=E.a.bbee681d,te=E.a.ea99969a,ne=E.a.jd284871,ie=function(e){return ne},re=E.a.bebef79b,ae=E.a.d0df844c,oe=E.a.g3a71d20,ce=E.a.f88553c8,se=E.a.f61c4bbf,ue=E.a.if23a251,de=E.a.fcc684a9,le=function(e){function t(t,n){var i;return i=e.call(this,t,n)||this,d()(o()(i),"_momentMakerBridgeEnabled",K.a.isDesktopOS()),d()(o()(i),"_getActionItems",(function(){return i.props.type===H.b.OVERFLOW?i._getMomentsActions():i.props.type===H.b.SHARE?i._getShareActions():[]})),d()(o()(i),"_getShareActions",(function(){var e=i.props.id,t=[{text:de,onClick:i._handleShareTweetClick,link:{pathname:"/compose/tweet",query:{text:i._getDefaultText()},state:{positionCursorAtBeginning:!0}},Icon:y.a},{text:se,onClick:i._handleShareDMClick,link:{pathname:"/messages/compose",query:{text:fe(e)}},Icon:k.a}];return m.a.isAvailable()&&t.push({text:oe,onClick:i._handleCopyToClick,Icon:S.a}),i._shareSupported&&t.push({Icon:D.a,text:ue,onClick:i._handleShareClick}),t})),d()(o()(i),"_handleShareTweetClick",(function(){i._scribeAction("share_via_tweet")})),d()(o()(i),"_handleShareDMClick",(function(){i._scribeAction("share_via_dm")})),d()(o()(i),"_handleShareClick",(function(){var e=i.props,t=e.id,n=e.title,r={title:n},a={title:(i._getEffectiveComponentType()===H.a.MOMENTS?ie:J)(r),text:n,url:me(t)};window.navigator.share&&window.navigator.share(a).then((function(){i._scribeAction("share")})).catch((function(){i._scribeAction("share_error")}))})),d()(o()(i),"_handleCopyToClick",(function(){var e=i.props.id;i._scribeAction("copy_link"),m.a.setString(me(e)),i.props.addToast({text:ce})})),d()(o()(i),"_handleEdit",(function(){B.b.navigateTo("https://twitter.com/i/moments/edit/"+i.props.id)})),d()(o()(i),"_handleReport",(function(){var e=i.props,t=e.history,n=e.id,r=e.analytics.contextualScribeNamespace;t.push({pathname:"/i/report/moment/"+n,state:{clientReferer:window.location.pathname,isMedia:!0,scribeNamespace:r}})})),d()(o()(i),"_handleNavigateAnalytics",(function(){i._scribeAction("moment_analytics")})),d()(o()(i),"_handleDeleteConfirm",(function(){var e=i.props,t=e.addToast,n=e.author,r=e.deleteMoment,a=e.history,o=e.id,c=e.location,s=e.redirectOnDelete;n&&i._isOwner()&&r(o).then((function(){(t({text:Y}),s)&&(Object(z.a)({},{location:c})?a.goBack():a.replace(s))}))})),d()(o()(i),"_getEffectiveComponentType",(function(){return i.props.author?H.a.MOMENTS:H.a.EVENTS})),d()(o()(i),"_scribeAction",(function(e){var t=i.props,n=t.analytics,a=t.id,o=i._getEffectiveComponentType()===H.a.MOMENTS?P.a.getMomentItem:P.a.getEventItem,c=Object.assign({},n.contextualScribeData,{items:[].concat(r()(n.contextualScribeData&&n.contextualScribeData.items?n.contextualScribeData.items:[]),[o(a)])});n.scribe({action:e,data:c})})),d()(o()(i),"_getDefaultText",(function(){var e=i.props,t=e.author,n=e.id,r=e.title,a=e.hashtag,o=i._getEffectiveComponentType(),c={author:t&&t.screen_name,timelineHashtag:a,title:r&&r.trim(),url:fe(n)},s=o===H.a.EVENTS?Z:re,u=o===H.a.EVENTS?Q:te;return t&&t.screen_name?a?" "+$(c):" "+s(c):a?" "+ee(c):" "+u(c)})),d()(o()(i),"_isOwner",(function(){var e=i.props.author,t=i.context.loggedInUserId;return!(!t||!e)&&e.id_str===t})),i._shareSupported=void 0!==window.navigator.share,i._isAndroid=K.a.isAndroid(),i}s()(t,e);var n=t.prototype;return n.render=function(){return this.context.loggedInUserId?l.createElement(b.default,{actionItems:this._getActionItems(),onClose:this.props.onClose}):null},n._getMomentsActions=function(){var e=this.props,t=e.author,n=e.id,i=e.withEditAction,r=this._isOwner(),a=[];return r&&(a.push({confirmation:{label:q,headline:G,text:X,confirmButtonType:"destructive"},isEmphasized:!0,onClick:this._handleDeleteConfirm,text:U,Icon:L.a}),this._momentMakerBridgeEnabled&&i&&a.push({onClick:this._handleEdit,text:F,Icon:j.a}),a.push({link:"/i/moments/"+n+"/analytics",onClick:this._handleNavigateAnalytics,text:ae,Icon:I.a})),t&&!r&&a.push({onClick:this._handleReport,text:W,Icon:A.a}),a},t}(l.Component);d()(le,"contextType",N.a);var fe=function(e){return"https://twitter.com/i/events/"+e},me=function(e){return fe(e)+"?s=20"},ve=_(le);t.a=Object(V.a)(ve)},lPpt:function(e,t,n){"use strict";n("IAdD");var i=n("LdEA"),r=n.n(i),a=n("Zj7R"),o=n("3zvM"),c=n("lMB6"),s=function(e,t,n){var i,r=e.entities[t.meta.entityId],a=r&&r.liveEventDetails;return/_REQUEST$/.test(t.type)&&a?Object.assign({},e,{entities:Object.assign({},e.entities,(i={},i[a.id_str]=Object.assign({},r,{liveEventDetails:Object.assign({},a,{remind_me_subscription:Object.assign({},a.remind_me_subscription,n(a.remind_me_subscription))})}),i))}):e},u=Object(o.e)({namespace:"liveEvents",fetchOneContext:"FETCH_LIVE_EVENT",fetchOneEndpoint:function(e){return function(t,n){return e.LiveEvent.fetchLiveEventMetadata(t,n).then((function(e){var n=t.eventId;return d(e,n)}))}},fetchOneParams:function(e,t){var n=e[0];return Object.assign({eventId:n},t)},withApiErrorHandler:!1,customActions:{subscribe:{reducer:function(e,t){return s(e,t,(function(e){return{subscribed:!0}}))},getParams:function(e,t){return{eventId:e,params:t}},getApiMethod:function(e){return e.LiveEvent.updateRemindMeSubscription}},unSubscribe:{reducer:function(e,t){return s(e,t,(function(e){return{subscribed:!1}}))},getParams:function(e,t){return{eventId:e,params:t}},getApiMethod:function(e){return e.LiveEvent.updateRemindMeSubscription}}}});u.selectHydratedTweet=function(e,t){return e.tweets&&Object(a.a)(e.tweets,{},e.users,t)};var d=function(e,t){var n,i=e.entities,a=e.result,o=i.liveEvents,c=i.broadcasts,s=i.slates,u=i.tweets,d=i.users,l=r()(i,["liveEvents","broadcasts","slates","tweets","users"]),f={liveEventDetails:o[t],broadcasts:c,response:a.response,slates:s,tweets:u,users:d};return{entities:Object.assign({},l,{liveEvents:(n={},n[t]=f,n)})}};t.a=c.a.register(u)},zlxh:function(e,t,n){"use strict";n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return v})),n.d(t,"f",(function(){return h})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return g})),n.d(t,"l",(function(){return E})),n.d(t,"j",(function(){return w})),n.d(t,"q",(function(){return x})),n.d(t,"i",(function(){return S})),n.d(t,"p",(function(){return O})),n.d(t,"o",(function(){return k})),n.d(t,"m",(function(){return D})),n.d(t,"n",(function(){return R})),n.d(t,"h",(function(){return L})),n.d(t,"a",(function(){return N})),n.d(t,"g",(function(){return H})),n.d(t,"k",(function(){return U}));n("1t7P"),n("jQ/y"),n("2G9S"),n("LW0h"),n("hBpG"),n("vfdX"),n("vrRf"),n("lTEL"),n("z84I"),n("M+/F"),n("5BYb"),n("ho0z"),n("IAdD"),n("yH/f"),n("7x/C"),n("KqXw"),n("87if"),n("Ysgh"),n("uFXj"),n("kYxP"),n("Cm4o");var i=n("RhWx"),r=n.n(i),a=n("FwvS"),o=n("TrHT"),c=n("3XMw"),s=n.n(c),u=n("lPpt"),d=n("XkXQ"),l=n("oQhu"),f=n("zrc3"),m=s.a.d2fb334b,v=s.a.ad16f482,h=s.a.h0786685,p="1",_={"600x1200":4,"1024x2048":3,"340x680":2,"150x150":1},b=s.a.i0ed3f4d,g=Object.freeze({LIVE_BROADCAST:"liveBroadcast",REPLAY_BROADCAST:"replayBroadcast",VOD:"vod",GIF:"gif",SLATE:"slate"}),E=function(e,t,n){if(n&&n.url)return function(e){return-1!==e.url.indexOf("pscp.tv")}(n)?[].concat(r()(e?[{width:128,height:128,uri:e}]:[]),r()(t?[{width:360,height:360,uri:t}]:[]),[{width:n.width,height:n.height,uri:n.url}]):void 0},C=Object(l.a)((function(e,t){return e.slates&&t&&e.slates[t]})),I=function(e,t){var n=(e.slate||e.fallback_slate||{}).id,i=function(e,t){var n=C(e,t),i=n&&n.variants||[];return Object(d.a)(i,(function(e){var t=e.name;return _[t]||0}))}(t,n),r=function(e,t,n){var i,r=C(e,t);if(n&&r){var o=r.focus_rects,c=void 0===o?[]:o,s=r.tweet_id;if(!(i=c.length?c:void 0)){var u=s&&e.tweets&&e.tweets[s],d=(u&&u.extended_entities&&u.extended_entities.media||[]).find((function(e){return e.media_key===t}));i=d&&Object(a.b)(d)}}return i}(t,n,i),o=function(e,t,n){return e?t.slates[n].label:void 0}(i,t,n),c=(C(t,n)||{}).tweet_id,s=function(e,t){if(t.broadcast&&t.broadcast.id){var n=t.broadcast.id,i=y(e,n);return i&&{small:i.image_url_small,medium:i.image_url_medium}}}(t,e)||{},u=i&&E(s.small,s.medium,i);return n&&i?{id:n,image:i,periscopeVariants:u,cropCandidates:r,label:o,tweetId:c}:void 0},w=function(e,t){var n=function(e){var t=e.liveEventDetails.attribution_user_id;return e.users?e.users[t]:void 0}(t),i=t.liveEventDetails,r=i.category,a=i.description,o=i.remind_me_subscription,c=i.short_title,s=i.time_string,u=i.title;return{author:n,category:r,description:a,eventId:e,remindMeSubscription:o,shortTitle:c||u,timeString:s,title:u}},y=function(e,t){return e.broadcasts&&t?e.broadcasts[t]:void 0},T=function(e,t){var n=(e||{}).extended_entities,i=(void 0===n?{}:n).media,r=void 0===i?[]:i;return r.length>0&&r.find((function(e){return e.media_key===t}))||r[0]},A=function(e,t,n){var i=e.media,r=(void 0===i?{}:i).mediaEntity;return!r||r.broadcast_id!==t&&r.media_tweet_id!==n?void 0:e.promotedContent},x=function(e,t){return e&&e.image?{media_url_https:e.image.url,original_info:{focus_rects:e.cropCandidates,height:e.image.height,width:e.image.width},ext_alt_text:t?t.ext_alt_text:b,id_str:e.id,expanded_url:"",type:"photo"}:void 0},S=function(e){var t,n=(e?L(e):[])[0]||{};return x(n.slate,null===(t=n.mediaDetails)||void 0===t?void 0:t.coverMedia)||void 0},O=function(e,t,n){var i,r,a=t.liveEventDetails.timelines||[],o=a.length?a[0].timeline_id:p,c=a.length?a[0].hashtag:void 0,s=a.length?a[0].compose_semantic_core_id:void 0,u=0,d=n&&a.some((function(e){return e.timeline_id===n})),l=a.map((function(t,a){var c=t.compose_semantic_core_id,s=t.customization_info,l=t.hashtag,f=t.timeline_id,m=t.timeline_source_id,v=t.timeline_source_type,h=t.title,p=f===o;return(d&&f===n||p)&&(u=a,i=l,r=c),{isActive:function(){return d?f===n:p},to:{pathname:"/i/events/"+e,query:{timeline:f}},label:h,customizationInfo:s,hashtag:l,timelineId:f,timelineSourceId:m,timelineSourceType:v}})),f=d&&n?n:o,m=i||c,v=r||s;return{composeDetails:Object.assign({composeSemanticCoreId:v},m?{defaultText:" "+m,positionCursorAtBeginning:!0}:{defaultText:""}),eventId:e,hashtag:m,timelineId:f,timelineIndex:u,timelineLinks:l}},k=function(e,t){if(e){var n=t&&j(e,t),i=M(e);return n||e[i]}},M=function(e){var t=Object(f.a)(e,(function(e){return e.selected}));return-1===t?0:t},j=function(e,t){return e&&e.find((function(e){return e.id===t}))},D=function(e){var t=e.response.polling_interval_seconds;return t>0?t:0},R=function(e){var t=e.response.score;return t&&t.data&&t.data.moments?t.data:void 0},L=function(e,t,n){return(e.response.carousel||[]).filter((function(e){return!e.moment})).map((function(t){var i,r,a=t.entry_id,o=I(t,e),c=o&&o.id,s=t.tweet_media&&t.tweet_media.id||o&&o.tweetId,d=function(e,t,n,i,r,a){var o=T(t,r),c=y(n,e),s=c?e:void 0;return{mediaId:c?c.media_id:void 0,coverTweet:t,coverMedia:o,broadcastId:s,isLive:function(e){return!!e&&"RUNNING"===e.state}(c),promotedContent:a&&A(a,s,r)}}(a,s?u.a.selectHydratedTweet(e,s):void 0,e,0,c,n);if(t.broadcast){var l=e.broadcasts?e.broadcasts[t.broadcast.id]:void 0;r=l&&l.twitter_user_id&&e.users&&e.users[l.twitter_user_id]||void 0,i=l?P(r,l):void 0}else if(t.slate&&s||t.tweet_media){var f=s&&e.tweets?e.tweets[s]:void 0;i=(r=f&&e.users?e.users[f.user]:void 0)?z(r,!!t.tweet_media,c,f,e):void 0}else t.slate&&o&&(i={type:g.SLATE});return i||!o||t.tweet_media||(i={type:g.SLATE}),!B(r)&&i&&o?{id:a,carouselItemInfo:Object.assign({},i,{socialProof:t.social_proof}),mediaDetails:d,slate:o,selected:!!t.selected}:void 0})).filter(Boolean)},B=function(e){return e&&(e.blocking||e.blocked_by)||!1},N=Object.freeze({TWITTER:"twitter",PERISCOPE:"periscope"}),P=function(e,t){return{verified:!!e&&e.verified,screenName:e?e.screen_name:void 0,name:e?e.name:t.user_display_name,userId:e?e.id_str:t.user_id,type:"RUNNING"===t.state?g.LIVE_BROADCAST:g.REPLAY_BROADCAST,accountType:e?N.TWITTER:N.PERISCOPE,profileImageUrl:e?e.profile_image_url_https:void 0}},z=function(e,t,n,i,r){var a,c,s;if(void 0===e&&(e={}),t){var u=T(i,n);if(u){var d=u.type;c=V(d);var l=Object(o.b)(u)||{},f=l.video_info,m=l.source_user_id_str;a=f&&f.duration_millis,s=m&&K(m,r)}}else c=g.SLATE;var v=s||e,h=v.verified,p=v.screen_name,_=v.name,b=v.id_str;return c?{accountType:N.TWITTER,verified:h,screenName:p,name:_,type:c,playbackDuration:a,userId:b}:void 0},K=function(e,t){return t.users&&t.users[e]},V=function(e){switch(e){case"animated_gif":return g.GIF;case"vine":case"video":return g.VOD;default:return}},H=function(e){var t;if(e){var n=new URL(e).pathname.split("/");t=n[n.length-1]}return t},F=function(e){return!!e&&!!e.carouselItemInfo&&e.carouselItemInfo.type!==g.GIF&&e.carouselItemInfo.type!==g.SLATE},U=function(e,t){void 0===t&&(t=[]);var n=e+1,i=t.slice(n).findIndex(F);return i>-1?i+n:i}}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/web_legacy/shared~bundle.LiveEvent~bundle.UserMoments.d5b0f214.js.map