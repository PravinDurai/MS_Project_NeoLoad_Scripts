(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"2doW":function(t,e,n){"use strict";n("jQ3i"),n("z84I"),n("KqXw"),n("Ysgh");var o=n("1Pcy"),a=n.n(o),i=n("W/Kd"),r=n.n(i),s=n("KEM+"),l=n.n(s),u=n("ERkP"),c=(n("2G9S"),n("vrRf"),n("uFXj"),n("97Jx")),d=n.n(c),h=n("LdEA"),m=n.n(h),p=n("aWzz"),f=(n("IAdD"),n("7x/C"),n("JtPf"),n("FwvS")),_=n("3XMw"),v=n.n(_),g=n("mN6z"),y=n("D4le"),C=n.n(y),b=n("3xO4"),x=n.n(b),w=(n("i4UL"),n("YRQv")),D=n("CHgo"),M=n("fs1G"),S=n("7nmT"),P=n.n(S),E=n("rHpw"),T=n("Enqy"),I=w.a(),z={zoom:1,lastX:0,lastY:0,zoomCenter:{x:0,y:0}},L={height:0,width:0,left:0,right:0,top:0,bottom:0},Z=function(t,e,n){return Math.min(e,Math.max(t,n))},O=function(t,e){return Math.sqrt(Math.pow(t.clientY-e.clientY,2)+Math.pow(t.clientX-e.clientX,2))},R=function(t){function e(e){var n;return n=t.call(this,e)||this,l()(a()(n),"_itemDimensions",L),l()(a()(n),"_setTouchableNode",(function(t){n._touchableNode=P.a.findDOMNode(t),n._touchableNode&&(n._removeTouchListener=Object(D.a)(n._touchableNode,n._handleTouchMove,!1))})),l()(a()(n),"_handleTouchStart",(function(t){n._zoomable instanceof Element&&(n._zoomedDimensions=n._zoomable.getBoundingClientRect()),n._moved=!1;var e=t.touches.length;2===e?(t.preventDefault(),n._handlePinchStart(t)):1===e&&n._handleTapStart(t)})),l()(a()(n),"_handleTouchMove",(function(t){var e=t.touches.length;2===e?n._handlePinchMove(t):1===e&&(n._moved=!0,n._handlePanMove(t)),t.preventDefault()})),l()(a()(n),"_handleTouchEnd",(function(t){var e=n.props,o=e.maxZoom,a=e.minZoom,i=e.onTap,r=Z(a,o,n.state.zoom),s=n.state.zoom;s!==r&&1===r?n.resetZoom():n.setState({lastX:0,lastY:0,zoom:r}),0===t.touches.length?(n._lastTouchTime&&n._lastTouchTime+300>t.timeStamp?(n._clickTimer&&clearTimeout(n._clickTimer),n._handleDoubleTap(t)):s<=1&&!n._moved&&(n._clickTimer=setTimeout(i,300)),n._lastTouchTime=t.timeStamp):t.preventDefault()})),n.state=Object.assign({},z),n._ref=u.createRef(),n}r()(e,t),e.getDerivedStateFromProps=function(t,e){return I&&t.resetZoom?(t.onZoomed(!1),Object.assign({},z)):e};var n=e.prototype;return n.render=function(){var t=this;if(!I)return this.props.children;var e=this.state,n=e.zoom,o=e.zoomCenter,a=this._moved,i={zoom:Object(T.spring)(n),zoomCenterX:Object(T.spring)(o.x),zoomCenterY:Object(T.spring)(o.y)};return u.createElement(x.a,{onTouchEnd:this._handleTouchEnd,onTouchStart:this._handleTouchStart,ref:this._setTouchableNode,style:k.fill},u.createElement(T.Motion,{style:i},(function(e){var n=e.zoom,i=e.zoomCenterX,r=e.zoomCenterY;return u.createElement(x.a,{ref:t._ref,style:[k.fill,{transform:[{scale:n}],transformOrigin:(a?i:o.x)+"px "+(a?r:o.y)+"px"}]},t.props.children)})))},n.componentDidMount=function(){I&&(this._zoomable=P.a.findDOMNode(this._ref.current),this._updateWindowDimensions())},n.componentWillUnmount=function(){this._removeTouchListener&&this._removeTouchListener()},n.resetZoom=function(){this.props.onZoomed(!1),this.setState({zoom:z.zoom})},n._handlePanMove=function(t){if(!(this.state.zoom<=1)&&this._zoomedDimensions&&this._windowDimensions){var e=t.touches[0],n=e.clientX,o=e.clientY;if(this.state.lastX&&this.state.lastY){var a=this.state,i=a.lastX,r=a.lastY,s=a.zoomCenter,l=s.x,u=s.y,c=this._windowDimensions,d=c.height,h=c.width,m=this._zoomedDimensions,p=m.height,f=0,_=0;m.width-h>0&&(f=n-i),p-d>0&&(_=o-r),this.setState({lastX:n,lastY:o,zoomCenter:{x:Math.min(Math.max(l-f,0),h),y:Math.min(Math.max(u-_,0),d)}})}else this.setState({lastX:n,lastY:o})}},n._handlePinchStart=function(t){var e,n,o=t.touches;if(this._updateWindowDimensions(),this._lastDistance=O(o[0],o[1]),1===this.state.zoom){var a=(e=o[0],n=o[1],{x:(e.clientX+n.clientX)/2,y:(e.clientY+n.clientY)/2});this.setState({zoomCenter:this._getZoomCenter(a.x,a.y)}),this.props.onZoomed(!0)}},n._handlePinchMove=function(t){var e=this.state,n=e.zoom,o=e.zoomCenter,a=this.props,i=a.maxZoom,r=a.maxZoomBounce,s=a.minZoom,l=a.minZoomBounce;if(0!==o.x||0!==o.y){var u=O(t.touches[0],t.touches[1]),c=this._lastDistance?u/this._lastDistance:1,d=Z(s-l,i+r,n*c);this._lastDistance=u,this.setState({zoom:d})}else 2===t.touches.length&&this._handlePinchStart(t)},n._handleTapStart=function(t){var e=t.touches;this._tapCenter=this._getZoomCenter(e[0].clientX,e[0].clientY)},n._handleDoubleTap=function(t){var e=this.props,n=e.maxZoom,o=e.onZoomed;1!==this.state.zoom?this.resetZoom():(this._updateWindowDimensions(),this.setState({zoom:n,zoomCenter:this._tapCenter||z.zoomCenter}),o(!0))},n._getZoomCenter=function(t,e){this._zoomable instanceof Element&&(this._itemDimensions=this._zoomable.getBoundingClientRect());var n=this._itemDimensions;return{x:t-n.left,y:e-n.top}},n._updateWindowDimensions=function(){this._windowDimensions={height:window.innerHeight,width:window.innerWidth}},e}(u.Component);l()(R,"defaultProps",{maxZoom:2.5,maxZoomBounce:.15,minZoom:1,minZoomBounce:.15,onTap:M.a,onZoomed:M.a,resetZoom:!1});var k=E.a.create((function(t){return{fill:{flex:1}}})),B=R,j=n("r1lV"),Y=n("JYMr"),W=v.a.b327c129,X=v.a.gff1f69e,U=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o))||this,l()(a()(e),"state",{loadingVariant:null,imageLoading:!1}),l()(a()(e),"_handleLoadStart",(function(){return e.setState({imageLoading:!0})})),l()(a()(e),"_handleLoadEnd",(function(){return e.setState({imageLoading:!1})})),e}r()(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=this;this._mountPromiseForTesting=e._selectCachedVariant(this.props.photo).then((function(e){return t.setState({loadingVariant:e})}))},n.componentDidUpdate=function(t,n){var o=this;Object(g.a)(t.photo,this.props.photo)||(this.setState({loadingVariant:null}),e._selectCachedVariant(this.props.photo).then((function(t){return o.setState({loadingVariant:t})})))},n.render=function(){var t=this.props,n=t.dataSaver,o=t.onContextMenu,a=t.onError,i=t.onLoad,r=t.onTap,s=t.onZoomed,l=t.photo,c=t.resetZoom,d=t.zoomable,h=t.style,m=t.imageStyle,p=this.state.loadingVariant,f=(n&&p&&Math.max(p.width,p.height)>=680?p.uri:null)||e._selectSource(l);if(!f||null===p)return null;var _=u.createElement(C.a,{accessibilityLabel:l.ext_alt_text?l.ext_alt_text:W,defaultSource:p&&p.uri,draggable:!0,onContextMenu:o,onError:p?void 0:a,onLoad:i,onLoadEnd:this._handleLoadEnd,onLoadStart:this._handleLoadStart,resizeMode:"contain",source:f,style:[A.img,m]});return u.createElement(x.a,{style:h},this.state.imageLoading?V:null,d?u.createElement(B,{onTap:r,onZoomed:s,resetZoom:c},_):_)},e._selectCachedVariant=function(t){var e=f.c(t);return e?j.a.selectLargestCachedVariant(e):Promise.resolve()},e._selectSource=function(t){var e=f.c(t);return e&&j.a.selectLargestUrl(e)},e}(u.PureComponent);l()(U,"defaultProps",{zoomable:!1});var A=E.a.create((function(t){return{img:Object.assign({},E.a.absoluteFillObject,{height:"auto",margin:"auto",maxHeight:"100%",maxWidth:"100%",width:"auto"}),progressBar:{position:"absolute",top:0,zIndex:1}}})),V=u.createElement(Y.a,{ariaValueText:X,indeterminate:!0,style:A.progressBar}),N=U,H=n("RCZO"),q=n("KdqI"),F=n("TrHT"),G=n("Modb"),J=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o))||this,l()(a()(e),"_handlePlaybackStarted",(function(){e._player&&!e.props.isCurrentlyDisplayed&&e._player.pause()})),l()(a()(e),"_setPlayer",(function(t){e._player=t,e._player&&e.props.isCurrentlyDisplayed&&e._player.play()})),e}r()(e,t);var n=e.prototype;return n.render=function(){var t=this.props.style;return u.createElement(x.a,{style:t},u.createElement(x.a,{style:K.root},this._renderVideo()))},n.componentDidUpdate=function(t){var e=this.props.isCurrentlyDisplayed;this._player&&e!==t.isCurrentlyDisplayed&&(e?this._player.play():this._player.pause())},n._renderVideo=function(){var t=this.props,e=t.promotedContent,n=t.video,o=t.videoId;return u.createElement(G.a,d()({},Object(F.a)(o,n),{onPlaybackStarted:this._handlePlaybackStarted,playbackCoordination:null,promotedContent:e,setPlayer:this._setPlayer,withPostPlayback:!0}))},e}(u.PureComponent),K=E.a.create({root:{flexBasis:0,flexGrow:1,flexShrink:1,justifyContent:"center"}}),Q=J,$={startX:0,startY:0},tt=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o))||this,l()(a()(e),"_pullDistanceY",0),l()(a()(e),"_pullInfo",Object.assign({},$)),l()(a()(e),"_handleTouchStart",(function(t){e._pullInfo.startX=t.touches[0].clientX,e._pullInfo.startY=t.touches[0].clientY})),l()(a()(e),"_handleTouchMove",(function(t){if("number"==typeof e._pullInfo.startX&&"number"==typeof e._pullInfo.startY){var n=t.touches[0],o=n.clientX-e._pullInfo.startX,a=n.clientY-e._pullInfo.startY;Math.abs(o)>10||(t.preventDefault(),e._updatePullPosition(a))}})),l()(a()(e),"_handleTouchEnd",(function(t){Math.abs(e._pullDistanceY)>50?e._handleDismiss():e._resetPullInfo()})),l()(a()(e),"_updatePullPosition",(function(t){e._pullDistanceY=t})),l()(a()(e),"_handleDismiss",(function(){var t=e.props.onDismiss;t&&t(),e._resetPullInfo()})),l()(a()(e),"_resetPullInfo",(function(){e._updatePullPosition(0),e._pullInfo=Object.assign({},$)})),e}return r()(e,t),e.prototype.render=function(){var t=this.props,e=t.children,n=t.onDismiss,o=t.onLayout,a=t.style,i=!!n;return u.createElement(x.a,{onLayout:o,onTouchEnd:i?this._handleTouchEnd:void 0,onTouchMove:i?this._handleTouchMove:void 0,onTouchStart:i?this._handleTouchStart:void 0,style:a},e)},e}(u.Component),et=n("q9Zt"),nt=n("mjJ+"),ot=n("TGLq"),at=n.n(ot),it=v.a.ac85c6b1,rt=v.a.f46c1d5e,st=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o))||this,l()(a()(e),"state",{error:null,contextMenuPoint:{top:0,left:0},showContextMenu:!1,containerDimensions:{width:0,height:0}}),l()(a()(e),"_handleError",(function(t){e.setState({error:t.nativeEvent.error})})),l()(a()(e),"_handleLoad",(function(){e.setState({error:null})})),l()(a()(e),"_handleMediaPress",(function(t){t.stopPropagation()})),l()(a()(e),"_handleRetry",(function(){e.setState({error:null})})),l()(a()(e),"_handleContextMenu",(function(t){Object(q.e)()&&(t.preventDefault(),t.stopPropagation(),e.setState({contextMenuPoint:{left:t.clientX,top:t.clientY}}),e.setState({showContextMenu:!0}))})),l()(a()(e),"_handleContextCancel",(function(){return e.setState({showContextMenu:!1})})),l()(a()(e),"_handleOpenImageURI",(function(){at.a.openURL(e.props.mediaDetail.media_url_https),e._handleContextCancel()})),l()(a()(e),"_getContextMenuItems",(function(){return[{text:rt,onClick:e._handleOpenImageURI}]})),l()(a()(e),"_handleLayout",(function(t){var n=t.nativeEvent.layout,o=n.height,a=n.width;e.setState({containerDimensions:{width:a,height:o}})})),e}r()(e,t);var n=e.prototype;return n.shouldComponentUpdate=function(t,e){return!Object(g.a)(t,this.props)||!Object(g.a)(e,this.state)},n.UNSAFE_componentWillReceiveProps=function(t){this.setState({error:null,showContextMenu:!1})},n.render=function(){var t,e=this.props,n=e.isCurrentlyDisplayed,o=e.mediaDetail,a=e.onDismiss,i=e.onTap,r=e.promotedContent,s=e.videoId,l=e.isAvatar,c=m()(e,["isCurrentlyDisplayed","mediaDetail","onDismiss","onTap","promotedContent","videoId","isAvatar"]),h=o.original_info||{},p=h.width,f=h.height,_=this.state,v=_.error,g=_.showContextMenu,y=_.containerDimensions,C=y.width,b=y.height,w=this.context.isModal,D=w||l?Object(H.e)({mediaWidth:p,mediaHeight:f,containerWidth:C,containerHeight:b},l):lt.mediaItem;return o&&(t=["animated_gif","video","vine"].indexOf(o.type)>-1),u.createElement(tt,{onDismiss:a,onLayout:w||l?this._handleLayout:void 0,style:lt.root},v?u.createElement(et.a,{onRetry:this._handleRetry,style:lt.errorDetail,title:it,withLightOnDarkColorScheme:!0}):null,g?u.createElement(nt.a,{items:this._getContextMenuItems(),onCloseRequested:this._handleContextCancel,position:this.state.contextMenuPoint}):null,v?null:u.createElement(x.a,{onClick:this._handleMediaPress,style:D},"photo"===o.type?u.createElement(N,d()({},c,{imageStyle:l&&lt.avatarImage,onContextMenu:this._handleContextMenu,onError:this._handleError,onLoad:this._handleLoad,onTap:i,photo:o,style:lt.container,zoomable:!0})):null,t&&s?u.createElement(Q,{isCurrentlyDisplayed:n,promotedContent:r,style:lt.container,video:o,videoId:s}):null))},e}(u.Component);l()(st,"contextTypes",{isModal:p.bool});var lt=E.a.create((function(t){return{root:{flexGrow:1,justifyContent:"center",alignItems:"center",flexShrink:1},mediaItem:{flexGrow:1,width:"100%",height:"100%"},container:{height:"100%",position:"absolute",width:"100%"},errorDetail:{alignItems:"center",alignSelf:"center",justifyContent:"center",position:"absolute",height:"100%",maxWidth:400},avatarImage:{borderRadius:t.borderRadii.infinite,margin:t.spaces.small}}})),ut=st,ct=n("lklz"),dt=n("cHvH"),ht=n("uavX"),mt=function(t){function e(e,n){var o;return o=t.call(this,e,n)||this,l()(a()(o),"_getWithReducedNavButtonClickArea",(function(t,e){return t<E.a.theme.breakpoints.large||o._isItemVideo(e)})),l()(a()(o),"_isItemVideo",(function(t){return["video","animated_gif","vine"].includes(t.type)})),l()(a()(o),"_getItemVideoId",(function(t){return o.props.videoId||function(t){return ct.b.forTweet(t.expanded_url.split("/")[3])}(t)})),l()(a()(o),"_handleMediaDetailZoomed",(function(t){var e=o.props.onMediaDetailZoomed;o.state.isZoomed!==t&&o.setState({isZoomed:t}),e&&e(t)})),o.state={isZoomed:!1},o}r()(e,t);var n=e.prototype;return n.shouldComponentUpdate=function(t,e){return!Object(g.a)(t,this.props)||!Object(g.a)(e,this.state)},n.render=function(){var t=this,e=this.props,n=e.dataSaver,o=e.dominantColor,a=e.mediaIndex,i=e.mediaItems,r=e.onDismiss,s=e.onMediaItemChanged,l=e.onTap,c=e.promotedContent,d=this.state.isZoomed,h=i.map((function(e,o){var s=t._isItemVideo(e),h=t._getItemVideoId(e),m=a===o;return s&&h||!s?u.createElement(ut,{dataSaver:n,isAvatar:t.props.isAvatar,isCurrentlyDisplayed:m,key:o,mediaDetail:i[o],onDismiss:d?void 0:r,onTap:l,onZoomed:m?t._handleMediaDetailZoomed:void 0,promotedContent:c,resetZoom:a!==o,videoId:h}):null}));return u.createElement(dt.a,null,(function(e){var n=e.windowWidth;return u.createElement(x.a,{style:pt.root},i.length>1?u.createElement(ht.a,{currentSlide:a,dominantColor:o,locked:d||1===i.length,onChange:s,withReducedNavButtonClickArea:t._getWithReducedNavButtonClickArea(n,i[a])},h):h)}))},e}(u.Component);l()(mt,"defaultProps",{mediaIndex:0,onMediaDetailZoomed:M.a,onMediaItemChanged:M.a});var pt=E.a.create((function(t){return{root:{flex:1,zIndex:1}}}));e.a=mt},TGLq:function(t,e,n){"use strict";e.__esModule=!0,e.default=void 0;var o,a=n("6/RC"),i=(o=n("tI3i"))&&o.__esModule?o:{default:o};var r=a.canUseDOM?window.location.href:"",s={addEventListener:function(){},removeEventListener:function(){},canOpenURL:function(){return Promise.resolve(!0)},getInitialURL:function(){return Promise.resolve(r)},openURL:function(t){try{return l(t),Promise.resolve()}catch(e){return Promise.reject(e)}},_validateURL:function(t){(0,i.default)("string"==typeof t,"Invalid URL: should be a string. Was: "+t),(0,i.default)(t,"Invalid URL: cannot be empty")}},l=function(t){a.canUseDOM&&(window.location=new URL(t,window.location).toString())},u=s;e.default=u,t.exports=e.default},UPvq:function(t,e,n){"use strict";n.d(e,"a",(function(){return w}));n("2G9S"),n("IAdD");var o=n("1Pcy"),a=n.n(o),i=n("W/Kd"),r=n.n(i),s=n("KEM+"),l=n.n(s),u=n("ERkP"),c=n("RCZO"),d=n("aWzz"),h=n("3XMw"),m=n.n(h),p=n("l2F/"),f=n.n(p),_=n("3xO4"),v=n.n(_),g=n("mw9i"),y=n("cm6r"),C=n("/yvb"),b=n("rHpw"),x=m.a.ia5e7487,w=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o))||this,l()(a()(e),"_handleCloseButtonPress",(function(t){t.stopPropagation(),(0,e.props.onCloseButtonPress)()})),l()(a()(e),"_handleBackgroundPress",(function(){var t=e.props.onCloseButtonPress;e.context.isModal&&t()})),e}return r()(e,t),e.prototype.render=function(){var t=this,e=this.props,n=e.children,o=e.backgroundColor,a=e.mediaItem,i=e.mediaUrl,r=e.hideButtons,s=e.topRightButton,l=e.footerButtons,d=e.overlayFooter,h=this.context.isModal,m=Object.assign({backgroundColor:o.rgba},c.a),p=Object.assign({backgroundColor:o.rgb},c.a),_=[D.root,h?m:p,{position:h?"relative":"fixed"}];return u.createElement(u.Fragment,null,u.createElement(v.a,{onClick:this._handleBackgroundPress,style:_},n,l?u.createElement(v.a,{pointerEvents:r?"none":void 0,style:[D.footerButtons,d&&m,d&&D.footerButtonsAbsolute,r&&D.fadeOut]},u.createElement(g.a,{withGutter:!0},l)):null),u.createElement(y.a,{accessibilityRole:"none",interactiveStyles:null,onClick:this._handleCloseButtonPress,pointerEvents:r?"none":void 0,style:[D.buttonWrapper,D.buttonWrapperLeft,c.a,r&&D.fadeOut]},(function(e){return u.createElement(C.a,{accessibilityLabel:x,dominantColor:o.rgb,icon:u.createElement(f.a,null),interactivityState:e,onClick:t._handleCloseButtonPress,type:a||i?"onMedia":"invertedPrimary"})})),s?u.createElement(v.a,{pointerEvents:r?"none":void 0,style:[D.buttonWrapper,D.buttonWrapperRight,c.a,r&&D.fadeOut]},s):null)},e}(u.Component);l()(w,"contextTypes",{isModal:d.bool}),l()(w,"defaultProps",{hideButtons:!1});var D=b.a.create((function(t){return{root:{overflowX:"hidden",overflowY:"hidden",height:"100%",width:"100%"},buttonWrapper:{position:"absolute",top:0,padding:t.spaces.xSmall,alignItems:"center",justifyContent:"center",cursor:"pointer"},buttonWrapperLeft:{left:0},buttonWrapperRight:{right:0},fadeOut:{opacity:0},footerButtons:{width:"100%",alignSelf:"center"},footerButtonsAbsolute:{position:"absolute",bottom:0,paddingBottom:b.a.iPhoneOffsetBottom,zIndex:1}}}))}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/web_legacy/shared~bundle.DirectMessages~bundle.TweetMediaDetail~bundle.UserAvatar~bundle.UserHeader.93802da4.js.map