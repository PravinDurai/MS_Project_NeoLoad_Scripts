(window.webpackJsonp=window.webpackJsonp||[]).push([[197],{NeAX:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return h})),n.d(t,"selectPreferences",(function(){return D})),n.d(t,"selectData",(function(){return I})),n.d(t,"selectUserPreferences",(function(){return N})),n.d(t,"selectPreferencesFetchStatus",(function(){return z})),n.d(t,"selectFetchDataStatus",(function(){return v})),n.d(t,"selectAge",(function(){return w})),n.d(t,"selectBirthdate",(function(){return L})),n.d(t,"selectHasExactAge",(function(){return R})),n.d(t,"selectGender",(function(){return C})),n.d(t,"selectLanguage",(function(){return y})),n.d(t,"selectSignupDetails",(function(){return F})),n.d(t,"selectTwitterInterests",(function(){return U})),n.d(t,"selectFetchTwitterInterestsStatus",(function(){return m})),n.d(t,"selectPartnerInterests",(function(){return k})),n.d(t,"selectFetchPartnerInterestsStatus",(function(){return x})),n.d(t,"clearLocations",(function(){return G})),n.d(t,"updateGender",(function(){return q})),n.d(t,"updateLanguage",(function(){return H})),n.d(t,"updateInterest",(function(){return Z})),n.d(t,"fetchPreferencesIfNeeded",(function(){return K})),n.d(t,"updatePreferences",(function(){return W})),n.d(t,"updateSettings",(function(){return B})),n.d(t,"fetchDataIfNeeded",(function(){return X})),n.d(t,"createAudienceDownload",(function(){return M})),n.d(t,"createDataDownload",(function(){return V})),n.d(t,"fetchTwitterInterestsIfNeeded",(function(){return $})),n.d(t,"fetchPartnerInterestsIfNeeded",(function(){return te})),n.d(t,"syncSettings",(function(){return ae}));n("vrRf"),n("KOtZ"),n("Ee2X"),n("IAdD"),n("+KXO"),n("7x/C"),n("JtPf");var r,a=n("RqPI"),s=n("P1r1"),i=n("cmwl"),o=n("hqKg"),c=n("kGix"),u=n("YeIG"),f=n("Ssj5"),d=n("oEOe"),l="rweb/personalization",p=Object(d.a)(l,"FETCH_PREFERENCES"),_=Object(d.a)(l,"UPDATE_PREFERENCES"),O=Object(d.a)(l,"FETCH_DATA"),E=Object(d.a)(l,"UPDATE_COOKIES"),g=Object(d.a)(l,"FETCH_TWITTER_INTERESTS"),S=Object(d.a)(l,"FETCH_PARTNER_INTERESTS"),b=l+"/"+"CLEAR_LOCATIONS",A={preferences:{data:{},fetchStatus:c.a.NONE},data:{data:{},fetchStatus:c.a.NONE},twitter_interests:{data:{},fetchStatus:c.a.NONE},partner_interests:{data:{},fetchStatus:c.a.NONE}};function h(e,t){switch(void 0===e&&(e=A),t.type){case p.REQUEST:return Object.assign({},e,{preferences:Object.assign({},e.preferences,{fetchStatus:c.a.LOADING})});case p.SUCCESS:return Object.assign({},e,{preferences:{data:Object.assign({},e.preferences.data,t.payload),error:null,fetchStatus:c.a.LOADED}});case p.FAILURE:return Object.assign({},e,{preferences:Object.assign({},e.preferences,{error:t.payload,fetchStatus:c.a.FAILED})});case _.REQUEST:return Object.assign({},e,{preferences:{data:Object.assign({},e.preferences.data,t.payload),error:null,fetchStatus:c.a.LOADED}});case O.REQUEST:return Object.assign({},e,{data:Object.assign({},e.data,{fetchStatus:c.a.LOADING})});case O.SUCCESS:return Object.assign({},e,{data:{data:Object.assign({},e.data.data,t.payload),error:null,fetchStatus:c.a.LOADED}});case O.FAILURE:return Object.assign({},e,{data:Object.assign({},e.data,{error:t.payload,fetchStatus:c.a.FAILED})});case g.REQUEST:return Object.assign({},e,{twitter_interests:Object.assign({},e.twitter_interests,{fetchStatus:c.a.LOADING})});case g.SUCCESS:return Object.assign({},e,{twitter_interests:{data:Object.assign({},e.twitter_interests.data,t.payload),error:null,fetchStatus:c.a.LOADED}});case g.FAILURE:return Object.assign({},e,{twitter_interests:Object.assign({},e.twitter_interests,{error:t.payload,fetchStatus:c.a.FAILED})});case S.REQUEST:return Object.assign({},e,{partner_interests:Object.assign({},e.partner_interests,{fetchStatus:c.a.LOADING})});case S.SUCCESS:return Object.assign({},e,{partner_interests:{data:Object.assign({},e.partner_interests.data,t.payload),error:null,fetchStatus:c.a.LOADED}});case S.FAILURE:return Object.assign({},e,{partner_interests:Object.assign({},e.partner_interests,{error:t.payload,fetchStatus:c.a.FAILED})});case b:return Object.assign({},e,{data:Object.assign({},e.data,{data:Object.assign({},e.data.data,{location_history:[]})})});default:return e}}f.a.register(((r={}).personalization=h,r));var T={allowCookieUse:"use_cookie_personalization",allowDeviceAccess:"allow_logged_out_device_personalization",allowLocationHistoryUse:"allow_location_history_personalization",allowPartnerships:"allow_sharing_data_for_third_party_personalization",allowPersonalization:"allow_ads_personalization"},P={allowCookieUse:"use_cookie_personalization",allowDeviceAccess:"link_logged_out_devices",allowPartnerships:"share_data_with_third_party",allowPersonalization:"allow_ads_personalization"},j={use_age_for_personalization:"age_preferences",use_gender_for_personalization:"gender_preferences"},D=function(e){return e.personalization.preferences.data},I=function(e){return e.personalization.data.data},N=Object(o.createSelector)(a.e,D,s.f,(function(e,t,n){var r=e?[T,n]:[P,t],a=r[0],s=r[1];return Object.keys(a).reduce((function(e,t){return e[t]=s[a[t]],e}),{})})),z=function(e){var t=D(e);return Object(u.a)(t)?e.personalization.preferences.fetchStatus:c.a.LOADED},v=function(e){return e.personalization.data.fetchStatus},w=function(e){return e.personalization.data.data.age?e.personalization.data.data.age:[]},L=function(e){return e.personalization.data.data.birth_date?e.personalization.data.data.birth_date:""},R=function(e){return!!e.personalization.data.data.has_exact_age},C=function(e){var t=I(e),n=D(e),r=n.gender_preferences&&n.gender_preferences.gender_override;return r&&r.type?r:{type:t.gender,value:t.gender}},y=function(e){return e.personalization.data.data.languages?e.personalization.data.data.languages:[]},F=function(e){return e.personalization.data.data.sign_up_details?e.personalization.data.data.sign_up_details:{}},U=function(e){return e.personalization.twitter_interests.data},m=function(e){return e.personalization.twitter_interests.fetchStatus},k=function(e){return e.personalization.partner_interests.data},x=function(e){return e.personalization.partner_interests.fetchStatus},G=function(){return function(e,t){var n=t(),r=D(n),a=Date.now(),s={location_preferences:Object.assign({},r.location_preferences,{override_times:[a]})};return e(W(s)).then((function(){return e({type:b})}))}},q=function(e){return function(t,n){var r=n(),a=D(r),s={gender_preferences:Object.assign({},a.gender_preferences,{gender_override:e})};return t(W(s))}},H=function(e,t){return function(n,r){if(Object(u.a)(e))return Promise.resolve();var a=r(),s=D(a),i=s.language_preferences.disabled_languages||[],o=i.indexOf(e),c=o>-1;if(c&&t)i.splice(o,1);else{if(c||t)return Promise.resolve();i.push(e)}var f={language_preferences:Object.assign({},s.language_preferences,{disabled_languages:i})};return n(W(f))}},Z=function(e,t,n){return function(r,a){var s;if(Object(u.a)(e)||-1===["ads","partner"].indexOf(n))return Promise.resolve();var i="partner"===n,o=a(),c=D(o).interest_preferences,f=i?"disabled_partner_interests":"disabled_interests",d=c[f],l=d.indexOf(e),p=l>-1;if(p&&t)d.splice(l,1);else{if(p||t)return Promise.resolve();d.push(e)}var _={interest_preferences:(s={disabled_interests:c.disabled_interests,disabled_partner_interests:c.disabled_partner_interests},s[f]=d,s)};return r(W(_))}},K=function(){return function(e,t,n){n.api;var r=t().personalization.preferences;return r.fetchStatus!==c.a.LOADING&&r.fetchStatus!==c.a.LOADED?e(Q()):Promise.resolve()}},Q=function(){return function(e,t,n){var r=n.api;return Object(d.b)(e,{request:r.Personalization.fetchPreferences})({actionTypes:p,context:"FETCH_PERSONALIZATION_PREFERENCES"})}},W=function(e){return function(t,n,r){var a=r.api;return Object(u.a)(e)?Promise.resolve():Object(d.c)(t,{params:{preferences:e},request:a.Personalization.updatePreferences})({actionTypes:_,context:"ACTION_UPDATE_PERSONALIZATION_PREFERENCES",payload:e})}},B=function(e){return function(t,n,r){var o=r.api;if(Object(u.a)(e))return Promise.resolve();var c=n(),f=a.e(c),d=f?T:P,l=Object.keys(e).reduce((function(t,n){var r;n in d&&(t[d[n]]=e[n]);n in j&&(t[j[n]]=((r={})[n]=e[n],r));return t}),{});return f?t(s.E(l)).then((function(){Object(i.a)().then((function(e){e.updateBranchTracking(o)})),t(re(l))})):J(t,l,o)}},J=function(e,t,n){return Object(d.c)(e,{params:{preferences:t},request:n.Personalization.updatePreferences})({actionTypes:_,context:"ACTION_UPDATE_PERSONALIZATION_PREFERENCES",payload:t}).then((function(){Object(i.a)().then((function(e){e.updateBranchTracking(n)}))}))},X=function(){return function(e,t,n){n.api;var r=t().personalization.data;return r.fetchStatus!==c.a.LOADING&&r.fetchStatus!==c.a.LOADED?e(Y()):Promise.resolve()}},Y=function(){return function(e,t,n){var r=n.api;return Object(d.b)(e,{request:r.Personalization.fetchData})({actionTypes:O,context:"FETCH_PERSONALIZATION_DATA"})}},M=function(){return function(e,t,n){var r=n.api;return Object(d.d)(e,{request:r.Personalization.createAudienceDownload})("CREATE_AUDIENCE_DOWNLOAD")}},V=function(){return function(e,t,n){var r=n.api;return Object(d.d)(e,{request:r.Personalization.createDataDownload})("CREATE_DATA_DOWNLOAD")}},$=function(){return function(e,t,n){n.api;var r=t().personalization.twitter_interests;return r.fetchStatus!==c.a.LOADING&&r.fetchStatus!==c.a.LOADED?e(ee()):Promise.resolve()}},ee=function(){return function(e,t,n){var r=n.api;return Object(d.b)(e,{request:r.Personalization.fetchTwitterInterests})({actionTypes:g,context:"FETCH_PERSONALIZATION_TWITTER_INTERESTS"})}},te=function(){return function(e,t,n){n.api;var r=t().personalization.partner_interests;return r.fetchStatus!==c.a.LOADING&&r.fetchStatus!==c.a.LOADED?e(ne()):Promise.resolve()}},ne=function(){return function(e,t,n){var r=n.api;return Object(d.b)(e,{request:r.Personalization.fetchPartnerInterests})({actionTypes:S,context:"FETCH_PERSONALIZATION_PARTNER_INTERESTS"})}},re=function(e){return function(t,n,r){var a=r.api,s={};return e.hasOwnProperty("use_cookie_personalization")&&(s.use_cookie_personalization=e.use_cookie_personalization),e.hasOwnProperty("allow_ads_personalization")&&(s.allow_ads_personalization=e.allow_ads_personalization),Object(u.a)(s)?Promise.resolve():Object(d.b)(t,{params:s,request:a.Personalization.updateCookies})({actionTypes:E,context:"APP_UPDATE_PERSONALIZATION_COOKIES",params:s})}},ae=function(){return function(e,t,n){var r=n.api;return Object(d.d)(e,{request:r.Personalization.syncSettings})("SYNC_SETTINGS")}}}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/web_legacy/loader.personalizationData.7ee07964.js.map