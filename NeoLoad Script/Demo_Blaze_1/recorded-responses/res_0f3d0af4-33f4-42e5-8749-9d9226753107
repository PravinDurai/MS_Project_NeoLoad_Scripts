(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{"3OvD":function(e,t,a){"use strict";a("IAdD"),t.__esModule=!0,t.default=void 0;var n=o(a("7DT3")),r=o(a("ERkP")),i=o(a("OkZJ"));function o(e){return e&&e.__esModule?e:{default:e}}var d=function(e){return void 0===e&&(e={}),(0,n.default)("svg",Object.assign({},e,{style:[i.default.root,e.style],viewBox:"0 0 24 24"}),r.default.createElement("g",null,r.default.createElement("path",{d:"M19.708 22H4.292C3.028 22 2 20.972 2 19.708V7.375C2 6.11 3.028 5.083 4.292 5.083h2.146C7.633 3.17 9.722 2 12 2c2.277 0 4.367 1.17 5.562 3.083h2.146C20.972 5.083 22 6.11 22 7.375v12.333C22 20.972 20.972 22 19.708 22zM4.292 6.583c-.437 0-.792.355-.792.792v12.333c0 .437.355.792.792.792h15.416c.437 0 .792-.355.792-.792V7.375c0-.437-.355-.792-.792-.792h-2.45c-.317.05-.632-.095-.782-.382-.88-1.665-2.594-2.7-4.476-2.7-1.883 0-3.598 1.035-4.476 2.702-.16.302-.502.46-.833.38H4.293z"}),r.default.createElement("path",{d:"M12 8.167c-2.68 0-4.86 2.18-4.86 4.86s2.18 4.86 4.86 4.86 4.86-2.18 4.86-4.86-2.18-4.86-4.86-4.86zm2 5.583h-1.25V15c0 .414-.336.75-.75.75s-.75-.336-.75-.75v-1.25H10c-.414 0-.75-.336-.75-.75s.336-.75.75-.75h1.25V11c0-.414.336-.75.75-.75s.75.336.75.75v1.25H14c.414 0 .75.336.75.75s-.336.75-.75.75z"})))};d.metadata={height:24,width:24};var c=d;t.default=c},"51jI":function(e,t,a){"use strict";t.a={edit:"ProfileBirthdate_Edit_Button",cancel:"ProfileBirthdate_Cancel_Button",save:"Profile_Save_Button",remove:"ProfileBirthdate_Remove_Button",monthSelector:"ProfileBirthdate_Month_Selector",daySelector:"ProfileBirthdate_Day_Selector",yearSelector:"ProfileBirthdate_Year_Selector",missingBirthdate:"ProfileBirthdate_Missing_Birthdate"}},"53j7":function(e,t,a){"use strict";a.d(t,"f",(function(){return v})),a.d(t,"g",(function(){return C})),a.d(t,"a",(function(){return E})),a.d(t,"c",(function(){return y})),a.d(t,"b",(function(){return B})),a.d(t,"d",(function(){return S})),a.d(t,"e",(function(){return I})),a.d(t,"h",(function(){return P})),a.d(t,"i",(function(){return U})),a.d(t,"j",(function(){return T}));a("IAdD"),a("7x/C"),a("JtPf");var n,r=a("oEOe"),i=a("AspN"),o=a("/kEJ"),d=a("XMGw"),c=a("Ssj5"),l=d.a+"/profile",s="rweb/"+l,u=function(e){return s+"/"+e},h=r.a(s,"REMOVE_PROFILE_BANNER"),p=r.a(s,"UPDATE_PROFILE"),f=r.a(s,"UPDATE_PROFILE_AVATAR"),m=r.a(s,"UPDATE_PROFILE_BANNER"),_=r.a(s,"UPLOAD_MEDIA"),b={avatarMediaId:null,bannerMediaId:null,isUploading:!1};var v=function(e){return e[l].avatarMediaId},C=function(e){return e[l].bannerMediaId},g=u("ADD_AVATAR_MEDIA"),E=function(e){return{meta:{mediaId:e},type:g}},M=u("REMOVE_AVATAR_MEDIA"),y=function(e){return{meta:{mediaId:e},type:M}},A=u("ADD_BANNER_MEDIA"),B=function(e){return{meta:{mediaId:e},type:A}},R=u("REMOVE_BANNER_MEDIA"),S=function(e){return{meta:{mediaId:e},type:R}},I=function(e){return function(t,a,n){var i=n.api;return r.b(t,{params:e,request:i.Settings.removeProfileBanner})({actionTypes:h,context:"ACTION_REMOVE_USER_BANNER"},(function(e){var t;if(e)return[Object(o.c)({users:(t={},t[e.id_str]=Object.assign({},e,{profile_banner_url:null}),t)})]}))}},P=function(e){return function(t,a,n){var i=n.api;return r.b(t,{params:e,request:i.Settings.updateProfile})({actionTypes:p,context:"ACTION_UPDATE_PROFILE_SETTINGS"},(function(e){if(e&&e.entities)return[Object(o.c)(e.entities)]}))}},O=function(e,t,a){return function(n){return function(d,c,l){var s=l.api;d({type:_.REQUEST});var u=i.k(n);return d(u).then((function(n){var i=n[0];d([{type:_.SUCCESS},{type:e.REQUEST}]);return r.b(d,{params:{media_id:i.uploadId},request:a(s)})({actionTypes:p,context:t},(function(e){var t;if(e)return[Object(o.c)({users:(t={},t[e.id_str]=e,t)})]}))}),(function(e){return d({type:_.FAILURE}),Promise.reject(e)}))}}},U=O(f,"ACTION_UPDATE_USER_AVATAR",(function(e){return e.Settings.updateProfileAvatar})),T=O(m,"ACTION_UPDATE_USER_BANNER",(function(e){return e.Settings.updateProfileBanner}));c.a.register(((n={})[l]=function(e,t){switch(void 0===e&&(e=b),void 0===t&&(t={}),t.type){case g:return Object.assign({},e,{avatarMediaId:t.meta.mediaId});case M:return Object.assign({},e,{avatarMediaId:null});case A:return Object.assign({},e,{bannerMediaId:t.meta.mediaId});case R:return Object.assign({},e,{bannerMediaId:null});case _.REQUEST:return Object.assign({},e,{isUploading:!0});case _.FAILURE:case _.SUCCESS:return Object.assign({},e,{isUploading:!1});default:return e}},n))},P68U:function(e,t,a){"use strict";a("2G9S"),a("hBpG"),a("hCOa"),a("jQ3i"),a("z84I"),a("x4t0"),a("87if");var n=a("1Pcy"),r=a.n(n),i=a("W/Kd"),o=a.n(i),d=a("KEM+"),c=a.n(d),l=a("ERkP"),s=a("oEGd"),u=a("AspN"),h={addMedia:u.b,processMultipleMedia:u.d},p=Object(s.b)(h),f=a("3XMw"),m=a.n(f),_=a("3OvD"),b=a.n(_),v=a("l2F/"),C=a.n(v),g=a("pKoL"),E=a("3xO4"),M=a.n(E),y=a("rFBM"),A=a("/yvb"),B=a("9Xij"),R=a("rHpw"),S=a("VPdC"),I=m.a.b87ca51a,P=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return t=e.call.apply(e,[this].concat(n))||this,c()(r()(t),"_getAcceptedFileInputs",(function(){var e=t.props,a=e.acceptGifs,n=e.acceptVideo;return Object(S.b)({acceptGifs:a,acceptVideo:n})})),c()(r()(t),"_handleAddMediaFiles",(function(e){var a=t.props,n=a.addMedia,r=a.location,i=a.onChange,o=a.onFailure,d=a.processMultipleMedia,c=t._getAcceptedFileInputs(),l=Array.from(e).find((function(e){return c.includes(e.type)}));l&&n([l],{location:r}).then((function(e){i&&i(e.map((function(e){return e.id}))),d(e,{onFailure:o})}))})),t}o()(t,e);var a=t.prototype;return a.render=function(){var e=this.props,t=e.borderRadius,a=e.maskStyle,n=e.mediaItem,r=e.onRemove,i=e.rootStyle,o=n&&!n.uploader;return l.createElement(M.a,{style:[U.container,i,O[t]]},l.createElement(y.a,{onFilesAdded:this._handleAddMediaFiles,style:[U.dragDropContainer,O[t]]},this._renderPreview(),o?null:l.createElement(l.Fragment,null,l.createElement(M.a,{style:[U.mask,a,O[t]]}),l.createElement(M.a,{style:U.mediaPicker},this._renderMediaPicker(),r?this._renderMediaRemove():null))))},a._renderMediaRemove=function(){var e=this.props.onRemove;return l.createElement(A.a,{accessibilityLabel:I,icon:l.createElement(C.a,null),onPress:e,style:U.remove,type:"invertedText"})},a._renderMediaPicker=function(){var e=this.props,t=e.acceptGifs,a=e.acceptVideo,n=e.accessibilityLabel;return l.createElement(S.a,{acceptGifs:t,acceptVideo:a,accessibilityLabel:n,icon:l.createElement(b.a,null),onChange:this._handleAddMediaFiles,type:"invertedText"})},a._renderPreview=function(){var e=this.props,t=e.aspectRatio,a=e.borderRadius,n=e.currentContent,r=e.mediaItem;return r?l.createElement(B.a,{ratio:t},l.createElement(g.a,{borderRadius:a,enableGif:!1,mediaItem:r,style:U.mediaPreview,withCloseButton:!1})):n},t}(l.Component);c()(P,"defaultProps",{acceptGifs:!1,acceptVideo:!1,aspectRatio:1,borderRadius:"none"});var O=R.a.create((function(e){return{infinite:{borderRadius:e.borderRadii.infinite},medium:{borderRadius:e.borderRadii.medium},none:{borderRadius:0}}})),U=R.a.create((function(e){return{mediaPreview:{height:"100%"},mediaPicker:{alignItems:"center",flexDirection:"row",height:"100%",justifyContent:"center",opacity:.75,position:"absolute",top:0,width:"100%"},remove:{marginLeft:e.spaces.large},mask:{backgroundColor:e.colors.translucentBlack30,height:"100%",position:"absolute",top:0,width:"100%"},container:{justifyContent:"center",overflow:"hidden"},dragDropContainer:{borderWidth:e.borderWidths.medium,borderColor:e.colors.transparent,borderStyle:"solid"}}}));t.a=p(P)},PVvL:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("yH/f");var n=Object.freeze({SELF:"self",MUTUAL_FOLLOW:"mutualfollow",FOLLOWING:"following",FOLLOWERS:"followers",PUBLIC:"public"})},fS8x:function(e,t,a){"use strict";var n=a("ERkP"),r=a("1Pcy"),i=a.n(r),o=a("W/Kd"),d=a.n(o),c=a("KEM+"),l=a.n(c),s=a("rxPX"),u=a("/NU0"),h=a("AspN"),p=function(e,t){return t.media?t.media:Object(u.a)(t.mediaId)?Object(h.g)(e,t.mediaId)[0]:void 0},f=function(e,t){return void 0!==t.mediaId?t.mediaId:t.media?t.media.id:null},m=Object(s.a)().propsFromState((function(){return{media:p,mediaId:f}})).propsFromActions((function(){return{processMedia:h.c,updateMediaUpload:h.j}})).withAnalytics({page:"media",section:"edit"}),_=a("jHSc"),b=a("3XMw"),v=a.n(b),C=a("EeFI"),g=a("/yvb"),E=a("rHpw"),M=v.a.gd80afba,y=v.a.a753a87f,A=function(e){function t(t){var a;return a=e.call(this,t)||this,l()(i()(a),"_getMedia",(function(){var e=a.props.media;return e&&e.mediaFile&&e.mediaFile.isImage?e:null})),l()(i()(a),"_renderAppBarRightControl",(function(){var e=a.state.isProcessing;return n.createElement(g.a,{disabled:e,onPress:a._handleApplyButtonClick,size:"normalCompact",type:"primary"},y)})),l()(i()(a),"_handleBackClick",(function(){var e=a.props,t=e.analytics,n=e.onCancel;t.scribe({action:"cancel"}),n&&n()})),l()(i()(a),"_handleApplyButtonClick",(function(){var e=a.props.onCropDone,t=a._cropper.current;if(t){var n=a.props,r=n.analytics,i=n.media,o=n.mediaId,d=n.onDone,c=n.processMedia,l=n.updateMediaUpload;a.setState({isProcessing:!0});var s=t.getCropData(),h=(i||{}).originalMediaFile,p=!h||0===s.top&&0===s.left&&s.width===h.width&&s.height===h.height;Object(u.a)(o)&&(e?(e(s),d()):(l({id:o,cropData:p?void 0:s}),c(o).then((function(){a.setState({isProcessing:!1}),r.scribe({action:"done"}),d()}))))}})),a.state={isProcessing:!1},a._cropper=n.createRef(),t.media||t.onCancel(),a}return d()(t,e),t.prototype.render=function(){var e=this.props,t=e.defaultAspectRatio,a=e.history,r=e.location,i=e.title,o=e.withAspectRatioOptions,d=e.withZoomControl,c=this._getMedia();return n.createElement(_.b,{backButtonType:"back",containerStyle:B.root,documentTitle:i||M,history:a,location:r,onBackClick:this._handleBackClick,rightControl:this._renderAppBarRightControl(),title:i||M},n.createElement(C.a,{defaultAspectRatio:t,media:c,ref:this._cropper,withAspectRatioOptions:o,withZoomControl:d}))},t}(n.Component),B=E.a.create((function(e){return{root:{flexShrink:1,height:650}}})),R=m(A),S=a("X8FW"),I=E.a.create((function(e){return{modal:{width:600,maxWidth:"90vw"}}}));t.a=function(e){return n.createElement(S.b,{clickMaskToClose:!1,location:e.location,modalSize:"fitChildren",style:I.modal},n.createElement(R,e))}},zITG:function(e,t,a){"use strict";a.r(t),a.d(t,"stylizedCharHelperText",(function(){return Pe})),a.d(t,"ProfileScreen",(function(){return Oe}));a("1t7P"),a("jQ/y"),a("DfhM"),a("jwue"),a("ho0z"),a("IAdD"),a("+KXO"),a("KqXw"),a("MvUL"),a("+oxZ");var n,r=a("1Pcy"),i=a.n(r),o=a("W/Kd"),d=a.n(o),c=a("KEM+"),l=a.n(c),s=a("ERkP"),u=a("zh9S"),h=a("AspN"),p=a("53j7"),f=a("1YZw"),m=a("oEGd"),_=a("0KEI"),b=a("hqKg"),v=a("/NU0"),C=a("G6rE"),g=Object(b.createSelector)(C.e.selectLoggedInUser,(function(e,t){var a=p.f(e);return(Object(v.a)(a)?h.g(e,a):[])[0]}),(function(e,t){var a=p.g(e);return(Object(v.a)(a)?h.g(e,a):[])[0]}),(function(e,t,a){return{loggedInUser:e,avatarMedia:t,bannerMedia:a}})),E={addAvatarMedia:p.a,addBannerMedia:p.b,addToast:f.b,createLocalApiErrorHandler:Object(_.d)("SETTINGS_PROFILE_SCREEN"),googleAnalyticsPageView:u.a,removeAvatarMedia:p.c,removeBannerMedia:p.d,removeMediaUpload:h.e,removeProfileBanner:p.e,scribeAction:u.c,scribePageImpression:u.d,updateProfile:p.h,updateProfileAvatar:p.i,updateProfileBanner:p.j},M=Object(m.g)(g,E),y=(a("lTEL"),a("z84I"),a("KOtZ"),a("yH/f"),a("7x/C"),a("iKE+"),a("DZ+c"),a("kYxP"),a("tn7R")),A=Object.freeze({SUPERSCRIPT_AND_SUBSCRIPT:"superscript_and_subscript",CURRENCY:"currency",LETTER_LIKE:"letter_like",NUMBER_FORMS:"number_forms",ARROWS:"arrows",MATHEMATICAL:"mathematical",GENERAL_PUNCTUATION:"general_punctuation",ENCLOSED_ALPHANUMERICS:"enclosed_alphanumerics",BOX:"box",GEOMETRIC:"geometric",LATIN:"latin",SPACING_MODIFIER:"spacing_modifier",PUNCTUATION:"punctuation",MISC:"miscellaneous"}),B=Object(y.a)(A),R=((n={})[A.SUPERSCRIPT_AND_SUBSCRIPT]={base:"[⁰-ⁱ]|[⁴-₎]|[ₐ-ₜ]",specialChars:{}},n[A.CURRENCY]={base:"[₠-₿]",specialChars:{$:"[$]"}},n[A.LETTER_LIKE]={base:"[℀-⅏]",specialChars:{}},n[A.NUMBER_FORMS]={base:"[⅐-↋]",specialChars:{}},n[A.ARROWS]={base:"[←-⇿]",specialChars:{}},n[A.MATHEMATICAL]={base:"[∀-⋿]|[⊓-⊕]|[⨀-⫿]|[⟀-⟯]|[⦀-⧿]",specialChars:{}},n[A.GENERAL_PUNCTUATION]={base:"[ -⁯]|[!-/]|[:-@]|[[-`]|[{-~]|[⸀-⹿]",specialChars:{}},n[A.ENCLOSED_ALPHANUMERICS]={base:"[①-⓿]",specialChars:{}},n[A.BOX]={base:"[─-╿]|[▀-▟]",specialChars:{}},n[A.GEOMETRIC]={base:"[■-◿]",specialChars:{}},n[A.LATIN]={base:"[ -ÿ]|[Ā-ſ]|[ƀ-ɏ]|[Ḃ-ỳ]|[Ⱡ-Ɀ]|[꜠-ꟿ]",specialChars:{}},n[A.SPACING_MODIFIER]={base:"[ʰ-˿]",specialChars:{}},n[A.PUNCTUATION]={base:"[ -⁯]",specialChars:{}},n[A.MISC]={base:"[–-„]|[⌀-⌙]|[⌜-⏦]|[☀-☓]|[☖-☜]|[☞-♇]|[♔-♾]|[⚀-⚒]|[⚔-⚠]|[⚢-⚩]|[⚬-⚼]",specialChars:{}},n),S=function(e){var t=e.text,a=e.keys,n=void 0===a?B:a,r=e.includeSpecialChars,i=void 0===r||r,o=n.map((function(e){return function(e,t){void 0===t&&(t=!0);var a=R[e],n=""+a.base;if(t){var r=a.specialChars;for(var i in r)n+="|"+r[i]}return n}(e,i)})).reduce((function(e,t){return e+"|"+t}));return new RegExp(o,"g").test(t)},I=a("wrlS"),P=a("jHSc"),O=a("kp0V"),U=a("fS8x"),T=a("mN6z"),w=a("P68U"),D=a("eyty"),L=(a("uFXj"),a("JtPf"),a("zb92")),N=a("RuTB"),j=Object(L.a)({loader:function(){return Promise.all([a.e(0),a.e(160)]).then(a.bind(null,"it2P"))},renderPlaceholder:function(e,t){return s.createElement(N.a,{error:e,onRetry:t})}}),F=a("3XMw"),x=a.n(F),k=a("51jI"),V=a("WWyu"),z=a("3xO4"),H=a.n(z),G=a("t62R"),W=a("21zW"),K=a("eb3s"),X=a("rHpw"),Z=x.a.c119dee8,q=x.a.abd845fd,J=x.a.cfd2f35d,Q=x.a.bbf0afc7,Y={headline:x.a.f98d367e,text:x.a.b982a8b4,confirmButtonLabel:x.a.abd845fd},$=function(e){function t(t){var a;return a=e.call(this,t)||this,l()(i()(a),"_handleModalCancel",(function(){a.setState({showConfirmationModal:!1})})),l()(i()(a),"_handleModalConfirmed",(function(){a.setState({isEditing:!0,showConfirmationModal:!1})})),l()(i()(a),"_handleEditPress",(function(){a.setState({showConfirmationModal:!0})})),l()(i()(a),"_handleRemoveBirthdate",(function(){var e=a.props.onRemoveBirthdate;a.setState({isEditing:!1}),e()})),l()(i()(a),"_handleCancelEditPress",(function(){a.props.onCancelEditBirthdate(),a.setState({isEditing:!1})})),a.state={isEditing:!1,showConfirmationModal:!1},a}d()(t,e);var a=t.prototype;return a.render=function(){var e=this.state.isEditing,t=this.props,a=t.birthdate,n=t.errors,r=t.onChange,i=t.showBirthdateRemoveButton,o=a.month&&a.day&&a.year;return s.createElement(H.a,{style:ee.root},s.createElement(H.a,{style:ee.container},e?s.createElement(G.c,{weight:"bold"},Z):s.createElement(G.c,{color:"deepGray"},Z),s.createElement(W.a,null),s.createElement(G.c,{accessibilityRole:"button",color:"link",onPress:e?this._handleCancelEditPress:this._handleEditPress,testID:e?k.a.cancel:k.a.edit,withInteractiveStyling:!0},e?J:q)),e?s.createElement(j,{birthdate:a,errors:n,onChange:r,onRemoveBirthdate:this._handleRemoveBirthdate,showBirthdateRemoveButton:i}):s.createElement(G.c,{size:"large",testID:o?void 0:k.a.missingBirthdate},o?s.createElement(V.a,{birthdate:a}):Q),this._renderConfirmationModal())},a._renderConfirmationModal=function(){return this.state.showConfirmationModal?s.createElement(K.a,{confirmButtonLabel:Y.confirmButtonLabel,headline:Y.headline,onCancel:this._handleModalCancel,onConfirm:this._handleModalConfirmed,text:Y.text,withForwardFocusOnConfirm:!0}):null},t}(s.Component),ee=X.a.create((function(e){return{root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.small},container:{flexDirection:"row"},containerItem:{marginLeft:e.spaces.xxSmall}}})),te=a("PVvL"),ae=a("Dtul"),ne=a("BTou"),re=(a("AxOO"),a("oSwX")),ie=a("9Xij"),oe=a("Q0VY"),de=a("/yvb"),ce=a("p+r5"),le=(a("aWzz"),a("jTgF")),se=a("D4le"),ue=a.n(se),he=x.a.g7088266,pe=x.a.d4e220b3,fe=x.a.d9d293b8,me=x.a.f9130a80,_e=x.a.a990900c,be=x.a.f7d20516,ve=x.a.jaaa8984,Ce=x.a.dcd7b98a,ge=x.a.i2209530,Ee=x.a.c9a30f8d,Me={page:"settings",section:"profile"},ye=x.a.g511f467,Ae=x.a.ec3a116d,Be=x.a.j94599ec,Re=x.a.df31d76a,Se={confirmButtonLabel:x.a.g9677c6d,headline:x.a.c01a0e19},Ie={visibility:te.a.MUTUAL_FOLLOW,year_visibility:te.a.SELF},Pe=x.a.h369d127,Oe=function(e){function t(t){var a;a=e.call(this,t)||this,l()(i()(a),"_firstUnicodeCharDetected",!1),l()(i()(a),"_unicodeDetectionScribed",!1),l()(i()(a),"_unicodeDetectionEnabled",I.a.isTrue("name_accessibility_unicode_detection_enabled")),l()(i()(a),"_handleCancel",(function(){var e=a.props,t=e.history,n=e.location,r=e.loggedInUser,i=r?"/"+r.screen_name:"/login";Object(O.a)({history:t,location:n,backLocation:i})})),l()(i()(a),"_handleSubmit",(function(){var e=a._getBirthdateErrors();Object.keys(e).length?a.setState({errors:e}):a._shouldShowBirthdateConfirmationModal()?a.setState({showBirthdateConfirmationModal:!0}):(a._saveChanges(),a._displayNameUnicodeScribingOnSave())})),l()(i()(a),"_displayNameUnicodeScribingOnSave",(function(){var e=a.props.scribeAction;if(a._unicodeDetectionEnabled&&a._firstUnicodeCharDetected){var t=a.state.isStylizedUnicodeDisplayName?"contains_unicode_symbols":"no_unicode_symbols";e(Object.assign({},Me,{component:"unicode_detector",element:t,action:"save"}))}})),l()(i()(a),"_getBirthdateErrors",(function(){var e=a.state.birthdate,t={};return e!==Ie&&["day","month","year"].forEach((function(a){e[a]||(t[a]=!0)})),t})),l()(i()(a),"_shouldShowBirthdateConfirmationModal",(function(){var e=a.props.loggedInUser,t=a.state.birthdate,n=["day","month","year"].every((function(e){return!!t[e]})),r=e&&e.birthdate||Ie,i=!Object(T.a)(r,t);return n&&i})),l()(i()(a),"_handleBirthdateModalCancel",(function(){a.setState({showBirthdateConfirmationModal:!1})})),l()(i()(a),"_handleBirthdateModalConfirm",(function(){a.setState({showBirthdateConfirmationModal:!1}),a._scribeBirthdateAddOrEdit(),a._saveChanges()})),l()(i()(a),"_handleBirthdateChange",(function(e){var t=a.state,n=t.birthdate,r=t.errors,i=Object.assign({},r);Object.keys(r).forEach((function(t){e[t]&&r[t]&&delete i[t]})),a.setState({birthdate:Object.assign({},n,e),errors:i})})),l()(i()(a),"_handleResetBirthdate",(function(){var e=a.props.loggedInUser&&a.props.loggedInUser.birthdate;a.setState({birthdate:e||Ie,errors:{}})})),l()(i()(a),"_handleRemoveBirthdate",(function(){var e=a.props,t=e.updateProfile,n=e.createLocalApiErrorHandler;(0,e.scribeAction)(Object.assign({},Me,{component:"birthdate",action:"remove"})),t({birthdate_day:0,birthdate_month:0,birthdate_year:0}).then((function(){a.setState({birthdate:Ie,errors:{}})})).catch(n({showToast:!0}))})),l()(i()(a),"_handleAvatarMediaChange",(function(e){var t=e[0],n=a.props,r=n.addAvatarMedia,i=n.avatarMedia;i&&a._clearAvatarMedia(i.id),r(t),a.setState({showAvatarCropper:!0})})),l()(i()(a),"_handleAvatarCropDone",(function(){return a.setState({showAvatarCropper:!1})})),l()(i()(a),"_handleAvatarCropCancel",(function(){return a._handleAvatarCropDone()})),l()(i()(a),"_handleBannerMediaChange",(function(e){var t=e[0],n=a.props,r=n.addBannerMedia,i=n.bannerMedia;i&&a._clearBannerMedia(i.id),r(t),a.setState({showBannerCropper:!0})})),l()(i()(a),"_handleBannerCropDone",(function(){return a.setState({showBannerCropper:!1})})),l()(i()(a),"_handleBannerCropCancel",(function(){return a._handleBannerCropDone()})),l()(i()(a),"_handleBannerMediaRemove",(function(){var e=a.props.bannerMedia;e?a._clearBannerMedia(e.id):a.setState({shouldDeleteBanner:!0})})),l()(i()(a),"_handleAvatarMediaFailure",(function(e){a._clearAvatarMedia(e)})),l()(i()(a),"_handleBannerMediaFailure",(function(e){a._clearBannerMedia(e)})),l()(i()(a),"_handleMediaUpdateFailureFactory",(function(e,t){return function(n){var r=a.props,i=r.addToast,o=r.createLocalApiErrorHandler,d=r.removeMediaUpload,c=Object(le.a)(n);if(c){var l=Object(le.b)(c,t);l&&i(l)}else o({showToast:!0})(n);d(e.id)}})),l()(i()(a),"_renderInputHelperText",(function(){return a.state.isStylizedUnicodeDisplayName&&a._unicodeDetectionEnabled?Pe:null})),l()(i()(a),"_handleChangeDisplayName",(function(e){var t=e.currentTarget.value,n=S({text:t});(a._firstUnicodeCharDetected=a._firstUnicodeCharDetected||n,a.setState({name:t,isStylizedUnicodeDisplayName:n}),a._firstUnicodeCharDetected&&!a._unicodeDetectionScribed)&&(a._unicodeDetectionScribed=!0,(0,a.props.scribeAction)(Object.assign({},Me,{component:"unicode_detector",action:"unicode_detected"})))})),l()(i()(a),"_handleChangeDescription",(function(e){a.setState({description:e.currentTarget.value})})),l()(i()(a),"_handleChangeLocation",(function(e){a.setState({location:e.currentTarget.value})})),l()(i()(a),"_handleChangeURL",(function(e){a.setState({url:e.currentTarget.value})}));var n=t.loggedInUser;return a.state={displayNameMaxLength:I.a.getNumberValue("user_display_name_max_limit",20),birthdate:n&&n.birthdate||Ie,showBirthdateConfirmationModal:!1,errors:{},showAvatarCropper:!1,showBannerCropper:!1,shouldDeleteBanner:!1,isStylizedUnicodeDisplayName:!1},a}d()(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this.props,t=e.googleAnalyticsPageView,a=e.scribePageImpression,n=e.loggedInUser,r=e.history;n?(a(Me),t(Me),this._unlockReload=ae.a.acquire()):r.push("/login")},a.componentWillUnmount=function(){var e=this.props,t=e.avatarMedia,a=e.bannerMedia;t&&this._clearAvatarMedia(t.id),a&&this._clearBannerMedia(a.id),this._unlockReload()},a.render=function(){var e=this.props.loggedInUser;return e?this._render(e):null},a._render=function(e){var t=this.props,a=t.location,n=t.avatarMedia,r=t.bannerMedia,i=t.history,o=this.state,d=o.displayNameMaxLength,c=o.shouldDeleteBanner,l=o.showAvatarCropper,u=o.showBannerCropper,h=o.errors,p=e.entities.url,f=p&&p.urls?p.urls[0].expanded_url:null,m=s.createElement(re.default,{size:"custom",uri:e.profile_image_url_https}),_=r||e.profile_banner_url&&!c,b=s.createElement(ie.a,{ratio:X.a.theme.aspectRatios.profileBanner},_?s.createElement(ue.a,{source:{uri:e.profile_banner_url},style:Ue.banner}):null),v=e.description;null!==v&&oe.a.descriptionTextParts(v,e.entities).forEach((function(e){"url"===e.entityType&&(v=v.replace(e.url,e.displayUrl))}));var C=!!(n&&!n.uploader||r&&!r.uploader)||!!Object.keys(h).length,g=s.createElement(de.a,{disabled:C,onPress:this._handleSubmit,size:"normalCompact",testID:k.a.save,type:"primary"},ge);return s.createElement(P.b,{history:i,location:a,onBackClick:this._handleCancel,rightControl:g,title:he},s.createElement(H.a,{style:Ue.container},s.createElement(w.a,{accessibilityLabel:Re,aspectRatio:3,currentContent:b,location:D.c.Banner,mediaItem:r,onChange:this._handleBannerMediaChange,onFailure:this._handleBannerMediaFailure,onRemove:_?this._handleBannerMediaRemove:void 0,rootStyle:Ue.bannerContainer}),s.createElement(w.a,{accessibilityLabel:Be,borderRadius:"infinite",currentContent:m,location:D.c.Avatar,mediaItem:n,onChange:this._handleAvatarMediaChange,onFailure:this._handleAvatarMediaFailure,rootStyle:Ue.avatarContainer}),s.createElement(ce.a,{autoComplete:"off",defaultValue:e&&e.name,helperText:this._renderInputHelperText(),label:pe,maxLength:d,name:"displayName",onChange:this._handleChangeDisplayName,placeholder:Ee}),s.createElement(ce.a,{defaultValue:v,label:_e,maxLength:160,multiline:!0,name:"description",numberOfLines:3,onChange:this._handleChangeDescription,placeholder:be}),s.createElement(ce.a,{defaultValue:e&&e.location,label:ve,maxLength:30,name:"location",onChange:this._handleChangeLocation,placeholder:Ce}),s.createElement(ce.a,{defaultValue:f||"",label:fe,maxLength:100,name:"url",onChange:this._handleChangeURL,placeholder:me}),this._renderProfileBirthdate(),this._renderBirthdateConfirmationModal()),l?s.createElement(U.a,{circle:!0,defaultAspectRatio:1,location:a,media:n,onCancel:this._handleAvatarCropCancel,onDone:this._handleAvatarCropDone}):null,u?s.createElement(U.a,{defaultAspectRatio:3,location:a,media:r,onCancel:this._handleBannerCropCancel,onDone:this._handleBannerCropDone}):null)},a._renderProfileBirthdate=function(){var e=this.state,t=e.birthdate,a=e.errors,n=this.props.loggedInUser;return s.createElement($,{birthdate:t,errors:a,onCancelEditBirthdate:this._handleResetBirthdate,onChange:this._handleBirthdateChange,onRemoveBirthdate:this._handleRemoveBirthdate,showBirthdateRemoveButton:!(!n||!n.birthdate)})},a._renderBirthdateConfirmationModal=function(){return this.state.showBirthdateConfirmationModal?s.createElement(K.a,{confirmButtonLabel:Se.confirmButtonLabel,headline:Se.headline,onCancel:this._handleBirthdateModalCancel,onConfirm:this._handleBirthdateModalConfirm,text:this._getBirthdateConfirmationModalText()}):null},a._getBirthdateConfirmationModalText=function(){var e=this.state.birthdate,t=e.day,a=e.month,n=e.year;return s.createElement(x.a.I18NFormatMessage,{$i18n:"e9dec56e"},s.createElement(V.a,{birthdate:{day:t,month:a,year:n}}))},a._saveChanges=function(){var e=this,t=this.props,a=t.avatarMedia,n=t.bannerMedia,r=t.createLocalApiErrorHandler,i=t.removeMediaUpload,o=t.updateProfile,d=t.updateProfileAvatar,c=t.updateProfileBanner,l=t.removeProfileBanner;if(a){var s=a.id;d(s).then((function(){return i(s)}),this._handleMediaUpdateFailureFactory(a,ye))}n?c(n.id).then((function(){return i(n.id)}),this._handleMediaUpdateFailureFactory(n,Ae)):this.state.shouldDeleteBanner&&l().catch(r({showToast:!0})),o(this._getFormattedState()).then((function(){ne.a.refreshHTMLCache(),e._handleCancel()})).catch(r({showToast:!0}))},a._getFormattedState=function(){var e=this.state,t=e.birthdate,a=e.displayNameMaxLength,n=e.url,r=e.name,i=e.description,o=e.location,d=t.day,c=t.month,l=t.year,s=t.visibility,u=t.year_visibility,h=d&&c&&l?{birthdate_day:d,birthdate_month:c,birthdate_year:l,birthdate_visibility:s,birthdate_year_visibility:u}:{};return Object.assign({},h,{displayNameMaxLength:a,url:n,name:r,description:i,location:o})},a._scribeBirthdateAddOrEdit=function(){var e=this.props,t=e.scribeAction,a=e.loggedInUser,n=a&&a.birthdate,r=n&&n.month&&n.day&&n.year?"edit":"add";t(Object.assign({},Me,{component:"birthdate",action:r}))},a._clearAvatarMedia=function(e){var t=this.props,a=t.avatarMedia,n=t.removeAvatarMedia,r=t.removeMediaUpload;a&&a.uploading||r(e),n(e)},a._clearBannerMedia=function(e){var t=this.props,a=t.bannerMedia,n=t.removeBannerMedia,r=t.removeMediaUpload;a&&a.uploading||r(e),n(e)},t}(s.Component),Ue=X.a.create((function(e){return{avatarContainer:{backgroundColor:e.colors.cellBackground,borderWidth:e.borderWidths.medium,borderColor:e.colors.cellBackground,borderStyle:"solid",marginLeft:"1rem",marginTop:"-3rem",maxWidth:"8rem",width:"25%"},banner:{height:"100%"},bannerContainer:{maxHeight:"200px"},container:{paddingBottom:e.spaces.jumbo}}}));t.default=M(Oe)}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/web_legacy/bundle.SettingsProfile.f914f2c4.js.map