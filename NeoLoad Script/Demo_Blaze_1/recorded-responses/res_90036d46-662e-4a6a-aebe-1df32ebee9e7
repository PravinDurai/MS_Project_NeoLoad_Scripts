(window.webpackJsonp=window.webpackJsonp||[]).push([[185],{Gffe:function(e,t,r){"use strict";r.r(t),r.d(t,"ProfileClusterFollowContainer",(function(){return H}));r("2G9S"),r("z84I"),r("M+/F"),r("IAdD");var n=r("1Pcy"),o=r.n(n),a=r("W/Kd"),s=r.n(a),i=r("KEM+"),c=r.n(i),l=r("ERkP"),u=r("kGix"),d=r("Rp9C"),m=r("lP98"),f=r("rxPX"),p=r("0KEI"),h=function(e,t){return t.userId},I=function(e,t){var r=h(0,t);return m.c(e,{displayLocation:"profile-cluster-follow",similarToUserId:r})},E=function(e,t){var r=h(0,t);return m.b(e,{displayLocation:"profile-cluster-follow",similarToUserId:r})},v=Object(f.a)().propsFromState((function(){return{fetchStatus:E,recommendations:I}})).propsFromActions((function(){return{createLocalApiErrorHandler:Object(p.d)("WHO_TO_FOLLOW_CONTAINER"),fetchRecommendationsIfNeeded:m.a}})).withAnalytics(),y=r("3XMw"),b=r.n(y),U=r("l2F/"),_=r.n(U),L=r("Re5t"),O=r("hqDb"),w=r("3xO4"),S=r.n(w),C=r("/yvb"),A=r("zfvc"),F=r("0yYu"),R=r("6vad"),T=r("rHpw"),g=b.a.ba5a88e3,D=b.a.a526aa66,N=l.createElement(_.a,null),j=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,c()(o()(t),"_handleRemoveClusterFollow",(function(){t.props.onRemoveClusterFollow()})),c()(o()(t),"_renderCloseButton",(function(){return l.createElement(C.a,{icon:N,onPress:t._handleRemoveClusterFollow,size:"small",type:"text"})})),t}return s()(t,e),t.prototype.render=function(){var e=this.props.userIds;return l.createElement(A.b,{animateMount:!0,duration:"longer",show:!0,type:"slide"},l.createElement(S.a,{accessibilityLabel:D,accessibilityRole:"complementary",style:M.root},l.createElement(F.a,null),l.createElement(R.a,{rightControl:this._renderCloseButton(),text:g}),l.createElement(O.a,{displayMode:L.a.UserCompact,userIds:e.slice(0,3),withItemBorder:!0}),l.createElement(F.a,null)))},t}(l.Component),M=T.a.create((function(e){return{root:{marginTop:e.spaces.xSmall}}})),k={component:"suggest_profile_cluster_follow",element:"user",action:"results"},x={component:"suggest_profile_cluster_follow",element:"close_button",action:"click"},H=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,c()(o()(t),"_handleImpression",(function(e){var r=t.props.analytics,n=e&&e.slice(0,3).map((function(e){return Object.assign({},d.a.forUser(e.user),{suggestion_details:{source_data:e.token}})}));r.scribe(Object.assign({},k,{data:{items:n}}))})),c()(o()(t),"_handleCloseButtonImpression",(function(){var e=t.props,r=e.analytics,n=e.onRemoveClusterFollow;r.scribe(x),n()})),t}s()(t,e);var r=t.prototype;return r.componentDidMount=function(){var e=this.props.recommendations;this._fetchRecommendations(this.props),e&&e.length>0&&this._handleImpression(e)},r.componentDidUpdate=function(e){var t=this.props.recommendations;t!==e.recommendations&&t&&t.length>0&&this._handleImpression(t)},r.render=function(){var e=this.props.recommendations,t=e&&e.map((function(e){return e.user}));return this._hasLoadedUsers()?l.createElement(j,{onRemoveClusterFollow:this._handleCloseButtonImpression,userIds:t}):null},r._fetchRecommendations=function(e){var t=e.createLocalApiErrorHandler;(0,e.fetchRecommendationsIfNeeded)({limit:3,displayLocation:"profile-cluster-follow",similarToUserId:e.userId}).catch(t({}))},r._hasLoadedUsers=function(){var e=this.props,t=e.fetchStatus,r=e.recommendations;return t===u.a.LOADED&&r.length>0},t}(l.PureComponent),P=v(H);t.default=P},hqDb:function(e,t,r){"use strict";r("2G9S");var n=r("97Jx"),o=r.n(n),a=r("LdEA"),s=r.n(a),i=r("1Pcy"),c=r.n(i),l=r("W/Kd"),u=r.n(l),d=r("KEM+"),m=r.n(d),f=r("ERkP"),p=r("k49u"),h=(r("LW0h"),r("vrRf"),r("KOtZ"),r("rxPX")),I=r("0KEI"),E=r("6xIQ"),v=r("kGix"),y=r("G6rE"),b=function(e,t){return t.userIds},U=function(e,t){return t.userIds.filter((function(t){return!!y.e.select(e,t)}))},_=function(e,t){return t.userIds.reduce((function(t,r){var n=y.e.selectFetchStatus(e,r);return t[r]=n===v.a.NONE?v.a.LOADING:n,t}),{})},L=Object(h.a)().propsFromState((function(){return{availableUserIds:Object(E.a)(U,(function(e){return e})),fetchStatus:Object(E.a)(U,_,b,(function(e,t,r){for(var n=v.a.LOADED,o=0;o<r.length;o++){var a=r[o];if(-1===e.indexOf(a)){var s=t[a]||v.a.LOADING;n=n===v.a.LOADED?s:n}if(n===v.a.LOADED)break}return n}))}})).propsFromActions((function(){return{createLocalApiErrorHandler:Object(I.d)("USERS_LIST_CONTAINER"),fetchUsersIfNeeded:y.e.fetchManyIfNeeded}})),O=r("v//M"),w=r("3XMw"),S=r.n(w),C=r("pQ3Z"),A=r.n(C),F=(r("z84I"),r("cFuS")),R=r("Re5t"),T=r("3xO4"),g=r.n(T),D=r("88ay"),N=function(e){var t=e.displayMode,r=e.renderUserCell,n=e.withFinalItemBorder,o=e.withItemBorder,a=e.userIds;return f.createElement(g.a,null,a.map((function(e,s){var i=s===a.length-1,c=i&&o&&n||!i&&o;return r?r(e):f.createElement(D.b,{decoration:D.d,displayMode:t,key:e,promotedItemType:F.c.USER,userId:e,withBottomBorder:!!c,withFollowsYou:!0})})))};N.defaultProps={displayMode:R.a.UserDetailed,withFinalItemBorder:!0,withItemBorder:!1};var j=N,M=S.a.f5b426c2,k=L(function(e){function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,m()(c()(t),"state",{allUsersUnavailable:!1}),m()(c()(t),"_renderContent",(function(){var e=t.props,r=e.availableUserIds,n=(e.createLocalApiErrorHandler,e.fetchStatus,e.fetchUsersIfNeeded,e.userIds,s()(e,["availableUserIds","createLocalApiErrorHandler","fetchStatus","fetchUsersIfNeeded","userIds"]));return f.createElement(j,o()({},n,{userIds:r}))})),m()(c()(t),"_handleFetch",(function(){t._fetchUsersIfNeeded()})),t}u()(t,e);var r=t.prototype;return r.componentDidMount=function(){this._fetchUsersIfNeeded()},r.componentDidUpdate=function(e){A()(e.userIds,this.props.userIds)||this._fetchUsersIfNeeded()},r.render=function(){return f.createElement(O.a,{accessibilityLabel:M,fetchStatus:this.state.allUsersUnavailable?v.a.LOADED:this.props.fetchStatus,onRequestRetry:this._handleFetch,render:this._renderContent,retryable:!1})},r._fetchUsersIfNeeded=function(){var e,t=this,r=this.props,n=r.createLocalApiErrorHandler,o=r.fetchUsersIfNeeded,a=r.availableUserIds;o(r.userIds).then((function(){t.setState({allUsersUnavailable:!1})}),n(((e={})[p.a.AddressBookLookupNotFound]={customAction:function(){0===a.length&&t.setState({allUsersUnavailable:!0})}},e)))},t}(f.Component));t.a=k},lP98:function(e,t,r){"use strict";r.d(t,"c",(function(){return p})),r.d(t,"b",(function(){return h})),r.d(t,"a",(function(){return I}));r("z84I"),r("IAdD"),r("7x/C"),r("JtPf");var n,o=r("/kEJ"),a=r("oEOe"),s=r("RgK2"),i=r.n(s),c=r("kGix"),l=r("Ssj5"),u={},d=function(e){var t=e.displayLocation,r=e.similarToUserId;return t+(r?"_"+r:"")};l.a.register(((n={}).recommendations=function(e,t){if(void 0===e&&(e=u),!t.meta)return e;switch(t.type){case"rweb/recommendations/FETCH_REQUEST":var r,n=d(t.meta);return Object.assign({},e,((r={})[n]=Object.assign({},e[n],{fetchStatus:c.a.LOADING}),r));case"rweb/recommendations/FETCH_FAILURE":var o,a=d(t.meta);return Object.assign({},e,((o={})[a]=Object.assign({},e[a],{fetchStatus:c.a.FAILED}),o));case"rweb/recommendations/FETCH_SUCCESS":var s,l=d(t.meta),m=t.payload&&t.payload.entities?t.payload.entities:{recommendations:i.a},p=(t.payload&&t.payload.result?t.payload.result:f).map((function(e){return m.recommendations[e]}));return Object.assign({},e,((s={})[l]=Object.assign({},e[l],{fetchStatus:c.a.LOADED,recommendations:p}),s));default:return e}},n));var m=[],f=[],p=function(e,t){var r=t.displayLocation,n=t.similarToUserId,o=e.recommendations[d({displayLocation:r,similarToUserId:n})];return o&&o.recommendations?o.recommendations:m},h=function(e,t){var r=t.displayLocation,n=t.similarToUserId,o=e.recommendations[d({displayLocation:r,similarToUserId:n})];return o?o.fetchStatus:c.a.NONE},I=function(e){return function(t,r,n){var s=r(),l=e.displayLocation,u=e.similarToUserId,d=p(s,{displayLocation:l,similarToUserId:u}),m=h(s,{displayLocation:l,similarToUserId:u})===c.a.LOADED;return d&&m?Promise.resolve(i.a):t(function(e){return function(t,r,n){var s=n.api,i=e.displayLocation,c=e.itsInterests,l=e.limit,u=void 0===l?30:l,d=e.similarToUserId;return Object(a.b)(t,{request:s.Recommendations.fetch,params:{display_location:i,itsInterests:c,limit:u,user_id:d}})({actionTypes:{REQUEST:"rweb/recommendations/FETCH_REQUEST",SUCCESS:"rweb/recommendations/FETCH_SUCCESS",FAILURE:"rweb/recommendations/FETCH_FAILURE"},context:"FETCH_RECOMMENDATIONS",meta:{displayLocation:i,similarToUserId:d}},(function(e){if(e)return[Object(o.c)(e.entities)]}))}}(e))}}}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/web_legacy/loader.ProfileClusterFollow.2eaf2504.js.map