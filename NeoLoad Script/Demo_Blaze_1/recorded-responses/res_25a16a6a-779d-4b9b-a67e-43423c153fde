(window.webpackJsonp=window.webpackJsonp||[]).push([[128],{"1sB9":function(e,t,n){"use strict";n("IAdD"),t.__esModule=!0,t.default=void 0;var r=o(n("7DT3")),a=o(n("ERkP")),i=o(n("OkZJ"));function o(e){return e&&e.__esModule?e:{default:e}}var c=function(e){return void 0===e&&(e={}),(0,r.default)("svg",Object.assign({},e,{style:[i.default.root,e.style],viewBox:"0 0 24 24"}),a.default.createElement("g",null,a.default.createElement("path",{d:"M23.25 3.25h-2.425V.825c0-.414-.336-.75-.75-.75s-.75.336-.75.75V3.25H16.9c-.414 0-.75.336-.75.75s.336.75.75.75h2.425v2.425c0 .414.336.75.75.75s.75-.336.75-.75V4.75h2.425c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm-3.175 6.876c-.414 0-.75.336-.75.75v8.078c0 .414-.337.75-.75.75H4.095c-.412 0-.75-.336-.75-.75V8.298l6.778 4.518c.368.246.79.37 1.213.37.422 0 .844-.124 1.212-.37l4.53-3.013c.336-.223.428-.676.204-1.012-.223-.332-.675-.425-1.012-.2l-4.53 3.014c-.246.162-.563.163-.808 0l-7.586-5.06V5.5c0-.414.337-.75.75-.75h9.094c.414 0 .75-.336.75-.75s-.336-.75-.75-.75H4.096c-1.24 0-2.25 1.01-2.25 2.25v13.455c0 1.24 1.01 2.25 2.25 2.25h14.48c1.24 0 2.25-1.01 2.25-2.25v-8.078c0-.415-.337-.75-.75-.75z"})))};c.metadata={height:24,width:24};var l=c;t.default=l},"3GUV":function(e,t,n){"use strict";n("Blm6");var r=n("W/Kd"),a=n.n(r),i=n("ERkP"),o=n("rHpw"),c=n("3xO4"),l=n.n(c),s=function(e){function t(){return e.apply(this,arguments)||this}a()(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(){return!1},n.render=function(){return i.createElement(l.a,{style:d.root})},t}(i.Component),d=o.a.create((function(e){return{root:{height:5*parseInt(e.lineHeight,10)+"rem"}}}));t.a=s},"3Rb5":function(e,t,n){"use strict";n("IAdD"),t.__esModule=!0,t.default=void 0;var r=o(n("7DT3")),a=o(n("ERkP")),i=o(n("OkZJ"));function o(e){return e&&e.__esModule?e:{default:e}}var c=function(e){return void 0===e&&(e={}),(0,r.default)("svg",Object.assign({},e,{style:[i.default.root,e.style],viewBox:"0 0 24 24"}),a.default.createElement("g",null,a.default.createElement("path",{d:"M12 4.656l8.72 8.72c.293.293.768.293 1.06 0s.294-.768 0-1.06l-9.25-9.25c-.292-.294-.767-.294-1.06 0l-9.25 9.25c-.146.145-.22.337-.22.53s.073.383.22.53c.293.292.768.292 1.06 0L12 4.656z"}),a.default.createElement("path",{d:"M12 12.465l8.72 8.72c.293.293.768.293 1.06 0s.294-.768 0-1.06l-9.25-9.25c-.292-.294-.767-.294-1.06 0l-9.25 9.25c-.146.145-.22.337-.22.53s.073.383.22.53c.293.292.768.292 1.06 0l8.72-8.72z"})))};c.metadata={height:24,width:24};var l=c;t.default=l},"4q8G":function(e,t,n){"use strict";var r=n("t0aI");t.a=function(e,t){var n=e.sort_event_id,a=t.sort_event_id;return n?a?Object(r.a)(a,n):1:-1}},"5UID":function(e,t,n){"use strict";var r=n("W/Kd"),a=n.n(r),i=n("ERkP"),o=n("3XMw"),c=n.n(o),l=n("rHpw"),s=(n("aWzz"),n("PARX")),d=n.n(s),u=n("3xO4"),m=n.n(u),p=c.a.e5b0063d,h=0,f=function(e){function t(){var t;return(t=e.call(this)||this)._listDomId="accessible-list-"+h,h+=1,t}return a()(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.title,r=p({title:n});return i.createElement(m.a,{accessibilityRole:"region","aria-labelledby":this._listDomId},i.createElement(d.a,{accessibilityRole:"heading","aria-level":1,nativeID:this._listDomId,style:l.a.visuallyHidden},n),i.createElement(m.a,{accessibilityLabel:r},t))},t}(i.Component);t.a=f},6116:function(e,t,n){"use strict";n("IAdD"),t.__esModule=!0,t.default=void 0;var r=o(n("7DT3")),a=o(n("ERkP")),i=o(n("OkZJ"));function o(e){return e&&e.__esModule?e:{default:e}}var c=function(e){return void 0===e&&(e={}),(0,r.default)("svg",Object.assign({},e,{style:[i.default.root,e.style],viewBox:"0 0 24 24"}),a.default.createElement("g",null,a.default.createElement("path",{d:"M22.238 2.257c-.293-.293-.768-.293-1.06 0L2.52 20.917c-.293.292-.293.767 0 1.06.146.146.338.22.53.22s.384-.073.53-.22l18.658-18.66c.293-.293.293-.767 0-1.06zM2.986 17.82c.155 0 .312-.048.446-.148.112-.083 2.752-2.104 2.708-7.248-.02-2.16.643-3.98 1.913-5.266 1.093-1.107 2.577-1.72 4.18-1.727 1.325.006 2.562.42 3.578 1.195.137.104.297.153.455.153.227 0 .45-.102.598-.295.25-.33.188-.8-.142-1.052-1.278-.975-2.828-1.493-4.483-1.5h-.003c-2.008.008-3.87.78-5.248 2.173-1.536 1.551-2.368 3.8-2.348 6.332.037 4.33-2.02 5.967-2.103 6.03-.332.247-.4.718-.154 1.05.147.2.374.303.603.303zm16.844-7.382c.002-.246-.003-.487-.017-.723-.024-.414-.387-.74-.792-.706-.413.023-.728.378-.705.79.012.205.017.413.015.624-.024 2.868.785 4.765 1.526 5.896h-8.314c-.414 0-.75.336-.75.75s.336.75.75.75h3.522c-.1 1.48-1.323 2.66-2.828 2.66-1.003 0-1.913-.514-2.436-1.372-.214-.354-.675-.467-1.03-.25-.354.214-.467.675-.25 1.03.795 1.31 2.185 2.09 3.716 2.09 2.332 0 4.227-1.85 4.328-4.158h4.922c.32 0 .604-.206.707-.51.104-.305 0-.643-.255-.84-.087-.066-2.145-1.7-2.108-6.032z"})))};c.metadata={height:24,width:24};var l=c;t.default=l},BUB3:function(e,t,n){"use strict";n("IAdD");var r=n("LdEA"),a=n.n(r),i=n("ERkP"),o=n("sNn6"),c=n("rHpw"),l=n("3xO4"),s=n.n(l),d=c.a.create((function(e){return{activeRoot:{backgroundColor:e.colors.faintGray},overlay:Object.assign({},c.a.absoluteFillObject,{borderRightStyle:"solid",borderRightWidth:e.borderWidths.medium,borderRightColor:e.colors.primary,zIndex:1})}}));t.a=function(e){var t=e.children,n=a()(e,["children"]);return i.createElement(o.a,n,(function(e){return i.createElement(s.a,{style:[e&&d.activeRoot]},"function"==typeof t?t(e):t,e?i.createElement(s.a,{pointerEvents:"none",style:d.overlay}):null)}))}},NzXb:function(e,t,n){"use strict";n("IAdD"),t.__esModule=!0,t.default=void 0;var r=o(n("7DT3")),a=o(n("ERkP")),i=o(n("OkZJ"));function o(e){return e&&e.__esModule?e:{default:e}}var c=function(e){return void 0===e&&(e={}),(0,r.default)("svg",Object.assign({},e,{style:[i.default.root,e.style],viewBox:"0 0 24 24"}),a.default.createElement("g",null,a.default.createElement("path",{d:"M12 19.344l-8.72-8.72c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06l9.25 9.25c.292.294.767.294 1.06 0l9.25-9.25c.146-.145.22-.337.22-.53s-.073-.383-.22-.53c-.293-.292-.768-.292-1.06 0L12 19.344z"}),a.default.createElement("path",{d:"M12 11.535l-8.72-8.72c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06l9.25 9.25c.292.294.767.294 1.06 0l9.25-9.25c.146-.145.22-.337.22-.53s-.073-.383-.22-.53c-.293-.292-.768-.292-1.06 0L12 11.535z"})))};c.metadata={height:24,width:24};var l=c;t.default=l},TEoO:function(e,t,n){"use strict";var r=n("LdEA"),a=n.n(r),i=n("ERkP"),o=n("5UID"),c=n("3GUV"),l=n("iBK2"),s=i.createElement(c.a,null),d=function(e){var t=e.accessibilityTitle,n=a()(e,["accessibilityTitle"]),r=i.createElement(l.b,n);return t?i.createElement(o.a,{title:t},r):r};d.defaultProps={footer:s},t.a=d},fuhe:function(e,t,n){"use strict";n.r(t),n.d(t,"DMDrawer",(function(){return et}));n("2G9S"),n("3voH");var r=n("97Jx"),a=n.n(r),i=n("1Pcy"),o=n.n(i),c=n("W/Kd"),l=n.n(c),s=n("KEM+"),d=n.n(s),u=n("ERkP"),m=n("ZUOq"),p=n("MMRb"),h=n("rxPX"),f=n("0KEI"),g=n("RqPI"),b=Object(h.a)().propsFromState((function(){return{conversations:p.selectConversations,drawerExperimentEnabled:p.selectDrawerExperimentEnabled,perspective:g.g,poppedOutConversationId:p.selectPoppedOutConversationId,visibility:p.selectDrawerVisibility}})).propsFromActions((function(){return{createLocalApiErrorHandler:Object(f.d)("DIRECT_MESSAGES_CONVERSATION"),fetchInboxIfNeeded:p.fetchInboxIfNeeded,loadDrawerExperimentFromPersistence:p.loadDrawerExperimentFromPersistence,loadDrawerVisibilityFromPersistence:p.loadDrawerVisibilityFromPersistence,setDrawerVisibility:p.setDrawerVisibility}})),E=(n("z84I"),n("lTEL"),n("IAdD"),n("7x/C"),n("kYxP"),n("VnFT")),v=n("1YZw"),_=n("hqKg"),y=n("Myq3"),I=n("AQOc"),C=n("UhuB"),w=n("G6rE"),x=n("P1r1"),O=function(e,t){return t.conversationId},S=Object(_.createSelector)((function(e,t){return p.selectEntriesForConversation(e,O(0,t))}),g.g,(function(e,t){return t?function(e,t){var n=Object(y.a)(e,(function(e){return!!e.message_data&&(e.message_data&&e.message_data.recipient_id===t)}));return n&&n.message_data&&n.message_data.quick_reply&&n.message_data.quick_reply&&"options"===n.message_data.quick_reply.type?n.message_data.quick_reply:void 0}(e,t):void 0})),D=function(e){return function(t){return E.c(e,t)}},M=function(e){return function(t,n){return E.a(e,t,n)}},N={conversation:function(e,t){return p.selectConversation(e,O(0,t))},entries:p.selectEntries,perspective:g.g,users:w.e.selectAll,dataSaverMode:x.j,dtabBarInfo:x.l,quickReplyOptions:S,visibility:p.selectDrawerVisibility,isUnread:function(e,t){return!p.selectConversationIsRead(e,O(0,t))},isDmReceiptSettingEnabled:C.j},T={draftText:function(e,t){return E.m(e,O(0,t))},gifMetadata:function(e,t){return E.h(e,O(0,t))},isUploading:function(e,t){return E.j(e,O(0,t))},media:function(e,t){return E.i(e,O(0,t))},mediaMetadata:function(e,t){return E.k(e,O(0,t))},mediaUploadProgress:function(e,t){return E.l(e,O(0,t))}},H=Object(h.a)().propsFromState((function(){return Object.assign({},N,T)})).adjustStateProps((function(e){var t=e.conversation,n=e.entries,r=e.perspective,a=e.users,i=e.dataSaverMode,o=e.draftText,c=e.dtabBarInfo,l=e.gifMetadata,s=e.isDmReceiptSettingEnabled,d=e.isUploading,u=e.isUnread,m=e.media,p=e.mediaMetadata,h=e.mediaUploadProgress,f=e.quickReplyOptions,g=e.visibility,b=null==t?void 0:t.data;return{conversation:b&&Object(I.a)(b,n,a),perspective:r,dataSaverMode:i,draftText:o,dtabBarInfo:c,gifMetadata:l,isDmReceiptSettingEnabled:s,isUploading:d,isUnread:u,media:m,mediaMetadata:p,mediaUploadProgress:h,quickReplyOptions:f,visibility:g}})).propsFromActions((function(e){var t=e.conversationId;return{addMedia:M(t),addToast:v.b,createLocalApiErrorHandler:Object(f.d)("DIRECT_MESSAGES_CONVERSATION"),fetchConversationHistory:p.fetchConversationHistory,removeMedia:D(t),saveText:E.f,sendMessage:E.n,updateConversationReadState:p.updateConversationReadState,updateTyping:p.updateTyping,fetchUpdatesIfNeeded:p.fetchUpdatesIfNeeded}})).withAnalytics({page:"messages",section:"thread_drawer"}),P=n("aWyx"),A=n("qz2E"),R=(n("uB9N"),n("Oi4X")),k=n("OhSZ"),F=(n("uFXj"),n("zh9S")),L=Object(h.a)().propsFromState((function(){return{visibility:p.selectDrawerVisibility}})).propsFromActions((function(){return{scribeAction:F.c,popOutConversation:p.popOutConversation,setDrawerVisibility:p.setDrawerVisibility}})),j=n("xPna"),U=n("wrlS"),B=n("3XMw"),G=n.n(B),V=n("17Sk"),W=n.n(V),$=n("Fyww"),z=n.n($),q=n("l2F/"),K=n.n(q),X=n("1sB9"),Q=n.n(X),J=n("NzXb"),Y=n.n(J),Z=n("3Rb5"),ee=n.n(Z),te=n("OrGc"),ne=n("hACr"),re=n("3xO4"),ae=n.n(re),ie=n("/yvb"),oe=n("t62R"),ce=n("xKuM"),le=n("rHpw"),se=G.a.a2f8105f,de=G.a.e839db39,ue=G.a.d227d19e,me=G.a.c64c1883,pe=G.a.j7d0e835,he=G.a.b08821f3,fe=G.a.e736990a,ge=function(e){function t(t){var n;return n=e.call(this,t)||this,d()(o()(n),"_headerBar",u.createRef()),d()(o()(n),"_isExpanded",(function(){return n.props.visibility===j.a.EXPANDED})),d()(o()(n),"_renderLeftControl",(function(){return u.createElement(ie.a,{accessibilityLabel:he,icon:u.createElement(W.a,null),onPress:n._handleUnpopConvo,type:"text"})})),d()(o()(n),"_renderRightControl",(function(){var e=n.props,t=e.conversationTitle,r=e.isHighlighted,a=e.hasNewMessages,i=n._isExpanded(),o=r&&a?"invertedText":"text";return u.createElement(ae.a,{role:"complementary",style:be.rightControls},t?null:u.createElement(ie.a,{accessibilityLabel:me,icon:u.createElement(Q.a,null),onPress:n._handleNewMessage,type:o}),i?u.createElement(ie.a,{accessibilityLabel:ue,icon:u.createElement(Y.a,null),onPress:n._handleToggleVisibility,type:o}):u.createElement(ie.a,{accessibilityLabel:pe,icon:u.createElement(ee.a,null),onPress:n._handleToggleVisibility,type:o}),n._showDMQuickAccessWithClose?u.createElement(ie.a,{accessibilityLabel:de,icon:u.createElement(K.a,null),onPress:n._handleClose,type:o}):null)})),d()(o()(n),"_handleUnpopConvo",(function(){(0,n.props.popOutConversation)(null)})),d()(o()(n),"_handleToggleVisibility",(function(){var e=n.props,t=e.scribeAction,r=e.scribeNamespace,a=e.setDrawerVisibility,i=e.onDrawerOpen,o=n._isExpanded()?j.a.COLLAPSED:j.a.EXPANDED;o===j.a.COLLAPSED?t(Object.assign({},r,{action:"collapse"})):o===j.a.EXPANDED&&(t(Object.assign({},r,{action:"expand"})),i&&i()),a(o)})),d()(o()(n),"_handleToggleVisibilityKeyboard",(function(){n._handleToggleVisibility(),n._headerBar&&n._headerBar.current&&n._headerBar.current.focus()})),d()(o()(n),"_handleClose",(function(){var e=n.props,t=e.scribeAction,r=e.scribeNamespace,a=e.setDrawerVisibility;t(Object.assign({},r,{action:"close"})),a(j.a.CLOSED)})),d()(o()(n),"_handleNewMessage",(function(){var e=n.props,t=e.history,r=e.scribeAction,a=e.scribeNamespace;r(Object.assign({},a,{section:"compose_drawer",component:"dm",action:"show"})),t.push({pathname:"/messages/compose",state:{source:"drawer"}})})),d()(o()(n),"_renderTitle",(function(){var e=n.props,t=e.conversationTitle,r=e.hasNewMessages,a=e.isHighlighted,i=t||u.createElement(oe.c,null,se);return u.createElement(ae.a,{style:be.titleContainer},u.createElement(ae.a,{style:[be.titleTextRoot,a&&r?be.titleTextHighlighted:null]},i),r?u.createElement(ae.a,{style:be.newMessageDotContainer},u.createElement(z.a,{accessibilityLabel:fe,style:[be.newMessageDotRoot,a?be.newMessageDotHighlighted:be.newMessageDotRegular]})):null)})),n._showDMQuickAccessWithClose=U.a.isTrue("responsive_web_dm_quick_access_with_close_enabled"),n}l()(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=this.props,n=t.hasNewMessages,r=t.isHighlighted,a=t.triggerHighlight;e.isHighlighted||r||e.hasNewMessages||!n||a&&a()},n.render=function(){var e,t=this.props,n=t.conversationTitle,r=t.conversationSubtitle,a=t.hasNewMessages,i=t.isHighlighted,o=a?i?[be.headerHighlighted]:[be.headerActive]:[],c=this._isExpanded();return u.createElement(ne.a,{enabled:!0,handlers:(e={},e[te.d.toggleDMDrawer]=this._handleToggleVisibilityKeyboard,e)},u.createElement(ae.a,{ref:this._headerBar,style:[be.headerRoot,!c&&be.headerBorderClosed].concat(o,[be.cursor,{zIndex:1}])},u.createElement(ce.a,{leftControl:n&&this._isExpanded()?this._renderLeftControl():null,onMiddleControlClick:this._handleToggleVisibility,rightControl:this._renderRightControl(),subtitle:r,title:this._renderTitle(),withBackground:!1})))},t}(u.Component),be=le.a.create((function(e){return{root:{alignSelf:"flex-end",backgroundColor:e.colors.navigationBackground,borderColor:e.colors.borderColor,borderWidth:e.borderWidths.small,marginRight:e.spaces.medium,width:m.a.columnWidths.secondary.normal},cursor:{cursor:"pointer"},expanded:{height:m.a.columnWidths.secondary.normal},headerRoot:{borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,borderColor:e.colors.borderColor,borderTopLeftRadius:e.borderRadii.large,borderTopRightRadius:e.borderRadii.large,transition:"all 0.3s ease"},headerBorderClosed:{borderColor:e.colors.navigationBackground},headerActive:{backgroundColor:e.colors.unreadCellBackground},headerHighlighted:{borderColor:e.colors.primary,backgroundColor:e.colors.primary},titleContainer:{alignItems:"center",display:"flex",flexDirection:"row",flexGrow:1},titleTextRoot:{flexGrow:1,flexShrink:1},titleTextHighlighted:{color:e.colors.white},newMessageDotContainer:{flexGrow:1},newMessageDotRoot:{width:e.spaces.xSmall,height:e.spaces.xSmall,marginLeft:e.spaces.xxSmall},newMessageDotRegular:{color:e.colors.primary},newMessageDotHighlighted:{color:e.colors.white},rightControls:{flexDirection:"row"}}})),Ee=L(ge),ve=n("aWzz"),_e=n("XnpN"),ye=(n("JtPf"),n("zb92")),Ie=Object(ye.a)({loader:function(){return Promise.all([n.e(9),n.e(169)]).then(n.bind(null,"Z+oW"))},renderPlaceholder:function(){return null}}),Ce=n("GSsg"),we=n("aITJ"),xe=n("yrzJ"),Oe=function(e){function t(t){var n;return n=e.call(this,t)||this,d()(o()(n),"_composer",u.createRef()),d()(o()(n),"_renderConversation",(function(e,t){var r=n.props,a=r.conversationId,i=r.history,o=r.location;return u.createElement(R.a,{conversationId:a,history:i,isWide:!1,location:o,richTextInputContext:e,typeaheadWrapper:t})})),d()(o()(n),"_isExpanded",(function(){return n.props.visibility===j.a.EXPANDED})),d()(o()(n),"_fetchUpdatesIfNeeded",(function(){var e=n.props,t=e.conversationId,r=e.createLocalApiErrorHandler;(0,e.fetchUpdatesIfNeeded)(e.isDmReceiptSettingEnabled?{active_conversation_id:t,dm_users:!0}:{}).catch(r())})),Object(A.a)(),n}l()(t,e);var n=t.prototype;return n.componentDidMount=function(){this._updatePolling()},n.componentDidUpdate=function(e){e.visibility!==this.props.visibility&&this._updatePolling()},n.render=function(){var e=this,t=this.props,n=t.analytics,r=t.conversation,a=t.perspective,i=t.history,o=t.isUnread,c=t.isHeaderHighlighted,l=t.onDrawerOpen,s=t.triggerHeaderHighlight,d=this._isExpanded(),m=c?"white":"normal",p=c?"white":"deepGray",h=r&&r.type===P.a.ONE_TO_ONE&&a&&Object(_e.a)(r,a).map((function(e){return e.user.screen_name})),f=h?u.createElement(xe.a,{color:p,screenName:h[0]}):void 0;return u.createElement(ae.a,{style:d&&Se.expanded},u.createElement(Ee,{conversationSubtitle:f,conversationTitle:u.createElement(k.b,{conversation:r,perspective:a,textColor:m,withScreenName:!1}),hasNewMessages:o,history:i,isHighlighted:c,onDrawerOpen:l,scribeNamespace:n.contextualScribeNamespace,triggerHighlight:s}),d?we.a.isDesktopOS()?u.createElement(Ie,null,(function(t){var n=t.richTextInputContext,r=t.typeaheadWrapper;return e._renderConversation(n,r)})):this._renderConversation():null)},n._updatePolling=function(){this._pollingTimer&&this._pollingTimer.stop(),this.props.visibility===j.a.COLLAPSED&&(this._pollingTimer=new Ce.a(this._fetchUpdatesIfNeeded,{interval:3e3}),this._pollingTimer.start())},n.getChildContext=function(){return{getCustomLocation:null}},t}(u.Component);d()(Oe,"childContextTypes",{getCustomLocation:ve.func});var Se=le.a.create((function(e){return{root:{backgroundColor:e.colors.blue},expanded:{maxHeight:m.a.dmDrawerHeight.expanded,height:"80vh"}}})),De=H(Oe),Me=(n("i4UL"),n("LW0h"),n("tQbP"),n("1IsZ"),n("4q8G")),Ne=n("kGix"),Te=n("tn7R"),He=n("l0YN"),Pe=Object(h.a)().propsFromState((function(){return{fetchStatus:p.selectFetchStatus,conversations:p.selectConversations,isLoadingTop:p.selectIsLoadingTop,settings:x.f,unreadCount:He.a,untrustedConversationCount:p.selectUntrustedConversationCount,untrustedUnreadCount:p.selectUntrustedUnreadCount,visibility:p.selectDrawerVisibility}})).adjustStateProps((function(e){var t=e.fetchStatus,n=e.conversations,r=e.isLoadingTop,a=e.settings,i=e.unreadCount,o=e.untrustedConversationCount,c=e.untrustedUnreadCount,l=e.visibility,s=!!Object.values(n).length,d=Object(Te.a)(n).filter((function(e){var t;return!e.isDeleted&&(null===(t=e.data)||void 0===t?void 0:t.trusted)})).map((function(e){return e.data})).sort(Me.a),u=i>0;return{allowUntrustedInbox:"all"===a.allow_dms_from||o>0,conversationIds:d.map((function(e){return e.conversation_id})),fetchStatus:s?Ne.a.LOADED:t,isRefreshing:s&&r,isUnread:u,untrustedUnreadCount:c,visibility:l}})).propsFromActions((function(){return{scribeAction:F.c,createLocalApiErrorHandler:Object(f.d)("DIRECT_MESSAGES_INBOX"),fetchInbox:p.fetchInbox,fetchInboxHistory:p.fetchTrustedInboxHistory,fetchInboxIfNeeded:p.fetchInboxIfNeeded,fetchUpdates:p.fetchUpdatesIfNeeded,googleAnalyticsPageView:F.a,scribePageImpression:F.d,updateLastSeenEventId:p.updateTrustedLastSeenEventId,popOutConversation:p.popOutConversation}})).withAnalytics({page:"messages",section:"inbox_drawer"}),Ae=n("qS4/"),Re=n("yw4N"),ke=n("FIs5"),Fe=n("csss"),Le=n("Znyr"),je=G.a.a2f8105f,Ue=G.a.b8aa3744,Be=G.a.j06309e1,Ge=G.a.gee5150a,Ve=G.a.cf2d1047,We=G.a.da2f9224,$e=G.a.h6beb5fa,ze=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,d()(o()(t),"_renderExpandedInbox",(function(){var e=t.props,n=e.analytics,r=e.conversationIds,a=e.createLocalApiErrorHandler,i=e.fetchInbox,o=e.fetchInboxHistory,c=e.fetchInboxIfNeeded,l=e.fetchStatus,s=e.fetchUpdates,d=e.googleAnalyticsPageView,m=e.scribePageImpression,p=e.isRefreshing,h=e.scribeAction,f=e.updateLastSeenEventId;return u.createElement(ae.a,{style:qe.fill},u.createElement(Re.a,{style:qe.viewportView},u.createElement(Ae.a,{accessibilityTitle:je,conversationIds:r,conversationPathPrefix:"/messages",createLocalApiErrorHandler:a,customCellClick:t._dmDrawerOnClick,fetchInbox:i,fetchInboxHistory:o,fetchInboxIfNeeded:c,fetchStatus:l,fetchUpdates:s,googleAnalyticsPageView:d,isRefreshing:p,renderEmptyDMInbox:t._renderEmptyDMInbox,renderStickyContent:t._renderPivot,scribeAction:h,scribeNamespace:n.contextualScribeNamespace,scribePageImpression:m,updateLastSeenEventId:f,virtualScrollerCacheKey:"dmDrawerInbox"})))})),d()(o()(t),"_renderEmptyDMInbox",(function(){return u.createElement(ke.a,{buttonLink:"/messages/compose",buttonText:Ge,header:Ue,message:Be,onImpression:t._handleEmptyDMInboxImpression})})),d()(o()(t),"_isExpanded",(function(){return t.props.visibility===j.a.EXPANDED})),d()(o()(t),"_dmDrawerOnClick",(function(e,n){(0,t.props.popOutConversation)(n),e.preventDefault()})),d()(o()(t),"_handleEmptyDMInboxImpression",(function(){var e=t.props,n=e.scribeAction,r=e.analytics;n(Object.assign({},r.contextualScribeNamespace,{component:"empty_message",action:"impression"}))})),d()(o()(t),"_handleRequestsPivotClick",(function(){var e=t.props,n=e.scribeAction,r=e.analytics;n(Object.assign({},r.contextualScribeNamespace,{element:"requests_pivot",action:"click"}))})),d()(o()(t),"_renderPivot",(function(){return t.props.allowUntrustedInbox?u.createElement(ae.a,{style:qe.requestPivotContainer},u.createElement(Fe.a,{label:Ve,link:"/messages/requests",onPress:t._handleRequestsPivotClick,renderRightContent:t._renderPivotBadge,withBottomBorder:!1})):null})),d()(o()(t),"_renderPivotBadge",(function(){var e=t.props.untrustedUnreadCount;return e>0?u.createElement(Le.a,{count:e,standalone:!0,truncatedCountFormatter:$e,unreadCountLabel:We}):null})),t}l()(t,e);var n=t.prototype;return n.componentDidUpdate=function(){this._isExpanded()&&Object(A.a)()},n.render=function(){var e=this.props,t=e.analytics,n=e.history,r=e.isUnread,a=e.isHeaderHighlighted,i=e.onDrawerOpen,o=e.triggerHeaderHighlight,c=this._isExpanded();return u.createElement(ae.a,{style:c&&qe.expanded},u.createElement(Ee,{hasNewMessages:r,history:n,isHighlighted:a,onDrawerOpen:i,scribeNamespace:t.contextualScribeNamespace,triggerHighlight:o}),c&&this._renderExpandedInbox())},t}(u.Component),qe=le.a.create((function(e){return{expanded:{maxHeight:m.a.dmDrawerHeight.expanded,height:"80vh"},fill:{flex:1,alignSelf:"stretch"},requestPivotContainer:{backgroundColor:e.colors.cellBackground,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,borderBottomColor:e.colors.borderColor,zIndex:2},viewportView:Object.assign({},le.a.absoluteFillObject,{overflowY:"auto"})}})),Ke=Pe(ze),Xe=n("YeIG"),Qe="DMDrawer",Je=n("TnY3"),Ye=n("0FVZ"),Ze=n("Oe3h"),et=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,d()(o()(t),"state",{isHeaderHighlighted:!1,hasStartedInitialFetch:!1}),d()(o()(t),"_showDMDrawer",(function(){var e=t.props,n=e.conversations,r=e.location.pathname,a=e.visibility,i="/logout"===r,o="/messages"===r||r.startsWith("/messages/"),c=a===j.a.CLOSED;return!(i||o||t._isOnOcfFlow()||Object(Xe.a)(n)||c)})),d()(o()(t),"_isExpanded",(function(){return t.props.visibility===j.a.EXPANDED})),d()(o()(t),"_triggerHeaderHighlight",(function(){var e=t.state.isHeaderHighlighted;t._isExpanded()||e||t._headerHighlightTimeoutId||(t.setState({isHeaderHighlighted:!0}),t._headerHighlightTimeoutId=setTimeout((function(){t.setState({isHeaderHighlighted:!1}),t._headerHighlightTimeoutId=void 0}),3e3))})),d()(o()(t),"_handleDrawerOpen",(function(){t.state.isHeaderHighlighted&&(t.setState({isHeaderHighlighted:!1}),clearTimeout(t._headerHighlightTimeoutId),t._headerHighlightTimeoutId=void 0)})),d()(o()(t),"_isOnOcfFlow",(function(){return t.props.location.pathname.startsWith("/i/flow")})),t}l()(t,e);var n=t.prototype;return n.componentWillUnmount=function(){clearTimeout(this._headerHighlightTimeoutId)},n.componentDidUpdate=function(){this._loadInboxDataIfNeeded()},n.componentDidMount=function(){this._loadInboxDataIfNeeded()},n.render=function(){var e=this,t=this.props,n=t.history,r=t.location,i=t.perspective,o=t.poppedOutConversationId,c=this.state.isHeaderHighlighted;return this._showDMDrawer()?u.createElement(Ye.a.Drawer,null,u.createElement(Ze.a,null,(function(t,l){return u.createElement(ae.a,a()({ref:t()},l({style:[tt.root],testID:Qe})),o?u.createElement(De,{conversationId:o,history:n,isHeaderHighlighted:c,location:r,onDrawerOpen:e._handleDrawerOpen,perspective:i,triggerHeaderHighlight:e._triggerHeaderHighlight}):u.createElement(Ke,{history:n,isHeaderHighlighted:c,onDrawerOpen:e._handleDrawerOpen,triggerHeaderHighlight:e._triggerHeaderHighlight}))}))):null},n._loadInboxDataIfNeeded=function(){var e=this.props,t=e.fetchInboxIfNeeded,n=e.createLocalApiErrorHandler,r=e.loadDrawerExperimentFromPersistence,a=e.loadDrawerVisibilityFromPersistence,i=this.state.hasStartedInitialFetch;this._isOnOcfFlow()||i||(a(),r(),t().catch(n()),this.setState({hasStartedInitialFetch:!0}))},t}(u.PureComponent),tt=le.a.create((function(e){return{root:{alignSelf:"flex-end",backgroundColor:e.colors.navigationBackground,borderTopLeftRadius:e.borderRadii.large,borderTopRightRadius:e.borderRadii.large,boxShadow:e.boxShadows.medium,marginRight:e.spaces.medium,width:m.a.dmDrawerWidth.default,minWidth:m.a.dmDrawerWidth.min,maxWidth:m.a.dmDrawerWidth.max}}})),nt=b(et);t.default=Object(Je.a)(nt)},"qS4/":function(e,t,n){"use strict";n("vrRf"),n("5BYb"),n("ho0z"),n("IAdD"),n("+KXO");var r=n("1Pcy"),a=n.n(r),i=n("W/Kd"),o=n.n(i),c=n("KEM+"),l=n.n(c),s=n("ERkP"),d=n("BUB3"),u=n("s14A"),m=(n("2G9S"),n("LW0h"),n("jQ3i"),n("lTEL"),n("z84I"),n("6U7i"),n("7x/C"),n("x4t0"),n("hBvt"),n("uFXj"),n("kYxP"),n("MMRb")),p=n("0KEI"),h=n("hqKg"),f=n("AQOc"),g=n("G6rE"),b=n("oEGd"),E=function(e,t){return t.conversationId},v=Object(h.createSelector)(E,(function(e,t){return m.selectConversation(e,E(0,t))}),m.selectEntries,g.e.selectAll,(function(e,t){return!m.selectConversationIsRead(e,E(0,t))}),(function(e,t,n,r,a){return{conversation:t&&Object(f.a)(t.data,n,r),conversationId:e,unread:a}})),_={createLocalApiErrorHandler:Object(p.d)("DIRECT_MESSAGES_INBOX_ITEM"),leaveConversation:m.leaveConversation},y=Object(b.g)(v,_),I=n("aA19"),C=n("OhSZ"),w=n("t62R"),x=n("g54k"),O=Object(h.createSelector)(g.e.selectAll,(function(e,t){return t.entry}),x.b),S=Object(b.c)(O),D=n("zQEV"),M=(n("AxOO"),n("aWzz"),S((function(e){var t=e.entry,n=e.entryType,r=e.perspective,a=e.users,i=Object(D.a)(t,n,r,a);return s.createElement(w.c,{color:"deepGray"},i)}))),N=Object(h.createSelector)((function(e,t){return g.e.select(e,t.senderId)}),(function(e,t){return t.recipientId?g.e.select(e,t.recipientId):void 0}),(function(e,t){return{user:e,recipient:t}})),T=Object(b.c)(N),H=n("cTG8"),P=n("3XMw"),A=n.n(P),R=function(e){return s.createElement(A.a.I18NFormatMessage,{$i18n:"b3a2b11c"},s.createElement(w.c,null,e))},k=A.a.a876e58b,F=A.a.bf584cd1,L=A.a.a9cc8cfd,j=A.a.e20b65b0,U=A.a.e5bfe07d,B=A.a.b1a614fe,G=T((function(e){var t=e.entry,n=e.perspective,r=e.isGroupDM,a=e.user,i=void 0===a?{}:a,o=e.recipient,c=void 0===o?{}:o,l=t&&t.message_data;if(!l)return null;var d=l.attachment,u=void 0===d?{}:d,m=!!(u.video||u.photo||u.animated_gif||u.tweet||u.fleet||u.sticker||u.card),p=n===i.id_str,h=!(!m||!p)||!(!r||p),f=i.name,g=c.name,b=[h&&s.createElement(w.c,{key:"senderName"},R(f)," "),l&&l.text&&s.createElement(H.a,{displayTextRange:[0,l.text.length],entities:l.entities,key:"message",text:l.text,withMediaLinks:!0})];return u.tweet?b=h?function(e,t){return e?s.createElement(w.c,null,A.a.d5b762c8):s.createElement(A.a.I18NFormatMessage,{$i18n:"dfd2b3b9"},s.createElement(w.c,null,t))}(p,f):B:u.fleet?b=function(e,t,n){return e?s.createElement(A.a.I18NFormatMessage,{$i18n:"cc66adbd"},s.createElement(w.c,null,t),s.createElement(w.c,null,n||"")):s.createElement(A.a.I18NFormatMessage,{$i18n:"b35cee40"},s.createElement(w.c,null,n||""))}(p,g,l.text):u.video?b=h?function(e,t){return e?s.createElement(w.c,null,A.a.j7d81019):s.createElement(A.a.I18NFormatMessage,{$i18n:"eee2f120"},s.createElement(w.c,null,t))}(p,f):k:u.photo?b=h?function(e,t){return e?s.createElement(w.c,null,A.a.f80629ba):s.createElement(A.a.I18NFormatMessage,{$i18n:"c1e1f848"},s.createElement(w.c,null,t))}(p,f):F:u.animated_gif?b=h?function(e,t){return e?s.createElement(w.c,null,A.a.eb3d722e):s.createElement(A.a.I18NFormatMessage,{$i18n:"dc4b75a1"},s.createElement(w.c,null,t))}(p,f):L:u.sticker?b=h?function(e,t){return e?s.createElement(w.c,null,A.a.d30c2d4f):s.createElement(A.a.I18NFormatMessage,{$i18n:"c7e2464e"},s.createElement(w.c,null,t))}(p,f):j:u.card&&(b=h?function(e,t){return e?s.createElement(w.c,null,A.a.db53c017):s.createElement(A.a.I18NFormatMessage,{$i18n:"hcbbbb34"},s.createElement(w.c,null,t))}(p,f):U),s.createElement(w.c,{color:"deepGray",numberOfLines:1},b)})),V=n("uKEd"),W=function(e,t){return t.senderId?g.e.select(e,t.senderId):void 0},$=function(e,t){return Object(V.n)(e,t.reactionEntry.message_id)},z=function(e,t){var n=$(e,t);return n&&n.message_data&&g.e.select(e,n.message_data.sender_id)},q=Object(b.e)((function(){return Object(h.createSelector)(W,$,z,(function(e,t,n){return{reactedMessageEntry:t,reactingUser:e,messageUser:n}}))}),{}),K=n("33Kz"),X=q((function(e){var t,n=e.isGroupDM,r=e.messageUser,a=e.perspective,i=e.reactionEntry,o=e.reactedMessageEntry,c=e.reactingUser,l=o&&o.message_data,d=l&&l.attachment,u=l&&l.text,m=r&&r.screen_name,p=a===(c&&c.id_str),h=c&&c.name,f=Object(K.b)(i.reaction_key||"");return t=d&&d.tweet?n?function(e,t,n,r){return e?s.createElement(A.a.I18NFormatMessage,{$i18n:"d23578d2"},s.createElement(w.c,null,n),s.createElement(w.c,null,r)):s.createElement(A.a.I18NFormatMessage,{$i18n:"bcf6e62b"},s.createElement(w.c,null,t),s.createElement(w.c,null,n),s.createElement(w.c,null,r))}(p,h,m,f):function(e,t,n){return e?s.createElement(A.a.I18NFormatMessage,{$i18n:"ca684bf5"},s.createElement(w.c,null,n)):s.createElement(A.a.I18NFormatMessage,{$i18n:"h5797be5"},s.createElement(w.c,null,t),s.createElement(w.c,null,n))}(p,h,f):d&&d.video?n?function(e,t,n,r){return e?s.createElement(A.a.I18NFormatMessage,{$i18n:"abcacd1d"},s.createElement(w.c,null,n),s.createElement(w.c,null,r)):s.createElement(A.a.I18NFormatMessage,{$i18n:"ef33625e"},s.createElement(w.c,null,t),s.createElement(w.c,null,n),s.createElement(w.c,null,r))}(p,h,m,f):function(e,t,n){return e?s.createElement(A.a.I18NFormatMessage,{$i18n:"ab1cdfe2"},s.createElement(w.c,null,n)):s.createElement(A.a.I18NFormatMessage,{$i18n:"f0cf1699"},s.createElement(w.c,null,t),s.createElement(w.c,null,n))}(p,h,f):d&&d.photo?n?function(e,t,n,r){return e?s.createElement(A.a.I18NFormatMessage,{$i18n:"g246cea8"},s.createElement(w.c,null,n),s.createElement(w.c,null,r)):s.createElement(A.a.I18NFormatMessage,{$i18n:"f5d11d9b"},s.createElement(w.c,null,t),s.createElement(w.c,null,n),s.createElement(w.c,null,r))}(p,h,m,f):function(e,t,n){return e?s.createElement(A.a.I18NFormatMessage,{$i18n:"jf27606a"},s.createElement(w.c,null,n)):s.createElement(A.a.I18NFormatMessage,{$i18n:"cd110359"},s.createElement(w.c,null,t),s.createElement(w.c,null,n))}(p,h,f):d&&d.animated_gif?n?function(e,t,n,r){return e?s.createElement(A.a.I18NFormatMessage,{$i18n:"cd78281d"},s.createElement(w.c,null,n),s.createElement(w.c,null,r)):s.createElement(A.a.I18NFormatMessage,{$i18n:"c35bdc44"},s.createElement(w.c,null,t),s.createElement(w.c,null,n),s.createElement(w.c,null,r))}(p,h,m,f):function(e,t,n){return e?s.createElement(A.a.I18NFormatMessage,{$i18n:"b2da1bf8"},s.createElement(w.c,null,n)):s.createElement(A.a.I18NFormatMessage,{$i18n:"g84c0421"},s.createElement(w.c,null,t),s.createElement(w.c,null,n))}(p,h,f):d&&d.card?n?function(e,t,n,r){return e?s.createElement(A.a.I18NFormatMessage,{$i18n:"d616a311"},s.createElement(w.c,null,n),s.createElement(w.c,null,r)):s.createElement(A.a.I18NFormatMessage,{$i18n:"f94203b2"},s.createElement(w.c,null,t),s.createElement(w.c,null,n),s.createElement(w.c,null,r))}(p,h,m,f):function(e,t,n){return e?s.createElement(A.a.I18NFormatMessage,{$i18n:"f9fb1cf6"},s.createElement(w.c,null,n)):s.createElement(A.a.I18NFormatMessage,{$i18n:"f2bf910e"},s.createElement(w.c,null,t),s.createElement(w.c,null,n))}(p,h,f):u?n?function(e,t,n,r,a){return e?s.createElement(A.a.I18NFormatMessage,{$i18n:"e8e333d8"},s.createElement(w.c,null,r),s.createElement(w.c,null,n),s.createElement(w.c,null,a)):s.createElement(A.a.I18NFormatMessage,{$i18n:"e1e9ab3e"},s.createElement(w.c,null,t),s.createElement(w.c,null,r),s.createElement(w.c,null,n),s.createElement(w.c,null,a))}(p,h,f,m,u):function(e,t,n,r){return e?s.createElement(A.a.I18NFormatMessage,{$i18n:"cec676f3"},s.createElement(w.c,null,n),s.createElement(w.c,null,r)):s.createElement(A.a.I18NFormatMessage,{$i18n:"a2706f9a"},s.createElement(w.c,null,t),s.createElement(w.c,null,n),s.createElement(w.c,null,r))}(p,h,f,u):function(e,t,n){return e?s.createElement(A.a.I18NFormatMessage,{$i18n:"d6b15bbf"},s.createElement(w.c,null,n)):s.createElement(A.a.I18NFormatMessage,{$i18n:"ac0d4bc7"},s.createElement(w.c,null,t),s.createElement(w.c,null,n))}(p,h,f),s.createElement(w.c,{color:"deepGray",numberOfLines:1},t)})),Q=n("H4nC"),J=n("b9JY"),Y=A.a.fb3ccb55,Z=function(e){var t=e.conversationType,n=e.entry,r=e.perspective;if(n.marked_as_spam)return s.createElement(w.c,{color:"deepGray",numberOfLines:1},Y);if(Object(J.b)(n)){var a=n.message_data,i=(a=void 0===a?{}:a).sender_id,o=a.recipient_id;return s.createElement(G,{entry:n,isGroupDM:t===m.CONVERSATION_TYPE.GROUP,perspective:r,recipientId:o,senderId:i})}return Object(J.c)(n)?s.createElement(X,{isGroupDM:t===m.CONVERSATION_TYPE.GROUP,perspective:r,reactionEntry:n,senderId:n.sender_id}):Object(J.a)(n)?s.createElement(M,{entry:n,entryType:n.type,perspective:r}):Object(J.d)(n)?s.createElement(Q.a,{entry:n,isCompact:!0}):null},ee=n("wrlS"),te=n("Myq3"),ne=n("6116"),re=n.n(ne),ae="conversation",ie=n("K2+g"),oe=n.n(ie),ce=n("3xO4"),le=n.n(ce),se=n("Irs7"),de=n("0PHd"),ue=n("/yvb"),me=n("eb3s"),pe=n("GBcw"),he=n("htQn"),fe=n("5mJL"),ge=n("rHpw"),be=n("aWyx"),Ee=A.a.gdf4b79f,ve=A.a.bbf83d83,_e=A.a.d96cf7cd,ye={component:"low_quality_timeline"},Ie=function(e){var t=e.children;return s.createElement(le.a,{style:we.socialProofContainer},t)},Ce=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,l()(a()(t),"_socialProofEnabled",ee.a.isTrue("responsive_web_dm_health_inbox_request_cell_social_proof_enabled")),l()(a()(t),"state",{showConfirmation:!1}),l()(a()(t),"_renderSocialProof",(function(e){var t=e.social_proof;if(!t||0===t.length)return null;var n=t[0];switch(n.proof_type){case be.d.MUTUAL_FRIENDS:if(0===n.total)return null;var r=n.users.map((function(e){return e.profile_image_url_https})),a=n.users.map((function(e){return e.name}));return s.createElement(Ie,null,s.createElement(de.a,{displayFacepileInline:!0,knownFollowersAvatarUrls:r,knownFollowersCount:n.total,knownFollowersNames:a}));default:return null}})),l()(a()(t),"_renderTrashcan",(function(){var e=t.props.conversationId;return s.createElement(s.Fragment,null,s.createElement(ue.a,{accessibilityLabel:_e,borderColor:"transparent",icon:s.createElement(oe.a,{style:we.trashcanIcon}),onPress:t._handleShowConfirmation,type:"destructiveText"}),t.state.showConfirmation?s.createElement(me.a,{confirmButtonLabel:_e,confirmButtonType:"destructive",headline:Ee,onCancel:t._handleHideConfirmation,onConfirm:t._deleteConversation(e),text:ve}):null)})),l()(a()(t),"_renderTimestamp",(function(){var e=t.props.conversation;return s.createElement(s.Fragment,null,s.createElement(le.a,null,e?s.createElement(pe.a,{timestamp:Number(e.sort_timestamp)}):null,(null==e?void 0:e.notifications_disabled)?s.createElement(re.a,{style:we.notificationsDisabledIcon}):null))})),l()(a()(t),"_deleteConversation",(function(e){return function(){var n=t.props,r=n.analytics,a=n.createLocalApiErrorHandler,i=n.leaveConversation;t._handleHideConfirmation(),r.scribe(Object.assign({},ye,{element:"thread",action:"delete_thread"})),i({conversationId:e}).catch(a({showToast:!0}))}})),l()(a()(t),"_handleHideConfirmation",(function(){t.setState({showConfirmation:!1})})),l()(a()(t),"_handleOnClick",(function(e){var n=t.props,r=n.conversationId;(0,n.onClick)(e,r)})),l()(a()(t),"_handleShowConfirmation",(function(e){var n=t.props.analytics;e.stopPropagation(),n.scribe(Object.assign({},ye,{element:"accessory_trashcan",action:"click"})),t.setState({showConfirmation:!0})})),t}o()(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(e,t){var n=this.props.conversation,r=null==n?void 0:n.conversation_id,a=null==n?void 0:n.last_read_event_id,i=null==n?void 0:n.sort_event_id,o=null==n?void 0:n.max_entry_id,c=e.conversation,l=null==c?void 0:c.conversation_id,s=null==c?void 0:c.last_read_event_id,d=null==c?void 0:c.sort_event_id,u=null==c?void 0:c.max_entry_id,m=this.props,p=m.filter,h=m.isActive,f=e.filter,g=e.isActive,b=this.state.showConfirmation,E=t.showConfirmation;return r!==l||a!==s||i!==d||o!==u||h!==g||b!==E||p!==f},n.render=function(){var e=this.props,t=e.conversation,n=e.filter,r=e.isActive,a=e.isTertiaryInbox,i=e.perspective,o=e.unread,c=e.link,l=(null==t?void 0:t.entries)||[],d=Object(te.a)(l,(function(e){return![be.b.MESSAGE_DELETE,be.b.REACTION_DELETE,be.b.MESSAGE_MARK_AS_SPAM,be.b.MESSAGE_MARK_AS_NOT_SPAM].includes(e.type)})),u=[we.root,we.bottomBorder,o&&we.unread];if(!t||!n(t))return null;var m=!t.trusted&&this._socialProofEnabled;return s.createElement(he.a,{accessibilityRole:"tab",accessibilityState:{selected:r},link:{pathname:c,anchorless:!0},onPress:this._handleOnClick,style:u,testID:ae},s.createElement(fe.a,{avatarCell:s.createElement(I.a,{conversation:t,perspective:i})},s.createElement(le.a,{style:we.bodyColumn},s.createElement(le.a,{style:we.titleContainer},s.createElement(C.b,{conversation:t,perspective:i}),s.createElement(le.a,{style:we.snippet},d?s.createElement(Z,{conversationType:t.type,entry:d,perspective:i}):null),m?this._renderSocialProof(t):null),a?this._renderTrashcan():this._renderTimestamp())))},t}(s.Component);l()(Ce,"defaultProps",{isActive:!1,filter:function(e){return!0},unread:!1});var we=ge.a.create((function(e){return{root:{backgroundColor:e.colors.cellBackground,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.small,width:"100%"},bottomBorder:{borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,borderBottomColor:e.colors.borderColor},bodyColumn:{flexDirection:"row"},titleContainer:{flex:1},notificationsDisabledIcon:{alignSelf:"flex-end",color:e.colors.deepGray,paddingTop:e.spaces.xxSmall},trashcanIcon:{color:e.colors.red},snippet:{maxHeight:e.spaces.xLarge,overflow:"hidden"},unread:{backgroundColor:e.colors.unreadCellBackground},socialProofContainer:{marginTop:e.spaces.xxSmall}}})),xe=Object(se.a)(y(Ce),{page:"messages",section:"inbox"}),Oe=n("dwig"),Se=n("v//M"),De=n("QB0K"),Me=n("1sB9"),Ne=n.n(Me),Te=n("FRNI"),He=A.a.dabdea6b,Pe=A.a.f325afc3,Ae=function(e){function t(){return e.apply(this,arguments)||this}return o()(t,e),t.prototype.render=function(){return s.createElement(De.a,{accessibilityLabel:He,href:"/messages/compose",icon:s.createElement(Ne.a,null),label:He,scribeComponent:"floating_dm_button",shortLabel:Pe,testID:Te.a.message})},t}(s.PureComponent),Re=n("Gzkc"),ke=n.n(Re),Fe=n("VPAj"),Le=n("IRWI"),je=Object.assign({},Le.a,{initialScrollHeadroom:Object(Fe.a)(0),scrollHeadroom:Object(Fe.a)(0),pinToTopWhenAtTop:!0}),Ue=n("TEoO"),Be=n("v6aA"),Ge=n("IG4P"),Ve=n("GSsg"),We=n("Kzn8"),$e=n.n(We),ze=n("6OUF"),qe=n("mw9i"),Ke=n("VY6S"),Xe=n("+d3d"),Qe=function(e){return e},Je=A.a.a66ac766,Ye=A.a.fe61929d,Ze=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,l()(a()(r),"state",{filterQuery:""}),l()(a()(r),"_render",(function(){var e=r.props,t=e.accessibilityTitle,n=e.conversationIds,a=e.footer,i=e.isRefreshing,o=e.renderEmptyDMInbox,c=e.renderStickyContent,l=e.virtualScrollerCacheKey;return s.createElement(s.Fragment,null,c?c():null,r._enableSearchInbox?s.createElement(le.a,{style:et.searchInput},s.createElement(ze.a,{Icon:ke.a,onChange:r._handleSearchChange,onClear:r._handleSearchClear,onFocus:r._handleSearchFocus,placeholder:Ye,withClearButton:!0})):null,s.createElement(u.a,null,s.createElement(Ge.a,{isRefreshing:i,onRefresh:r._handlePullToRefresh},l&&n?s.createElement(Ue.a,{accessibilityRole:"tablist",accessibilityTitle:t,anchoring:je,assumedItemHeight:100,cacheKey:l,footer:a,identityFunction:Qe,items:n,noItemsRenderer:o,onNearEnd:r._handleNearEnd,renderer:r._renderInboxItem(r.state.filterQuery)}):null)))})),l()(a()(r),"_handleNearEnd",(function(){r.state.filterQuery||r._handleHistoryRequest()})),l()(a()(r),"_handleSearchChangeInner",(function(e){var t=r.props,n=t.scribeAction,a=t.scribeNamespace;r.setState({filterQuery:e.toLowerCase()}),n(Object.assign({},a,{element:"thread",action:"search"}),{event_value:r.state.filterQuery.length})})),l()(a()(r),"_handleSearchChangeDebounced",Object(Ke.a)(r._handleSearchChangeInner,200)),l()(a()(r),"_handleSearchChange",(function(e){var t=e.currentTarget.value;return r._handleSearchChangeDebounced(t)})),l()(a()(r),"_handleSearchClear",(function(){return r._handleSearchChangeInner("")})),l()(a()(r),"_handleSearchFocus",(function(){r.props.conversationIds&&r.props.conversationIds.length<30&&r._handleHistoryRequest()})),l()(a()(r),"_renderInboxItem",(function(e){return function(t){var n=r.context.loggedInUserId,a=r.props,i=a.conversationPathPrefix,o=a.isTertiaryInbox,c=r._filterConversation(e),l=i+"/"+t;return s.createElement(d.a,{exact:!1,path:l},(function(e){return s.createElement(xe,{conversationId:t,filter:c,isActive:e,isTertiaryInbox:o,key:t,link:l,onClick:r._handleConversationClick,perspective:n})}))}})),l()(a()(r),"_filterConversation",(function(e){return function(e){var t=r.state.filterQuery;if(!t)return!0;var n=r.context.loggedInUserId,a=Object.keys(e.participants),i="GROUP_DM"===e.type&&e.name&&e.name.toLowerCase().indexOf(t)>-1,o=a.some((function(i){var o=e.participants[i],c=n===i,l=1===a.length&&c,s=o&&o.user&&!c;return!(!l&&!s)&&r._userMatchesQuery(o.user.screen_name,o.user.name,t)}));return!(!i&&!o)}})),l()(a()(r),"_handleFetchInitialWrapper",(function(){r._handleFetchInitial()})),l()(a()(r),"_handleFetchInitial",(function(){var e=r.props,t=e.createLocalApiErrorHandler,n=e.fetchInboxIfNeeded,a=e.fetchUpdates;return n().then(r._updateLastSeenEventId,t()).then((function(){r._updatePolling.start()})).then((function(){return a().catch(t())}))})),l()(a()(r),"_handleConversationClick",(function(e,t){var n=r.props,a=n.customCellClick,i=n.scribeAction,o=n.scribeNamespace;i(Object.assign({},o,{element:"thread",action:"click"}),{event_value:r.state.filterQuery.length}),a&&a(e,t)})),l()(a()(r),"_handleEmptyDMInboxImpression",(function(){var e=r.props,t=e.scribeAction,n=e.scribeNamespace;t(Object.assign({},n,{component:"empty_message",action:"impression"}))})),l()(a()(r),"_handlePullToRefresh",(function(){var e=r.props,t=e.createLocalApiErrorHandler;(0,e.fetchInbox)().then(r._updateLastSeenEventId,t())})),l()(a()(r),"_updateLastSeenEventIdIfActive",(function(){if("background"!==$e.a.currentState)return r._updateLastSeenEventId()})),l()(a()(r),"_updateLastSeenEventId",(function(){var e=r.props,t=e.createLocalApiErrorHandler;return(0,e.updateLastSeenEventId)().catch(t())})),r._fab=s.createElement(Ae,null),r._enableSearchInbox=!!t.withDmSearch&&ee.a.isTrue("responsive_web_search_dms_enabled"),r}o()(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this,t=this.props,n=t.createLocalApiErrorHandler,r=t.fetchInboxHistory,a=t.fetchUpdates,i=t.googleAnalyticsPageView,o=t.scribeNamespace;return(0,t.scribePageImpression)(o),i(o),this._updatePolling=new Ve.a((function(){a().then(e._updateLastSeenEventIdIfActive,n())}),{interval:8e3}),this._handleHistoryRequest=Object(Xe.a)((function(){r.apply(void 0,arguments).catch(n())}),1e3),this._handleFetchInitial()},n.componentWillUnmount=function(){this._updatePolling.stop()},n.render=function(){return s.createElement(Oe.a,{component:qe.a,fab:this._fab,style:et.root},s.createElement(Se.a,{accessibilityLabel:Je,fetchStatus:this.props.fetchStatus,onRequestRetry:this._handleFetchInitialWrapper,render:this._render}))},n._userMatchesQuery=function(e,t,n){return e&&e.toLowerCase().indexOf(n)>-1||t&&t.toLowerCase().indexOf(n)>-1},t}(s.Component);l()(Ze,"contextType",Be.a),l()(Ze,"defaultProps",{conversationIds:[],isTertiaryInbox:!1,withDmSearch:!1});var et=ge.a.create((function(e){return{root:{backgroundColor:e.colors.cellBackground,flexGrow:1},searchInput:{backgroundColor:e.colors.cellBackground,borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:"1px",padding:e.spaces.xSmall,zIndex:1}}}));t.a=Ze}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/web_legacy/loader.DMDrawer.bd975924.js.map