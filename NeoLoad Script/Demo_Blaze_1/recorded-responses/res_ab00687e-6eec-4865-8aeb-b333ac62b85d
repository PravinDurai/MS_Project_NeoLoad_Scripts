(window.webpackJsonp=window.webpackJsonp||[]).push([[177],{"3Rb5":function(e,t,r){"use strict";r("IAdD"),t.__esModule=!0,t.default=void 0;var n=o(r("7DT3")),i=o(r("ERkP")),a=o(r("OkZJ"));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e){return void 0===e&&(e={}),(0,n.default)("svg",Object.assign({},e,{style:[a.default.root,e.style],viewBox:"0 0 24 24"}),i.default.createElement("g",null,i.default.createElement("path",{d:"M12 4.656l8.72 8.72c.293.293.768.293 1.06 0s.294-.768 0-1.06l-9.25-9.25c-.292-.294-.767-.294-1.06 0l-9.25 9.25c-.146.145-.22.337-.22.53s.073.383.22.53c.293.292.768.292 1.06 0L12 4.656z"}),i.default.createElement("path",{d:"M12 12.465l8.72 8.72c.293.293.768.293 1.06 0s.294-.768 0-1.06l-9.25-9.25c-.292-.294-.767-.294-1.06 0l-9.25 9.25c-.146.145-.22.337-.22.53s.073.383.22.53c.293.292.768.292 1.06 0l8.72-8.72z"})))};s.metadata={height:24,width:24};var l=s;t.default=l},NzXb:function(e,t,r){"use strict";r("IAdD"),t.__esModule=!0,t.default=void 0;var n=o(r("7DT3")),i=o(r("ERkP")),a=o(r("OkZJ"));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e){return void 0===e&&(e={}),(0,n.default)("svg",Object.assign({},e,{style:[a.default.root,e.style],viewBox:"0 0 24 24"}),i.default.createElement("g",null,i.default.createElement("path",{d:"M12 19.344l-8.72-8.72c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06l9.25 9.25c.292.294.767.294 1.06 0l9.25-9.25c.146-.145.22-.337.22-.53s-.073-.383-.22-.53c-.293-.292-.768-.292-1.06 0L12 19.344z"}),i.default.createElement("path",{d:"M12 11.535l-8.72-8.72c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06l9.25 9.25c.292.294.767.294 1.06 0l9.25-9.25c.146-.145.22-.337.22-.53s-.073-.383-.22-.53c-.293-.292-.768-.292-1.06 0L12 11.535z"})))};s.metadata={height:24,width:24};var l=s;t.default=l},fuhe:function(e,t,r){"use strict";r.r(t),r.d(t,"DMDrawer",(function(){return et}));r("2G9S"),r("3voH");var n=r("97Jx"),i=r.n(n),a=r("1Pcy"),o=r.n(a),s=r("W/Kd"),l=r.n(s),c=r("KEM+"),d=r.n(c),u=r("ERkP"),h=r("ZUOq"),p=r("MMRb"),g=r("rxPX"),f=r("0KEI"),m=r("RqPI"),b=Object(g.a)().propsFromState((function(){return{conversations:p.selectConversations,drawerExperimentEnabled:p.selectDrawerExperimentEnabled,perspective:m.g,poppedOutConversationId:p.selectPoppedOutConversationId,visibility:p.selectDrawerVisibility}})).propsFromActions((function(){return{createLocalApiErrorHandler:Object(f.d)("DIRECT_MESSAGES_CONVERSATION"),fetchInboxIfNeeded:p.fetchInboxIfNeeded,loadDrawerExperimentFromPersistence:p.loadDrawerExperimentFromPersistence,loadDrawerVisibilityFromPersistence:p.loadDrawerVisibilityFromPersistence,setDrawerVisibility:p.setDrawerVisibility}})),v=(r("z84I"),r("lTEL"),r("IAdD"),r("7x/C"),r("kYxP"),r("VnFT")),y=r("1YZw"),_=r("hqKg"),E=r("Myq3"),w=r("AQOc"),x=r("UhuB"),C=r("G6rE"),D=r("P1r1"),I=function(e,t){return t.conversationId},O=Object(_.createSelector)((function(e,t){return p.selectEntriesForConversation(e,I(0,t))}),m.g,(function(e,t){return t?function(e,t){var r=Object(E.a)(e,(function(e){return!!e.message_data&&(e.message_data&&e.message_data.recipient_id===t)}));return r&&r.message_data&&r.message_data.quick_reply&&r.message_data.quick_reply&&"options"===r.message_data.quick_reply.type?r.message_data.quick_reply:void 0}(e,t):void 0})),S=function(e){return function(t){return v.c(e,t)}},H=function(e){return function(t,r){return v.a(e,t,r)}},T={conversation:function(e,t){return p.selectConversation(e,I(0,t))},entries:p.selectEntries,perspective:m.g,users:C.e.selectAll,dataSaverMode:D.j,dtabBarInfo:D.l,quickReplyOptions:O,visibility:p.selectDrawerVisibility,isUnread:function(e,t){return!p.selectConversationIsRead(e,I(0,t))},isDmReceiptSettingEnabled:x.j},M={draftText:function(e,t){return v.m(e,I(0,t))},gifMetadata:function(e,t){return v.h(e,I(0,t))},isUploading:function(e,t){return v.j(e,I(0,t))},media:function(e,t){return v.i(e,I(0,t))},mediaMetadata:function(e,t){return v.k(e,I(0,t))},mediaUploadProgress:function(e,t){return v.l(e,I(0,t))}},P=Object(g.a)().propsFromState((function(){return Object.assign({},T,M)})).adjustStateProps((function(e){var t=e.conversation,r=e.entries,n=e.perspective,i=e.users,a=e.dataSaverMode,o=e.draftText,s=e.dtabBarInfo,l=e.gifMetadata,c=e.isDmReceiptSettingEnabled,d=e.isUploading,u=e.isUnread,h=e.media,p=e.mediaMetadata,g=e.mediaUploadProgress,f=e.quickReplyOptions,m=e.visibility,b=null==t?void 0:t.data;return{conversation:b&&Object(w.a)(b,r,i),perspective:n,dataSaverMode:a,draftText:o,dtabBarInfo:s,gifMetadata:l,isDmReceiptSettingEnabled:c,isUploading:d,isUnread:u,media:h,mediaMetadata:p,mediaUploadProgress:g,quickReplyOptions:f,visibility:m}})).propsFromActions((function(e){var t=e.conversationId;return{addMedia:H(t),addToast:y.b,createLocalApiErrorHandler:Object(f.d)("DIRECT_MESSAGES_CONVERSATION"),fetchConversationHistory:p.fetchConversationHistory,removeMedia:S(t),saveText:v.f,sendMessage:v.n,updateConversationReadState:p.updateConversationReadState,updateTyping:p.updateTyping,fetchUpdatesIfNeeded:p.fetchUpdatesIfNeeded}})).withAnalytics({page:"messages",section:"thread_drawer"}),N=r("aWyx"),R=r("qz2E"),A=(r("uB9N"),r("Oi4X")),k=r("OhSZ"),L=(r("uFXj"),r("zh9S")),U=Object(g.a)().propsFromState((function(){return{visibility:p.selectDrawerVisibility}})).propsFromActions((function(){return{scribeAction:L.c,popOutConversation:p.popOutConversation,setDrawerVisibility:p.setDrawerVisibility}})),j=r("xPna"),B=r("wrlS"),F=r("3XMw"),V=r.n(F),W=r("17Sk"),q=r.n(W),z=r("Fyww"),X=r.n(z),G=r("l2F/"),Z=r.n(G),J=r("1sB9"),K=r.n(J),Y=r("NzXb"),Q=r.n(Y),$=r("3Rb5"),ee=r.n($),te=r("OrGc"),re=r("hACr"),ne=r("3xO4"),ie=r.n(ne),ae=r("/yvb"),oe=r("t62R"),se=r("xKuM"),le=r("rHpw"),ce=V.a.a2f8105f,de=V.a.e839db39,ue=V.a.d227d19e,he=V.a.c64c1883,pe=V.a.j7d0e835,ge=V.a.b08821f3,fe=V.a.e736990a,me=function(e){function t(t){var r;return r=e.call(this,t)||this,d()(o()(r),"_headerBar",u.createRef()),d()(o()(r),"_isExpanded",(function(){return r.props.visibility===j.a.EXPANDED})),d()(o()(r),"_renderLeftControl",(function(){return u.createElement(ae.a,{accessibilityLabel:ge,icon:u.createElement(q.a,null),onPress:r._handleUnpopConvo,type:"text"})})),d()(o()(r),"_renderRightControl",(function(){var e=r.props,t=e.conversationTitle,n=e.isHighlighted,i=e.hasNewMessages,a=r._isExpanded(),o=n&&i?"invertedText":"text";return u.createElement(ie.a,{role:"complementary",style:be.rightControls},t?null:u.createElement(ae.a,{accessibilityLabel:he,icon:u.createElement(K.a,null),onPress:r._handleNewMessage,type:o}),a?u.createElement(ae.a,{accessibilityLabel:ue,icon:u.createElement(Q.a,null),onPress:r._handleToggleVisibility,type:o}):u.createElement(ae.a,{accessibilityLabel:pe,icon:u.createElement(ee.a,null),onPress:r._handleToggleVisibility,type:o}),r._showDMQuickAccessWithClose?u.createElement(ae.a,{accessibilityLabel:de,icon:u.createElement(Z.a,null),onPress:r._handleClose,type:o}):null)})),d()(o()(r),"_handleUnpopConvo",(function(){(0,r.props.popOutConversation)(null)})),d()(o()(r),"_handleToggleVisibility",(function(){var e=r.props,t=e.scribeAction,n=e.scribeNamespace,i=e.setDrawerVisibility,a=e.onDrawerOpen,o=r._isExpanded()?j.a.COLLAPSED:j.a.EXPANDED;o===j.a.COLLAPSED?t(Object.assign({},n,{action:"collapse"})):o===j.a.EXPANDED&&(t(Object.assign({},n,{action:"expand"})),a&&a()),i(o)})),d()(o()(r),"_handleToggleVisibilityKeyboard",(function(){r._handleToggleVisibility(),r._headerBar&&r._headerBar.current&&r._headerBar.current.focus()})),d()(o()(r),"_handleClose",(function(){var e=r.props,t=e.scribeAction,n=e.scribeNamespace,i=e.setDrawerVisibility;t(Object.assign({},n,{action:"close"})),i(j.a.CLOSED)})),d()(o()(r),"_handleNewMessage",(function(){var e=r.props,t=e.history,n=e.scribeAction,i=e.scribeNamespace;n(Object.assign({},i,{section:"compose_drawer",component:"dm",action:"show"})),t.push({pathname:"/messages/compose",state:{source:"drawer"}})})),d()(o()(r),"_renderTitle",(function(){var e=r.props,t=e.conversationTitle,n=e.hasNewMessages,i=e.isHighlighted,a=t||u.createElement(oe.c,null,ce);return u.createElement(ie.a,{style:be.titleContainer},u.createElement(ie.a,{style:[be.titleTextRoot,i&&n?be.titleTextHighlighted:null]},a),n?u.createElement(ie.a,{style:be.newMessageDotContainer},u.createElement(X.a,{accessibilityLabel:fe,style:[be.newMessageDotRoot,i?be.newMessageDotHighlighted:be.newMessageDotRegular]})):null)})),r._showDMQuickAccessWithClose=B.a.isTrue("responsive_web_dm_quick_access_with_close_enabled"),r}l()(t,e);var r=t.prototype;return r.componentDidUpdate=function(e){var t=this.props,r=t.hasNewMessages,n=t.isHighlighted,i=t.triggerHighlight;e.isHighlighted||n||e.hasNewMessages||!r||i&&i()},r.render=function(){var e,t=this.props,r=t.conversationTitle,n=t.conversationSubtitle,i=t.hasNewMessages,a=t.isHighlighted,o=i?a?[be.headerHighlighted]:[be.headerActive]:[],s=this._isExpanded();return u.createElement(re.a,{enabled:!0,handlers:(e={},e[te.d.toggleDMDrawer]=this._handleToggleVisibilityKeyboard,e)},u.createElement(ie.a,{ref:this._headerBar,style:[be.headerRoot,!s&&be.headerBorderClosed].concat(o,[be.cursor,{zIndex:1}])},u.createElement(se.a,{leftControl:r&&this._isExpanded()?this._renderLeftControl():null,onMiddleControlClick:this._handleToggleVisibility,rightControl:this._renderRightControl(),subtitle:n,title:this._renderTitle(),withBackground:!1})))},t}(u.Component),be=le.a.create((function(e){return{root:{alignSelf:"flex-end",backgroundColor:e.colors.navigationBackground,borderColor:e.colors.borderColor,borderWidth:e.borderWidths.small,marginRight:e.spaces.medium,width:h.a.columnWidths.secondary.normal},cursor:{cursor:"pointer"},expanded:{height:h.a.columnWidths.secondary.normal},headerRoot:{borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,borderColor:e.colors.borderColor,borderTopLeftRadius:e.borderRadii.large,borderTopRightRadius:e.borderRadii.large,transition:"all 0.3s ease"},headerBorderClosed:{borderColor:e.colors.navigationBackground},headerActive:{backgroundColor:e.colors.unreadCellBackground},headerHighlighted:{borderColor:e.colors.primary,backgroundColor:e.colors.primary},titleContainer:{alignItems:"center",display:"flex",flexDirection:"row",flexGrow:1},titleTextRoot:{flexGrow:1,flexShrink:1},titleTextHighlighted:{color:e.colors.white},newMessageDotContainer:{flexGrow:1},newMessageDotRoot:{width:e.spaces.xSmall,height:e.spaces.xSmall,marginLeft:e.spaces.xxSmall},newMessageDotRegular:{color:e.colors.primary},newMessageDotHighlighted:{color:e.colors.white},rightControls:{flexDirection:"row"}}})),ve=U(me),ye=r("aWzz"),_e=r("XnpN"),Ee=(r("JtPf"),r("zb92")),we=Object(Ee.a)({loader:function(){return Promise.all([r.e(8),r.e(218)]).then(r.bind(null,"Z+oW"))},renderPlaceholder:function(){return null}}),xe=r("GSsg"),Ce=r("aITJ"),De=r("yrzJ"),Ie=function(e){function t(t){var r;return r=e.call(this,t)||this,d()(o()(r),"_composer",u.createRef()),d()(o()(r),"_renderConversation",(function(e,t){var n=r.props,i=n.conversationId,a=n.history,o=n.location;return u.createElement(A.a,{conversationId:i,history:a,isWide:!1,location:o,richTextInputContext:e,typeaheadWrapper:t})})),d()(o()(r),"_isExpanded",(function(){return r.props.visibility===j.a.EXPANDED})),d()(o()(r),"_fetchUpdatesIfNeeded",(function(){var e=r.props,t=e.conversationId,n=e.createLocalApiErrorHandler;(0,e.fetchUpdatesIfNeeded)(e.isDmReceiptSettingEnabled?{active_conversation_id:t,dm_users:!0}:{}).catch(n())})),Object(R.a)(),r}l()(t,e);var r=t.prototype;return r.componentDidMount=function(){this._updatePolling()},r.componentDidUpdate=function(e){e.visibility!==this.props.visibility&&this._updatePolling()},r.render=function(){var e=this,t=this.props,r=t.analytics,n=t.conversation,i=t.perspective,a=t.history,o=t.isUnread,s=t.isHeaderHighlighted,l=t.onDrawerOpen,c=t.triggerHeaderHighlight,d=this._isExpanded(),h=s?"white":"normal",p=n&&n.type===N.a.ONE_TO_ONE&&i&&Object(_e.a)(n,i).map((function(e){return e.user.screen_name})),g=p?u.createElement(De.a,{color:h,screenName:p[0]}):void 0;return u.createElement(ie.a,{style:d&&Oe.expanded},u.createElement(ve,{conversationSubtitle:g,conversationTitle:u.createElement(k.b,{conversation:n,perspective:i,textColor:h,withScreenName:!1}),hasNewMessages:o,history:a,isHighlighted:s,onDrawerOpen:l,scribeNamespace:r.contextualScribeNamespace,triggerHighlight:c}),d?Ce.a.isDesktopOS()?u.createElement(we,null,(function(t){var r=t.richTextInputContext,n=t.typeaheadWrapper;return e._renderConversation(r,n)})):this._renderConversation():null)},r._updatePolling=function(){this._pollingTimer&&this._pollingTimer.stop(),this.props.visibility===j.a.COLLAPSED&&(this._pollingTimer=new xe.a(this._fetchUpdatesIfNeeded,{interval:3e3}),this._pollingTimer.start())},r.getChildContext=function(){return{getCustomLocation:null}},t}(u.Component);d()(Ie,"childContextTypes",{getCustomLocation:ye.func});var Oe=le.a.create((function(e){return{root:{backgroundColor:e.colors.blue},expanded:{maxHeight:h.a.dmDrawerHeight.expanded,height:"80vh"}}})),Se=P(Ie),He=(r("i4UL"),r("LW0h"),r("tQbP"),r("1IsZ"),r("4q8G")),Te=r("kGix"),Me=r("tn7R"),Pe=r("l0YN"),Ne=Object(g.a)().propsFromState((function(){return{fetchStatus:p.selectFetchStatus,conversations:p.selectConversations,isLoadingTop:p.selectIsLoadingTop,settings:D.f,unreadCount:Pe.a,untrustedConversationCount:p.selectUntrustedConversationCount,untrustedUnreadCount:p.selectUntrustedUnreadCount,visibility:p.selectDrawerVisibility}})).adjustStateProps((function(e){var t=e.fetchStatus,r=e.conversations,n=e.isLoadingTop,i=e.settings,a=e.unreadCount,o=e.untrustedConversationCount,s=e.untrustedUnreadCount,l=e.visibility,c=!!Object.values(r).length,d=Object(Me.a)(r).filter((function(e){var t;return!e.isDeleted&&(null===(t=e.data)||void 0===t?void 0:t.trusted)})).map((function(e){return e.data})).sort(He.a),u=a>0;return{allowUntrustedInbox:"all"===i.allow_dms_from||o>0,conversationIds:d.map((function(e){return e.conversation_id})),fetchStatus:c?Te.a.LOADED:t,isRefreshing:c&&n,isUnread:u,untrustedUnreadCount:s,visibility:l}})).propsFromActions((function(){return{scribeAction:L.c,createLocalApiErrorHandler:Object(f.d)("DIRECT_MESSAGES_INBOX"),fetchInbox:p.fetchInbox,fetchInboxHistory:p.fetchTrustedInboxHistory,fetchInboxIfNeeded:p.fetchInboxIfNeeded,fetchUpdates:p.fetchUpdatesIfNeeded,googleAnalyticsPageView:L.a,scribePageImpression:L.d,updateLastSeenEventId:p.updateTrustedLastSeenEventId,popOutConversation:p.popOutConversation}})).withAnalytics({page:"messages",section:"inbox_drawer"}),Re=r("qS4/"),Ae=r("yw4N"),ke=r("FIs5"),Le=r("csss"),Ue=r("Znyr"),je=V.a.a2f8105f,Be=V.a.b8aa3744,Fe=V.a.j06309e1,Ve=V.a.gee5150a,We=V.a.cf2d1047,qe=V.a.da2f9224,ze=V.a.h6beb5fa,Xe=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t=e.call.apply(e,[this].concat(n))||this,d()(o()(t),"_renderExpandedInbox",(function(){var e=t.props,r=e.analytics,n=e.conversationIds,i=e.createLocalApiErrorHandler,a=e.fetchInbox,o=e.fetchInboxHistory,s=e.fetchInboxIfNeeded,l=e.fetchStatus,c=e.fetchUpdates,d=e.googleAnalyticsPageView,h=e.scribePageImpression,p=e.isRefreshing,g=e.scribeAction,f=e.updateLastSeenEventId;return u.createElement(ie.a,{style:Ge.fill},u.createElement(Ae.a,{style:Ge.viewportView},u.createElement(Re.a,{accessibilityTitle:je,conversationIds:n,conversationPathPrefix:"/messages",createLocalApiErrorHandler:i,customCellClick:t._dmDrawerOnClick,fetchInbox:a,fetchInboxHistory:o,fetchInboxIfNeeded:s,fetchStatus:l,fetchUpdates:c,googleAnalyticsPageView:d,isRefreshing:p,renderEmptyDMInbox:t._renderEmptyDMInbox,renderStickyContent:t._renderPivot,scribeAction:g,scribeNamespace:r.contextualScribeNamespace,scribePageImpression:h,updateLastSeenEventId:f,virtualScrollerCacheKey:"dmDrawerInbox"})))})),d()(o()(t),"_renderEmptyDMInbox",(function(){return u.createElement(ke.a,{buttonLink:"/messages/compose",buttonText:Ve,header:Be,message:Fe,onImpression:t._handleEmptyDMInboxImpression})})),d()(o()(t),"_isExpanded",(function(){return t.props.visibility===j.a.EXPANDED})),d()(o()(t),"_dmDrawerOnClick",(function(e,r){(0,t.props.popOutConversation)(r),e.preventDefault()})),d()(o()(t),"_handleEmptyDMInboxImpression",(function(){var e=t.props,r=e.scribeAction,n=e.analytics;r(Object.assign({},n.contextualScribeNamespace,{component:"empty_message",action:"impression"}))})),d()(o()(t),"_handleRequestsPivotClick",(function(){var e=t.props,r=e.scribeAction,n=e.analytics;r(Object.assign({},n.contextualScribeNamespace,{element:"requests_pivot",action:"click"}))})),d()(o()(t),"_renderPivot",(function(){return t.props.allowUntrustedInbox?u.createElement(ie.a,{style:Ge.requestPivotContainer},u.createElement(Le.a,{label:We,link:"/messages/requests",onPress:t._handleRequestsPivotClick,renderRightContent:t._renderPivotBadge,withBottomBorder:!1})):null})),d()(o()(t),"_renderPivotBadge",(function(){var e=t.props.untrustedUnreadCount;return e>0?u.createElement(Ue.a,{count:e,standalone:!0,truncatedCountFormatter:ze,unreadCountLabel:qe}):null})),t}l()(t,e);var r=t.prototype;return r.componentDidUpdate=function(){this._isExpanded()&&Object(R.a)()},r.render=function(){var e=this.props,t=e.analytics,r=e.history,n=e.isUnread,i=e.isHeaderHighlighted,a=e.onDrawerOpen,o=e.triggerHeaderHighlight,s=this._isExpanded();return u.createElement(ie.a,{style:s&&Ge.expanded},u.createElement(ve,{hasNewMessages:n,history:r,isHighlighted:i,onDrawerOpen:a,scribeNamespace:t.contextualScribeNamespace,triggerHighlight:o}),s&&this._renderExpandedInbox())},t}(u.Component),Ge=le.a.create((function(e){return{expanded:{maxHeight:h.a.dmDrawerHeight.expanded,height:"80vh"},fill:{flex:1,alignSelf:"stretch"},requestPivotContainer:{backgroundColor:e.colors.cellBackground,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,borderBottomColor:e.colors.borderColor,zIndex:2},viewportView:Object.assign({},le.a.absoluteFillObject,{overflowY:"auto"})}})),Ze=Ne(Xe),Je=r("YeIG"),Ke="DMDrawer",Ye=r("TnY3"),Qe=r("0FVZ"),$e=r("Oe3h"),et=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t=e.call.apply(e,[this].concat(n))||this,d()(o()(t),"state",{isHeaderHighlighted:!1,hasStartedInitialFetch:!1}),d()(o()(t),"_showDMDrawer",(function(){var e=t.props,r=e.conversations,n=e.location.pathname,i=e.visibility,a="/logout"===n,o="/messages"===n||n.startsWith("/messages/"),s=i===j.a.CLOSED;return!(a||o||t._isOnOcfFlow()||Object(Je.a)(r)||s)})),d()(o()(t),"_isExpanded",(function(){return t.props.visibility===j.a.EXPANDED})),d()(o()(t),"_triggerHeaderHighlight",(function(){var e=t.state.isHeaderHighlighted;t._isExpanded()||e||t._headerHighlightTimeoutId||(t.setState({isHeaderHighlighted:!0}),t._headerHighlightTimeoutId=setTimeout((function(){t.setState({isHeaderHighlighted:!1}),t._headerHighlightTimeoutId=void 0}),3e3))})),d()(o()(t),"_handleDrawerOpen",(function(){t.state.isHeaderHighlighted&&(t.setState({isHeaderHighlighted:!1}),clearTimeout(t._headerHighlightTimeoutId),t._headerHighlightTimeoutId=void 0)})),d()(o()(t),"_isOnOcfFlow",(function(){return t.props.location.pathname.startsWith("/i/flow")})),t}l()(t,e);var r=t.prototype;return r.componentWillUnmount=function(){clearTimeout(this._headerHighlightTimeoutId)},r.componentDidUpdate=function(){this._loadInboxDataIfNeeded()},r.componentDidMount=function(){this._loadInboxDataIfNeeded()},r.render=function(){var e=this,t=this.props,r=t.history,n=t.location,a=t.perspective,o=t.poppedOutConversationId,s=this.state.isHeaderHighlighted;return this._showDMDrawer()?u.createElement(Qe.a.Drawer,null,u.createElement($e.a,null,(function(t,l){return u.createElement(ie.a,i()({ref:t()},l({style:[tt.root],testID:Ke})),o?u.createElement(Se,{conversationId:o,history:r,isHeaderHighlighted:s,location:n,onDrawerOpen:e._handleDrawerOpen,perspective:a,triggerHeaderHighlight:e._triggerHeaderHighlight}):u.createElement(Ze,{history:r,isHeaderHighlighted:s,onDrawerOpen:e._handleDrawerOpen,triggerHeaderHighlight:e._triggerHeaderHighlight}))}))):null},r._loadInboxDataIfNeeded=function(){var e=this.props,t=e.fetchInboxIfNeeded,r=e.createLocalApiErrorHandler,n=e.loadDrawerExperimentFromPersistence,i=e.loadDrawerVisibilityFromPersistence,a=this.state.hasStartedInitialFetch;this._isOnOcfFlow()||a||(i(),n(),t().catch(r()),this.setState({hasStartedInitialFetch:!0}))},t}(u.PureComponent),tt=le.a.create((function(e){return{root:{alignSelf:"flex-end",backgroundColor:e.colors.navigationBackground,borderTopLeftRadius:e.borderRadii.large,borderTopRightRadius:e.borderRadii.large,boxShadow:e.boxShadows.medium,marginRight:e.spaces.medium,width:h.a.dmDrawerWidth.default,minWidth:h.a.dmDrawerWidth.min,maxWidth:h.a.dmDrawerWidth.max}}})),rt=b(et);t.default=Object(Ye.a)(rt)}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/web_legacy/loader.DMDrawer.4a13d334.js.map